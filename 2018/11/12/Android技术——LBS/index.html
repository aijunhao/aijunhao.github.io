<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Android特色开发—LBS(基于位置的服务) | Hello, I&#39;m Junhao Ai.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="目录  基于位置的服务简介 申请百度开发者账号及获取API Key和SDK Android Studio中配置SDK 获取位置信息 官方权限说明 布局 获取经纬度 获取地址 获取位置描述 获取周边的POI（兴趣点坐标） 获取室内定位 停止定位   地图 官方权限说明 布局 显示地图 在地图中显示定位      基于位置的服务简介基于位置的服务围绕的核心就是要先确定用户所在的位置。 通常有两种技术方">
<meta name="keywords" content="Android,移动端">
<meta property="og:type" content="article">
<meta property="og:title" content="Android特色开发—LBS(基于位置的服务)">
<meta property="og:url" content="http://yoursite.com/2018/11/12/Android技术——LBS/index.html">
<meta property="og:site_name" content="Hello, I&#39;m Junhao Ai.">
<meta property="og:description" content="目录  基于位置的服务简介 申请百度开发者账号及获取API Key和SDK Android Studio中配置SDK 获取位置信息 官方权限说明 布局 获取经纬度 获取地址 获取位置描述 获取周边的POI（兴趣点坐标） 获取室内定位 停止定位   地图 官方权限说明 布局 显示地图 在地图中显示定位      基于位置的服务简介基于位置的服务围绕的核心就是要先确定用户所在的位置。 通常有两种技术方">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/百度开发者.png">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/百度地图开放平台.png">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/创建应用.png">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/SHA1.png">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/SDK.PNG">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/解压.PNG">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/解压2.PNG">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/libs.PNG">
<meta property="og:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/LBS.jpg">
<meta property="og:updated_time" content="2019-03-10T08:18:42.382Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android特色开发—LBS(基于位置的服务)">
<meta name="twitter:description" content="目录  基于位置的服务简介 申请百度开发者账号及获取API Key和SDK Android Studio中配置SDK 获取位置信息 官方权限说明 布局 获取经纬度 获取地址 获取位置描述 获取周边的POI（兴趣点坐标） 获取室内定位 停止定位   地图 官方权限说明 布局 显示地图 在地图中显示定位      基于位置的服务简介基于位置的服务围绕的核心就是要先确定用户所在的位置。 通常有两种技术方">
<meta name="twitter:image" content="http://yoursite.com/2018/11/12/Android技术——LBS/百度开发者.png">
  
    <link rel="alternate" href="/atom.xml" title="Hello, I&#39;m Junhao Ai." type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hello, I&#39;m Junhao Ai.</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Android技术——LBS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/12/Android技术——LBS/" class="article-date">
  <time datetime="2018-11-12T10:30:28.000Z" itemprop="datePublished">2018-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android特色开发—LBS(基于位置的服务)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目录<br><!-- TOC --></p>
<ul>
<li><a href="#基于位置的服务简介">基于位置的服务简介</a></li>
<li><a href="#申请百度开发者账号及获取api-key和sdk">申请百度开发者账号及获取API Key和SDK</a></li>
<li><a href="#android-studio中配置sdk">Android Studio中配置SDK</a></li>
<li><a href="#获取位置信息">获取位置信息</a><ul>
<li><a href="#官方权限说明">官方权限说明</a></li>
<li><a href="#布局">布局</a></li>
<li><a href="#获取经纬度">获取经纬度</a></li>
<li><a href="#获取地址">获取地址</a></li>
<li><a href="#获取位置描述">获取位置描述</a></li>
<li><a href="#获取周边的poi兴趣点坐标">获取周边的POI（兴趣点坐标）</a></li>
<li><a href="#获取室内定位">获取室内定位</a></li>
<li><a href="#停止定位">停止定位</a></li>
</ul>
</li>
<li><a href="#地图">地图</a><ul>
<li><a href="#官方权限说明-1">官方权限说明</a></li>
<li><a href="#布局-1">布局</a></li>
<li><a href="#显示地图">显示地图</a></li>
<li><a href="#在地图中显示定位">在地图中显示定位</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<hr>
<h3 id="基于位置的服务简介"><a href="#基于位置的服务简介" class="headerlink" title="基于位置的服务简介"></a>基于位置的服务简介</h3><p>基于位置的服务围绕的核心就是要先确定用户所在的位置。</p>
<p>通常有两种技术方式：</p>
<ol>
<li><p>一种是通过GPS定位：GPS定位的工作原理是基于手机内置的GPS硬件直接和卫星交互来获取当前的经纬度信息。</p>
<ul>
<li>优点：定位精确度非常高。</li>
<li>缺点：只能在室外使用，室内基本无法收到卫星信号。</li>
</ul>
</li>
<li><p>一种是通过网络定位：网络定位的工作原理是根据手机当前网络附近的三个基站进行测速，以此确定出一个大概的位置。</p>
<ul>
<li>优点：在室内室外都能使用。</li>
<li>缺点：定位精确度不高。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="申请百度开发者账号及获取API-Key和SDK"><a href="#申请百度开发者账号及获取API-Key和SDK" class="headerlink" title="申请百度开发者账号及获取API Key和SDK"></a>申请百度开发者账号及获取API Key和SDK</h3><p>此节我们使用的是第三方公司的SDK，国内在此领域做得比较好的一个是百度，一个是高德。</p>
<p>这里我们采用百度的LBS。</p>
<ol>
<li><p>首先申请百度账号。不解释。</p>
</li>
<li><p>申请成为一名百度开发者。</p>
<p> 打开网址：<a href="http://developer.baidu.com/user/info" target="_blank" rel="noopener">http://developer.baidu.com/user/info</a><br> 如下图填写个人信息，填写带‘*’号的即可：<br> <img src="/2018/11/12/Android技术——LBS/百度开发者.png" alt=""></p>
</li>
<li><p>进入百度地图开放平台  </p>
<p> 网址：<a href="http://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="noopener">http://lbsyun.baidu.com/apiconsole/key</a><br> 刚注册的账号的应用列表是空的，这里我已经使用过这个平台，应有列表有我的项目信息。<br> <img src="/2018/11/12/Android技术——LBS/百度地图开放平台.png" alt=""></p>
</li>
<li><p>点击创建应用</p>
<p> 如下图所示，应用名称自定义，应用类型自定义(这里我们使用Android SDK，给Android设备使用的)，启用服务默认即可。<br> <img src="/2018/11/12/Android技术——LBS/创建应用.png" alt=""></p>
<p> 开发版SHA1：是在Android Studio项目中的，打开Android Studio，点击右侧的“Gradle”，点击“:app/Tasks/android/signingReport”，在下面会弹出一些信息，找到里面的SHA1复制即可。<br> <img src="/2018/11/12/Android技术——LBS/SHA1.png" alt=""></p>
<p> 包名：就是Android Studio中SHA1对应项目的包名。</p>
</li>
<li><p>点击“提交”按钮</p>
<p> 此时，在应用列表中就有我们创建出来的项目了，其中“访问位置（AK）”就是API Key。</p>
</li>
<li><p>获取SDK</p>
<p> 网址：<a href="http://lbsyun.baidu.com/index.php?title=sdk/download&amp;action#selected=mapsdk_basicmap,mapsdk_searchfunction,mapsdk_lbscloudsearch,mapsdk_calculationtool,mapsdk_radar" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=sdk/download&amp;action#selected=mapsdk_basicmap,mapsdk_searchfunction,mapsdk_lbscloudsearch,mapsdk_calculationtool,mapsdk_radar</a></p>
<p> 百度地图开放平台首页中也可以进入下载SDK页面：<a href="http://lbsyun.baidu.com/index.php?title=首页" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=首页</a></p>
<p> 根据需求选择，然后下载sdk。<br> <img src="/2018/11/12/Android技术——LBS/SDK.PNG" alt=""></p>
<p> 那个“BaiduLBS_AndroidSDK_Lib.zip”就是我们需要的LBS的SDK。</p>
</li>
</ol>
<h3 id="Android-Studio中配置SDK"><a href="#Android-Studio中配置SDK" class="headerlink" title="Android Studio中配置SDK"></a>Android Studio中配置SDK</h3><p>官方推荐的配置方法：<a href="http://lbsyun.baidu.com/index.php?title=androidsdk/guide/create-project/androidstudio" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=androidsdk/guide/create-project/androidstudio</a></p>
<p>这里进行更详细的介绍：</p>
<ol>
<li><p>解压</p>
<p> 将我们下载好的SDK文件“BaiduLBS_AndroidSDK_Lib.zip”解压。</p>
<p> <img src="/2018/11/12/Android技术——LBS/解压.PNG" alt=""></p>
<p> <img src="/2018/11/12/Android技术——LBS/解压2.PNG" alt=""></p>
<p> 在libs目录下有一个BaiduLBS_Android.jar包，这是给java层使用的，功能包内容如下：基础地图、室内地图、个性化地图、检索、云检索、计算工具、路线规划、定位等。 libs目录下其他的文件夹下有一些os文件，那是Native层使用的。</p>
</li>
<li><p>Android Studio中配置文件</p>
<p> 将BaiduLBS_Android.jar等jar包复制到项目额libs目录下，右键“Add As Library…”添加类库。 在src/main目录下新建一个jniLibs文件夹，将其他文件复制到里面。</p>
<p> <img src="/2018/11/12/Android技术——LBS/libs.PNG" alt=""></p>
</li>
<li><p>配置秘钥和服务</p>
</li>
</ol>
<p>AndroidManifest.xml中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.baidu.lbsapi.API_KEY"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:value</span>=<span class="string">"密匙"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">service</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.baidu.location.f"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:enabled</span>=<span class="string">"true"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:process</span>=<span class="string">":remote"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="获取位置信息"><a href="#获取位置信息" class="headerlink" title="获取位置信息"></a>获取位置信息</h3><p><img src="/2018/11/12/Android技术——LBS/LBS.jpg" alt=""></p>
<h4 id="官方权限说明"><a href="#官方权限说明" class="headerlink" title="官方权限说明"></a>官方权限说明</h4><p>部分危险权限需要运行时权限。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这个权限用于进行网络定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这个权限用于访问GPS定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用于访问wifi网络信息，wifi信息会用于进行网络定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 获取运营商信息，用于支持提供运营商信息相关的接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这个权限用于获取wifi的获取权限，wifi信息会用来进行网络定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_WIFI_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用于读取手机当前的状态--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 写入扩展存储，向扩展卡写入数据，用于写入离线定位数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 访问网络，网络定位需要上网--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SD卡读取权限，用户写入离线定位数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MOUNT_UNMOUNT_FILESYSTEMS"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><p>页面布局xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".LBSTest.MapActivity"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/tv_position"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"位置"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="获取经纬度"><a href="#获取经纬度" class="headerlink" title="获取经纬度"></a>获取经纬度</h4><p>配置定位SDK参数有如下一些可选参数：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption();</span><br><span class="line"></span><br><span class="line">option.setLocationMode(LocationMode.Hight_Accuracy);</span><br><span class="line"><span class="comment">//可选，设置定位模式，默认高精度</span></span><br><span class="line"><span class="comment">//LocationMode.Hight_Accuracy：高精度，优先使用GPS，其次网络；</span></span><br><span class="line"><span class="comment">//LocationMode. Battery_Saving：低功耗，仅使用网络；</span></span><br><span class="line"><span class="comment">//LocationMode. Device_Sensors：仅使用设备，GPS；</span></span><br><span class="line">	</span><br><span class="line">option.setCoorType(<span class="string">"bd09ll"</span>);</span><br><span class="line"><span class="comment">//可选，设置返回经纬度坐标类型，默认GCJ02</span></span><br><span class="line"><span class="comment">//GCJ02：国测局坐标；</span></span><br><span class="line"><span class="comment">//BD09ll：百度经纬度坐标；</span></span><br><span class="line"><span class="comment">//BD09：百度墨卡托坐标；</span></span><br><span class="line"><span class="comment">//海外地区定位，无需设置坐标类型，统一返回WGS84类型坐标</span></span><br><span class="line"> 	</span><br><span class="line">option.setScanSpan(<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//可选，设置发起定位请求的间隔，int类型，单位ms</span></span><br><span class="line"><span class="comment">//如果设置为0，则代表单次定位，即仅定位一次，默认为0</span></span><br><span class="line"><span class="comment">//如果设置非0，需设置1000ms以上才有效</span></span><br><span class="line">	</span><br><span class="line">option.setOpenGps(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，设置是否使用gps，默认false</span></span><br><span class="line"><span class="comment">//使用高精度和仅用设备两种定位模式的，参数必须设置为true</span></span><br><span class="line">	</span><br><span class="line">option.setLocationNotify(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，设置是否当GPS有效时按照1S/1次频率输出GPS结果，默认false</span></span><br><span class="line">	</span><br><span class="line">option.setIgnoreKillProcess(<span class="keyword">false</span>);</span><br><span class="line"><span class="comment">//可选，定位SDK内部是一个service，并放到了独立进程。</span></span><br><span class="line"><span class="comment">//设置是否在stop的时候杀死这个进程，默认（建议）不杀死，即setIgnoreKillProcess(true)</span></span><br><span class="line">	</span><br><span class="line">option.SetIgnoreCacheException(<span class="keyword">false</span>);</span><br><span class="line"><span class="comment">//可选，设置是否收集Crash信息，默认收集，即参数为false</span></span><br><span class="line"></span><br><span class="line">option.setWifiCacheTimeOut(<span class="number">5</span>*<span class="number">60</span>*<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//可选，V7.2版本新增能力</span></span><br><span class="line"><span class="comment">//如果设置了该接口，首次启动定位时，会先判断当前Wi-Fi是否超出有效期，若超出有效期，会先重新扫描Wi-Fi，然后定位</span></span><br><span class="line">	</span><br><span class="line">option.setEnableSimulateGps(<span class="keyword">false</span>);</span><br><span class="line"><span class="comment">//可选，设置是否需要过滤GPS仿真结果，默认需要，即参数为false</span></span><br><span class="line">	</span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure></p>
<p>注意，此处需要一些危险权限，需要动态申请。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.example.aijunhao.myproject.LBSTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.Manifest;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.ActivityCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.content.ContextCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.location.BDAbstractLocationListener;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.BDLocation;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.BDLocationListener;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.LocationClient;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.LocationClientOption;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.BaiduMap;</span><br><span class="line"><span class="keyword">import</span> com.example.aijunhao.myproject.MainActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.aijunhao.myproject.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> butterknife.BindView;</span><br><span class="line"><span class="keyword">import</span> butterknife.ButterKnife;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BindView</span>(R.id.tv_position)</span><br><span class="line">    TextView tvPosition;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LocationClient mLocationClient;</span><br><span class="line">    <span class="keyword">private</span> LocationClientOption  option;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有权限数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String[] permissions = <span class="keyword">new</span> String[]&#123;</span><br><span class="line">            Manifest.permission.ACCESS_FINE_LOCATION,</span><br><span class="line">            Manifest.permission.READ_PHONE_STATE,</span><br><span class="line">            Manifest.permission.WRITE_EXTERNAL_STORAGE</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需要申请权限的列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;String&gt; permissionList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        setContentView(R.layout.activity_map);</span><br><span class="line">        ButterKnife.bind(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;permissions.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(MapActivity.<span class="keyword">this</span>, permissions[i]) != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">                permissionList.add(permissions[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!permissionList.isEmpty())&#123;</span><br><span class="line">            String [] array = permissionList.toArray(<span class="keyword">new</span> String[permissionList.size()]);</span><br><span class="line">            ActivityCompat.requestPermissions(MapActivity.<span class="keyword">this</span>, array, <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            requestLocation();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">requestLocation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mLocationClient = <span class="keyword">new</span> LocationClient(getApplicationContext());</span><br><span class="line">        mLocationClient.registerLocationListener(<span class="keyword">new</span> MyLocationClickListener());</span><br><span class="line">        initLocationOption();</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 将配置好的LocationClientOption对象传递给LocationClient对象</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        mLocationClient.setLocOption(locationOption);</span><br><span class="line">        mLocationClient.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initLocationOption</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 配置定位SDK参数</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        option = <span class="keyword">new</span> LocationClientOption();</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Hight_Accuracy);</span><br><span class="line">        option.setScanSpan(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, @NonNull String[] permissions, @NonNull <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (requestCode)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> result : grantResults)&#123;</span><br><span class="line">                        <span class="keyword">if</span> (result != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">                            Toast.makeText(<span class="keyword">this</span>, <span class="string">"必须同意所有权限才是使用本程序"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                            finish();</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    requestLocation();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Toast.makeText(<span class="keyword">this</span>, <span class="string">"发生未知错误"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    finish();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">            StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 获取经纬度</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">double</span> latitude = location.getLatitude();</span><br><span class="line">            <span class="keyword">double</span> longitude = location.getLongitude();</span><br><span class="line"></span><br><span class="line">            currentPosition.append(<span class="string">"维度："</span>).append(latitude).append(<span class="string">"\n"</span>);</span><br><span class="line">            currentPosition.append(<span class="string">"经度："</span>).append(longitude).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 获取定位方式</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            String mode = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (location.getLocType() == BDLocation.TypeGpsLocation)&#123;</span><br><span class="line">                mode = <span class="string">"GPS"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (location.getLocType() == BDLocation.TypeNetWorkLocation)&#123;</span><br><span class="line">                mode = <span class="string">"网络"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            currentPosition.append(<span class="string">"定位方式："</span>).append(mode).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">            tvPosition.setText(currentPosition);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="获取地址"><a href="#获取地址" class="headerlink" title="获取地址"></a>获取地址</h4><p>配置定位SDK参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption()；</span><br><span class="line"></span><br><span class="line">option.setIsNeedAddress(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，是否需要地址信息，默认为不需要，即参数为false</span></span><br><span class="line"><span class="comment">//如果开发者需要获得当前点的地址信息，此处必须为true</span></span><br><span class="line"></span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure>
<p>获取地址只需要在BDLocationListener中获取即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">        StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取地址</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String address = location.getAddrStr();     <span class="comment">// 包括了以下全部</span></span><br><span class="line">        String country = location.getCountry();</span><br><span class="line">        String province = location.getProvince();</span><br><span class="line">        String city = location.getCity();</span><br><span class="line">        String district = location.getDistrict();</span><br><span class="line">        String street = location.getStreet();</span><br><span class="line">        currentPosition.append(<span class="string">"详细地址："</span>).append(address).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"国家："</span>).append(country).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"省份："</span>).append(province).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"城市："</span>).append(city).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"区县："</span>).append(district).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"街道："</span>).append(street).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        tvPosition.setText(currentPosition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取位置描述"><a href="#获取位置描述" class="headerlink" title="获取位置描述"></a>获取位置描述</h4><p>配置定位SDK参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption()；</span><br><span class="line"></span><br><span class="line">option.setIsNeedLocationDescribe(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，是否需要位置描述信息，默认为不需要，即参数为false</span></span><br><span class="line"><span class="comment">//如果开发者需要获得当前点的位置信息，此处必须为true</span></span><br><span class="line"></span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure>
<p>获取位置描述只需要在BDLocationListener中获取即可。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">        StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 位置描述</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String locationDescribe = location.getLocationDescribe();</span><br><span class="line">        currentPosition.append(<span class="string">"位置描述："</span>).append(locationDescribe).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        tvPosition.setText(currentPosition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="获取周边的POI（兴趣点坐标）"><a href="#获取周边的POI（兴趣点坐标）" class="headerlink" title="获取周边的POI（兴趣点坐标）"></a>获取周边的POI（兴趣点坐标）</h4><p>配置定位SDK参数：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption()；</span><br><span class="line"></span><br><span class="line">option.setIsNeedLocationPoiList(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，是否需要周边POI信息，默认为不需要，即参数为false</span></span><br><span class="line"><span class="comment">//如果开发者需要获得周边POI信息，此处必须为true</span></span><br><span class="line"></span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">获取周边POI只需要在BDLocationListener中获取即可。</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">    private class MyLocationClickListener implements BDLocationListener &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onReceiveLocation(BDLocation location) &#123;</span><br><span class="line">            StringBuilder currentPosition = new StringBuilder();</span><br><span class="line"></span><br><span class="line">            /**</span><br><span class="line">             * 周边POI信息</span><br><span class="line">             */</span><br><span class="line">            List&lt;Poi&gt; poiList = location.getPoiList();</span><br><span class="line">            for (int i=0; i&lt;poiList.size(); i++)&#123;</span><br><span class="line">                currentPosition.append(&quot;周边POI[&quot; + i + &quot;]:&quot; + &quot;\n&quot;);</span><br><span class="line">                currentPosition.append(&quot;ID:&quot; + poiList.get(i).getId());</span><br><span class="line">                currentPosition.append(&quot;name:&quot; + poiList.get(i).getName());</span><br><span class="line">                currentPosition.append(&quot;rank:&quot; + poiList.get(i).getRank() + &quot;\n&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            tvPosition.setText(currentPosition);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取室内定位"><a href="#获取室内定位" class="headerlink" title="获取室内定位"></a>获取室内定位</h4><p>获取室内定位只需要在BDLocationListener中获取即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">        StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 室内定位</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (location.getFloor() != <span class="keyword">null</span>)&#123;</span><br><span class="line">            String buildingID = location.getBuildingID();</span><br><span class="line">            String buildingName = location.getBuildingName();       <span class="comment">// 百度内部建筑物ID</span></span><br><span class="line">            String floor = location.getFloor();     <span class="comment">// 室内定位楼层信息</span></span><br><span class="line">            mLocationClient.startIndoorMode();</span><br><span class="line">            currentPosition.append(<span class="string">"室内定位："</span> + <span class="string">"\n"</span>);</span><br><span class="line">            currentPosition.append(<span class="string">"buildingID: "</span> + buildingID);</span><br><span class="line">            currentPosition.append(<span class="string">"buildingName: "</span> + buildingName);</span><br><span class="line">            currentPosition.append(<span class="string">"floor: "</span> + floor + <span class="string">"\n"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            currentPosition.append(<span class="string">"当前位置不支持室内定位"</span> + <span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        tvPosition.setText(currentPosition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="停止定位"><a href="#停止定位" class="headerlink" title="停止定位"></a>停止定位</h4><p>活动销毁时一定要停止定位，否则程序会一直在后台进行定位，消耗手机电量。</p>
<p>重写onDestroy()方法，调用LocationClient的stop()方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    mLocationClient.stopIndoorMode();       <span class="comment">// 关闭室内定位</span></span><br><span class="line">    mLocationClient.stop();     <span class="comment">// 关闭定位</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h3><h4 id="官方权限说明-1"><a href="#官方权限说明-1" class="headerlink" title="官方权限说明"></a>官方权限说明</h4><p>部分危险权限需要运行时权限。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 获取设备网络状态，禁用后无法获取网络状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 网络权限，当禁用后，无法进行检索等相关业务 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 读取设备硬件信息，统计数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 读取系统信息，包含系统版本等信息，用作统计 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"com.android.launcher.permission.READ_SETTINGS"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 获取设备的网络状态，鉴权所需网络代理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 允许sd卡写权限，需写入地图数据，禁用后无法显示地图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 获取统计数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_SETTINGS"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 使用步行AR导航，配置Camera权限 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CAMERA"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="布局-1"><a href="#布局-1" class="headerlink" title="布局"></a>布局</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".LBSTest.MyMapActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ……</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.baidu.mapapi.map.MapView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/mapview"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:clickable</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="显示地图"><a href="#显示地图" class="headerlink" title="显示地图"></a>显示地图</h4><p>目前百度地图SDK所提供的地图等级为3-21级，所包含的信息有建筑物、道路、河流、学校、公园等内容。 </p>
<p>在21级时，不支持显示卫星图、热力图、交通路况图层。</p>
<p>当地图从20级放大到21级后，卫星图、热力图、交通路况图层将不再显示；缩小到20级后，卫星图、热力图、交通路况图层，会再正常显示。</p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>MAP_TYPE_NORMAL</td>
<td>普通地图（包含3D地图）</td>
</tr>
<tr>
<td>MAP_TYPE_SATELLITE</td>
<td>卫星图</td>
</tr>
<tr>
<td>MAP_TYPE_NONE</td>
<td>空白地图</td>
</tr>
</tbody>
</table>
<ul>
<li><p>普通地图</p>
<p>  基础的道路地图。 显示道路、建筑物、绿地以及河流等重要的自然特征。 </p>
</li>
<li><p>卫星地图</p>
<p>  显示卫星照片数据。 </p>
</li>
<li><p>空白地图</p>
<p>  无地图瓦片,地图将渲染为空白地图。不加载任何图块，将不会使用流量下载基础地图瓦片图层。支持叠加任何覆盖物。</p>
</li>
</ul>
<pre><code>适用场景：与瓦片图层（tileOverlay）一起使用，节省流量，提升自定义瓦片图下载速度。 
</code></pre><ul>
<li><p>实时路况图，嵌入地图中使用</p>
<p>  全国范围内已支持绝大部分城市实时路况查询。普通地图和卫星地图，均支持叠加实时路况图。 </p>
</li>
<li><p>百度城市热力图，嵌入地图中使用</p>
<p>  百度城市热力图是用不同颜色的区块叠加在地图上描述人群分布、密度和变化趋势的一个产品。地图层级介于11-20级时，可显示城市热力图。</p>
<p>  百度城市热力图的性质及使用与实时路况图类似，只需要简单的接口调用，即可在地图上展现样式丰富的百度城市热力图。 </p>
</li>
</ul>
<p>在java中，需要重写activity的生命周期的几个方法来管理地图的生命周期，初始化SDK的方法一定要在设置布局之前进行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.aijunhao.myproject.LBSTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.SDKInitializer;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.BaiduMap;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.MapView;</span><br><span class="line"><span class="keyword">import</span> com.example.aijunhao.myproject.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> butterknife.BindView;</span><br><span class="line"><span class="keyword">import</span> butterknife.ButterKnife;</span><br><span class="line"><span class="keyword">import</span> butterknife.OnClick;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BindView</span>(R.id.mapview)</span><br><span class="line">    MapView mapview;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_normal)</span><br><span class="line">    TextView btnNormal;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_satellite)</span><br><span class="line">    TextView btnSatellite;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_none)</span><br><span class="line">    TextView btnNone;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_traffic_map)</span><br><span class="line">    TextView btnTrafficMap;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_heat_map)</span><br><span class="line">    TextView btnHeatMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> BaiduMap baiduMap;      <span class="comment">// 百度地图对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> trafficEnabled = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> heatMapEnabled = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        SDKInitializer.initialize(getApplicationContext());     <span class="comment">// 初始化地图SDK，需要在setContentView()方法之前使用</span></span><br><span class="line"></span><br><span class="line">        setContentView(R.layout.activity_my_map);</span><br><span class="line">        ButterKnife.bind(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        baiduMap = mapview.getMap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnClick</span>(&#123;R.id.btn_normal, R.id.btn_satellite, R.id.btn_none, R.id.btn_traffic_map, R.id.btn_heat_map&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewClicked</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (view.getId()) &#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_normal:</span><br><span class="line">                <span class="comment">// 普通地图</span></span><br><span class="line">                baiduMap.setMapType(BaiduMap.MAP_TYPE_NORMAL);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_satellite:</span><br><span class="line">                <span class="comment">// 卫星地图</span></span><br><span class="line">                baiduMap.setMapType(BaiduMap.MAP_TYPE_SATELLITE);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_none:</span><br><span class="line">                <span class="comment">// 空白图，一般与瓦片图层一起使用</span></span><br><span class="line">                baiduMap.setMapType(BaiduMap.MAP_TYPE_NONE);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_traffic_map:</span><br><span class="line">                <span class="comment">// 路况图</span></span><br><span class="line">                baiduMap.setTrafficEnabled(trafficEnabled);</span><br><span class="line">                <span class="keyword">if</span> (trafficEnabled == <span class="keyword">true</span>)&#123;</span><br><span class="line">                    btnTrafficMap.setText(<span class="string">"路况图：开启状态"</span>);</span><br><span class="line">                    trafficEnabled = <span class="keyword">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    btnTrafficMap.setText(<span class="string">"路况图：关闭状态"</span>);</span><br><span class="line">                    trafficEnabled = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_heat_map:</span><br><span class="line">                <span class="comment">// 热力图</span></span><br><span class="line">                baiduMap.setBaiduHeatMapEnabled(heatMapEnabled);</span><br><span class="line">                <span class="keyword">if</span> (heatMapEnabled == <span class="keyword">true</span>)&#123;</span><br><span class="line">                    btnHeatMap.setText(<span class="string">"热力图：开启状态"</span>);</span><br><span class="line">                    heatMapEnabled = <span class="keyword">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    btnHeatMap.setText(<span class="string">"热力图：关闭状态"</span>);</span><br><span class="line">                    heatMapEnabled = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        mapview.onResume();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        mapview.onPause();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        mapview.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在地图中显示定位"><a href="#在地图中显示定位" class="headerlink" title="在地图中显示定位"></a>在地图中显示定位</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/12/Android技术——LBS/" data-id="cjy01ancs0053osutupqzs7kz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动端/">移动端</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          《第一行代码_Android》第12章_最佳的UI体验
        
      </div>
    </a>
  
  
    <a href="/2018/11/10/Android技术——JSON/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Android技术——JSON</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BOM/">BOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECharts/">ECharts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EcamScript6/">EcamScript6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Html-Css/">Html/Css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/">Node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/浏览器兼容/">浏览器兼容</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动端/">移动端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件配置/">软件配置</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 19px;">Android</a> <a href="/tags/BOM/" style="font-size: 10px;">BOM</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/tags/ECharts/" style="font-size: 10px;">ECharts</a> <a href="/tags/EcamScript6/" style="font-size: 10px;">EcamScript6</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Html-Css/" style="font-size: 11px;">Html/Css</a> <a href="/tags/JavaScript/" style="font-size: 17px;">JavaScript</a> <a href="/tags/Node/" style="font-size: 14px;">Node</a> <a href="/tags/Python/" style="font-size: 16px;">Python</a> <a href="/tags/Vue/" style="font-size: 14px;">Vue</a> <a href="/tags/blog/" style="font-size: 11px;">blog</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/tool/" style="font-size: 10px;">tool</a> <a href="/tags/前端/" style="font-size: 18px;">前端</a> <a href="/tags/后端/" style="font-size: 13px;">后端</a> <a href="/tags/小程序/" style="font-size: 10px;">小程序</a> <a href="/tags/数据库/" style="font-size: 12px;">数据库</a> <a href="/tags/服务器/" style="font-size: 10px;">服务器</a> <a href="/tags/框架/" style="font-size: 15px;">框架</a> <a href="/tags/浏览器兼容/" style="font-size: 10px;">浏览器兼容</a> <a href="/tags/移动端/" style="font-size: 20px;">移动端</a> <a href="/tags/软件配置/" style="font-size: 10px;">软件配置</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/01/前端-JavaScript基础-EcamScript6/">前端-JavaScript基础-二刷ES</a>
          </li>
        
          <li>
            <a href="/2019/07/12/前端-CSS预处理器/">前端-CSS预处理器</a>
          </li>
        
          <li>
            <a href="/2019/05/22/阿里云服务器配置/">阿里云服务器配置</a>
          </li>
        
          <li>
            <a href="/2019/04/25/框架-Vuex/">框架-Vuex</a>
          </li>
        
          <li>
            <a href="/2019/04/11/框架-全栈开发/">Vue+Node+Mongodb全栈开发</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Ai Junhao<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>