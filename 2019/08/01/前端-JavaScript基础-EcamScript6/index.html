<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>前端-JavaScript基础-二刷ES6 | Hello, I&#39;m Junhao Ai.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言 学习资料 ES 版本   ES5 基础 严格模式 JSON 对象 Object 拓展 Object.create() Object.defineProperties()   数组拓展 Function 拓展   ES6 let、var、const let 作用 特点 应用 const   变量的解构赋值 普通赋值 数组的解构赋值 默认值 对象的解构赋值 数组与对象   字符串的解构赋值">
<meta name="keywords" content="JavaScript,前端,EcamScript6">
<meta property="og:type" content="article">
<meta property="og:title" content="前端-JavaScript基础-二刷ES6">
<meta property="og:url" content="http://yoursite.com/2019/08/01/前端-JavaScript基础-EcamScript6/index.html">
<meta property="og:site_name" content="Hello, I&#39;m Junhao Ai.">
<meta property="og:description" content="前言 学习资料 ES 版本   ES5 基础 严格模式 JSON 对象 Object 拓展 Object.create() Object.defineProperties()   数组拓展 Function 拓展   ES6 let、var、const let 作用 特点 应用 const   变量的解构赋值 普通赋值 数组的解构赋值 默认值 对象的解构赋值 数组与对象   字符串的解构赋值">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2019/08/01/前端-JavaScript基础-EcamScript6/Object.JPG">
<meta property="og:image" content="http://yoursite.com/2019/08/01/前端-JavaScript基础-EcamScript6/Object.defineProperties.JPG">
<meta property="og:image" content="http://yoursite.com/2019/08/01/前端-JavaScript基础-EcamScript6/call.JPG">
<meta property="og:image" content="http://yoursite.com/2019/08/01/前端-JavaScript基础-EcamScript6/Promise.jpg">
<meta property="og:updated_time" content="2019-08-15T11:17:19.378Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端-JavaScript基础-二刷ES6">
<meta name="twitter:description" content="前言 学习资料 ES 版本   ES5 基础 严格模式 JSON 对象 Object 拓展 Object.create() Object.defineProperties()   数组拓展 Function 拓展   ES6 let、var、const let 作用 特点 应用 const   变量的解构赋值 普通赋值 数组的解构赋值 默认值 对象的解构赋值 数组与对象   字符串的解构赋值">
<meta name="twitter:image" content="http://yoursite.com/2019/08/01/前端-JavaScript基础-EcamScript6/Object.JPG">
  
    <link rel="alternate" href="/atom.xml" title="Hello, I&#39;m Junhao Ai." type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hello, I&#39;m Junhao Ai.</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-前端-JavaScript基础-EcamScript6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/01/前端-JavaScript基础-EcamScript6/" class="article-date">
  <time datetime="2019-08-01T08:59:13.000Z" itemprop="datePublished">2019-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      前端-JavaScript基础-二刷ES6
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- TOC -->
<ul>
<li><a href="#前言">前言</a><ul>
<li><a href="#学习资料">学习资料</a></li>
<li><a href="#es-版本">ES 版本</a></li>
</ul>
</li>
<li><a href="#es5-基础">ES5 基础</a><ul>
<li><a href="#严格模式">严格模式</a></li>
<li><a href="#json-对象">JSON 对象</a></li>
<li><a href="#object-拓展">Object 拓展</a><ul>
<li><a href="#objectcreate">Object.create()</a></li>
<li><a href="#objectdefineproperties">Object.defineProperties()</a></li>
</ul>
</li>
<li><a href="#数组拓展">数组拓展</a></li>
<li><a href="#function-拓展">Function 拓展</a></li>
</ul>
</li>
<li><a href="#es6">ES6</a><ul>
<li><a href="#letvarconst">let、var、const</a><ul>
<li><a href="#let-作用">let 作用</a></li>
<li><a href="#特点">特点</a></li>
<li><a href="#应用">应用</a></li>
<li><a href="#const">const</a></li>
</ul>
</li>
<li><a href="#变量的解构赋值">变量的解构赋值</a><ul>
<li><a href="#普通赋值">普通赋值</a></li>
<li><a href="#数组的解构赋值">数组的解构赋值</a></li>
<li><a href="#默认值">默认值</a></li>
<li><a href="#对象的解构赋值">对象的解构赋值</a><ul>
<li><a href="#数组与对象">数组与对象</a></li>
</ul>
</li>
<li><a href="#字符串的解构赋值">字符串的解构赋值</a></li>
<li><a href="#函数参数的解构赋值">函数参数的解构赋值</a></li>
</ul>
</li>
<li><a href="#promise-异步操作">Promise 异步操作</a><ul>
<li><a href="#callback-hell-回调地狱">callback hell 回调地狱</a></li>
<li><a href="#promise-对象">Promise 对象</a><ul>
<li><a href="#promise-状态">Promise 状态</a></li>
<li><a href="#then-方法">then() 方法</a></li>
<li><a href="#案例nodejs-中-promise-读取文件数据">案例：Node.js 中 Promise 读取文件数据</a></li>
<li><a href="#案例前端请求数据时的-promise">案例：前端请求数据时的 Promise</a></li>
<li><a href="#案例nodejs-调用-mongoose-时的-promise">案例：Node.js 调用 Mongoose 时的 promise</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h3><p>阮一峰 <code>ES6</code> 教材：<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">http://es6.ruanyifeng.com/</a></p>
<p>尚硅谷 <code>ES</code> 视频教程：<a href="http://www.atguigu.com/" target="_blank" rel="noopener">http://www.atguigu.com/</a></p>
<p>个人建议是两者都要看，并且将 <code>ES5</code> 也过一遍，阅读阮一峰的教材需要一定的基础，并且书本理解起来有些困难，尚硅谷的视频讲得比较详细，侧重基础，两者一起看会比较容易理解。 </p>
<h3 id="ES-版本"><a href="#ES-版本" class="headerlink" title="ES 版本"></a>ES 版本</h3><p><code>ES5</code> ：09年发布</p>
<p><code>ES6</code> ：15年发布，又称 <code>ES2015</code> ，主流 <code>ES</code>。</p>
<p><code>ES7</code> ：16年发布，新增内容主要是草案，尚未纳入正式 <code>ES</code> 标准，以及 <code>ES8</code> 也是，所以，重点是 <code>ES6</code> 。</p>
<hr>
<h2 id="ES5-基础"><a href="#ES5-基础" class="headerlink" title="ES5 基础"></a>ES5 基础</h2><h3 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h3><ol>
<li><p>理解:</p>
<p> 除了正常运行模式(混杂模式)，ES5 添加了第二种运行模式：”严格模式”（strict mode）。</p>
<p> 顾名思义，这种模式使得 Javascript 在更严格的语法条件下运行</p>
</li>
<li><p>目的/作用</p>
<p> 消除 Javascript 语法的一些不合理、不严谨之处，减少一些怪异行为</p>
<p> 消除代码运行的一些不安全之处，为代码的安全运行保驾护航</p>
<p> 为未来新版本的 Javascript 做好铺垫</p>
</li>
<li><p>使用</p>
<p> 在全局或函数的第一条语句定义为: ‘use strict’;</p>
<p> 如果浏览器不支持, 只解析为一条简单的语句, 没有任何副作用</p>
</li>
<li><p>语法和行为改变</p>
<p> 必须用 var 声明变量</p>
<p> 禁止自定义的函数中的 this 指向 window</p>
<p> 创建 eval 作用域</p>
<p> 对象不能有重名的属性</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  // 开启严格模式</span></span><br><span class="line"><span class="undefined">  'use strict'</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">  // 不使用 var 声明变量，严格模式报错，在未开启严格模式时，会自动上升为全局变量</span></span><br><span class="line"><span class="undefined">  username = 'kobe'</span></span><br><span class="line"><span class="undefined">  // 正确的声明变量</span></span><br><span class="line"><span class="undefined">  var username = 'kobe'</span></span><br><span class="line"><span class="undefined">  console.log(username)</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">  // 定义一个构造函数</span></span><br><span class="line"><span class="undefined">  function Person(name, age) &#123;</span></span><br><span class="line"><span class="undefined">    this.name = name</span></span><br><span class="line"><span class="undefined">    this.age = age</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="undefined">  // 自调用时，this 指向 window, 严格模式报错</span></span><br><span class="line"><span class="undefined">  Person('kobe', 39)</span></span><br><span class="line"><span class="undefined">  // 正确写法</span></span><br><span class="line"><span class="undefined">  new Person('kobe', 39)</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">  // eval() 字符串解析函数，未开启严格模式时，eval 没有私有作用域，str 始终指向外部的 str</span></span><br><span class="line"><span class="undefined">  var str = 'NBA'</span></span><br><span class="line"><span class="undefined">  eval('var str = "CBA"; alert(str)')</span></span><br><span class="line"><span class="undefined">  alert(str)	// 严格模式：NBA，未开启严格模式：CBA</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="JSON-对象"><a href="#JSON-对象" class="headerlink" title="JSON 对象"></a>JSON 对象</h3><ol>
<li><p>JSON.stringify(obj/arr)：js 对象(数组)转换为 json 对象(数组)</p>
</li>
<li><p>JSON.parse(json)：json 对象(数组)转换为 js 对象(数组)</p>
</li>
</ol>
<h3 id="Object-拓展"><a href="#Object-拓展" class="headerlink" title="Object 拓展"></a>Object 拓展</h3><p><em>ES5给Object扩展了一些静态方法, 常用的 2 个:</em></p>
<h4 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h4><p>Object.create(prototype, [descriptors])</p>
<p>  *<em> 作用: 以指定对象为原型创建新的对象</em></p>
<p>  *<em> 为新的对象指定新的属性, 并对属性进行描述</em></p>
<p>​    <em>- value : 指定值</em></p>
<p>​    <em>- writable : 标识当前属性值是否是可修改的, 默认为 false</em></p>
<p>​    <em>- configurable: 标识当前属性是否可以被删除 默认为 false</em></p>
<p>​    <em>- enumerable：标识当前属性是否能用 for in 枚举 默认为 false</em></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 创建对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  var obj = &#123; usernam: 'demo', age: 30 &#125;</span></span><br><span class="line"><span class="undefined">  var obj1 = &#123;&#125;</span></span><br><span class="line"><span class="undefined">  // 以 obj 为原型-创建对象</span></span><br><span class="line"><span class="undefined">  obj1 = Object.create(obj)</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">  // obj1 = Object.create(obj, , &#123;</span></span><br><span class="line"><span class="undefined">  //   gender: &#123;</span></span><br><span class="line"><span class="undefined">  //     value: '男'</span></span><br><span class="line"><span class="undefined">  //   &#125;</span></span><br><span class="line"><span class="undefined">  // &#125;)</span></span><br><span class="line"><span class="undefined">  console.log(obj1)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	新建的对象为空，展开后可以见到 '__proto__' 属性，这是用来读取或设置当前对象的 prototype 对象，ES6 规定，这个属性只在浏览器上必须部署，其他环境不需要且最好不要。</span></span><br><span class="line"><span class="comment">	ES6 建议使用 Object.setPrototypeOf()（写操作）、Object.getPrototypeOf()（读操作）或Object.create()（生成操作）代替 '__proto__' 属性。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/08/01/前端-JavaScript基础-EcamScript6/Object.JPG" alt="Object.JPG"></p>
<h4 id="Object-defineProperties"><a href="#Object-defineProperties" class="headerlink" title="Object.defineProperties()"></a>Object.defineProperties()</h4><p>Object.defineProperties(object, descriptors)</p>
<p>​    *<em> 作用 : 为指定对象定义扩展多个属性</em></p>
<p>​    *<em> get ：用来获取当前属性值得回调函数</em></p>
<p>​    *<em> set ：修改当前属性值得触发的回调函数，并且实参即为修改后的值</em></p>
<p>​    *<em> 存取器属性：setter, getter一个用来存值，一个用来取值</em></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加 存取器 属性 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  var obj = &#123; firstName: 'kobe', lastName: 'bryant' &#125;</span></span><br><span class="line"><span class="undefined">  Object.defineProperties(obj, &#123;</span></span><br><span class="line"><span class="undefined">    fullName: &#123;</span></span><br><span class="line"><span class="undefined">      // 获取拓展属性的值，获取拓展属性值的时候 get 方法自动调用</span></span><br><span class="line"><span class="undefined">      get() &#123;</span></span><br><span class="line"><span class="undefined">        console.log('get调用')</span></span><br><span class="line"><span class="undefined">        return this.firstName + ' ' + this.lastName</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      // 监听拓展属性，当拓展属性发生变化时自动调用，会将变化的值作为实参传入到 set 函数</span></span><br><span class="line"><span class="undefined">      set(data) &#123;</span></span><br><span class="line"><span class="undefined">        console.log('set调用')</span></span><br><span class="line"><span class="undefined">        var name = data.split(' ')</span></span><br><span class="line"><span class="undefined">        this.firstName = name[0]</span></span><br><span class="line"><span class="undefined">        this.lastName = name[1]</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined">  // 调用拓展属性 fullName, 此时 get() 方法调用</span></span><br><span class="line"><span class="undefined">  console.log(obj.fullName)</span></span><br><span class="line"><span class="undefined">  // 给拓展属性赋值，调用 set() 方法</span></span><br><span class="line"><span class="undefined">  obj.fullName = 'tim duncan'</span></span><br><span class="line"><span class="undefined">  console.log(obj)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	使用 Object.defineProperties() 来拓展 obj 的 fullName 属性，get() 存在惰性，只要在需要调用的时候才执行。</span></span><br><span class="line"><span class="comment">	这个新添加的存取器属性如下图，不会出现在对象属性中，并且展开对象后显示省略号，点击省略号后才显示，这也是因为惰性。</span></span><br><span class="line"><span class="comment">	同时，还有一点就是，添加了拓展属性后，出现了 get fullName() &#123;&#125; 和 set fullName(data) &#123;&#125; 这两个方法，添加存取器属性的本质就是调用了这两个方法。代码如下。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  var obj = &#123; </span></span><br><span class="line"><span class="undefined">    firstName: 'kobe', </span></span><br><span class="line"><span class="undefined">    lastName: 'bryant',</span></span><br><span class="line"><span class="undefined">    // 获取拓展属性的值，获取拓展属性值的时候 get 方法自动调用</span></span><br><span class="line"><span class="undefined">    get fullName() &#123;</span></span><br><span class="line"><span class="undefined">      console.log('get调用')</span></span><br><span class="line"><span class="undefined">      return this.firstName + ' ' + this.lastName</span></span><br><span class="line"><span class="undefined">    &#125;,  </span></span><br><span class="line"><span class="undefined">    // 监听拓展属性，当拓展属性发生变化时自动调用，会将变化的值作为实参传入到 set 函数</span></span><br><span class="line"><span class="undefined">    set fullName(data) &#123;</span></span><br><span class="line"><span class="undefined">      console.log('set调用')</span></span><br><span class="line"><span class="undefined">      var name = data.split(' ')</span></span><br><span class="line"><span class="undefined">      this.firstName = name[0]</span></span><br><span class="line"><span class="undefined">      this.lastName = name[1]</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  console.log(obj.fullName)</span></span><br><span class="line"><span class="undefined">  obj.fullName = 'tim duncan'</span></span><br><span class="line"><span class="undefined">  console.log(obj)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/08/01/前端-JavaScript基础-EcamScript6/Object.defineProperties.JPG" alt="Object.defineProperties.JPG"></p>
<p>Object.defineProperties() 也可以像 Object.create() 一样使用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  var obj = &#123; firstName: 'kobe', lastName: 'bryant' &#125;</span></span><br><span class="line"><span class="undefined">  Object.defineProperties(obj, &#123;</span></span><br><span class="line"><span class="undefined">    fullName: &#123;</span></span><br><span class="line"><span class="undefined">      value: 'test'</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined">  obj.fullName = 'tim duncan'	// 无法修改</span></span><br><span class="line"><span class="undefined">  console.log(obj)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="数组拓展"><a href="#数组拓展" class="headerlink" title="数组拓展"></a>数组拓展</h3><p><em>1. Array.prototype.indexOf(value) : 得到值在数组中的第一个下标</em></p>
<p><em>2. Array.prototype.lastIndexOf(value) : 得到值在数组中的最后一个下标</em></p>
<p><em>3. Array.prototype.forEach(function(item, index){}) : 遍历数组</em></p>
<p><em>4. Array.prototype.map(function(item, index){}) : 遍历数组返回一个新的数组，返回加工之后的值</em></p>
<p><em>5. Array.prototype.filter(function(item, index){}) : 遍历过滤出一个新的子数组， 返回条件为true的值</em></p>
<h3 id="Function-拓展"><a href="#Function-拓展" class="headerlink" title="Function 拓展"></a>Function 拓展</h3><p><em>1. Function.prototype.bind(obj) :</em></p>
<p>  *<em> 作用 : 将函数内的 this绑定为 obj , 并将函数返回</em></p>
<p><em>2. 面试题 : 区别 bind() 与 call() 和 apply()? </em></p>
<p>  *<em> 都能指定函数中的 this</em></p>
<p>  *<em> call() / apply() 是立即调用函数</em></p>
<p>  *<em> bind() 是将函数返回，传参方式与 call() 一样，常用于回调函数的 this 绑定</em></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 当一个函数被保存为对象的一个方法时，如果调用表达式包含一个提取属性的动作，那么它就是被当做一个方法来调用，此时的this被绑定到这个对象。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  var obj = &#123; </span></span><br><span class="line"><span class="undefined">    username: 'kobe',</span></span><br><span class="line"><span class="undefined">    a: function(data) &#123;</span></span><br><span class="line"><span class="undefined">      console.log(this.username, data)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  function foo(data) &#123;</span></span><br><span class="line"><span class="undefined">    console.log(this, data)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  // 一般调用对象中的方法</span></span><br><span class="line"><span class="undefined">  obj.a()</span></span><br><span class="line"><span class="undefined">  // 将 a 方法绑定 obj 这个对象，这样 a 方法就能用 this 调用 obj 中的属性</span></span><br><span class="line"><span class="undefined">  obj.a.call(obj, 123)</span></span><br><span class="line"><span class="undefined">  obj.a.apply(obj, [123])</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  foo.call(obj, 123)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  // 返回一个函数，没有调用，可以使用变量来接收</span></span><br><span class="line"><span class="undefined">  foo.bind(obj, 456)</span></span><br><span class="line"><span class="undefined">  // 返回后直接调用</span></span><br><span class="line"><span class="undefined">  foo.bind(obj, 456)()</span></span><br><span class="line"><span class="undefined">  // 修改回调函数的 this 绑定，原本 setTimeOut 的 this 是 window ，使用 bind 修改成 obj</span></span><br><span class="line"><span class="undefined">  setTimeout(function()&#123;</span></span><br><span class="line"><span class="undefined">    console.log(this)</span></span><br><span class="line"><span class="undefined">  &#125;.bind(obj), 1000)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/08/01/前端-JavaScript基础-EcamScript6/call.JPG" alt="call.JPG"></p>
<h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><h3 id="let、var、const"><a href="#let、var、const" class="headerlink" title="let、var、const"></a>let、var、const</h3><h4 id="let-作用"><a href="#let-作用" class="headerlink" title="let 作用"></a>let 作用</h4><p>与var类似, 用于声明一个变量</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ol>
<li><p>不会预处理, 不存在提升</p>
<p> <strong>变量提升与预处理</strong>：js和其他语言一样，都要经历编译和执行阶段。而 js 在编译阶段（预处理）的时候，会搜集所有的 <code>变量声明</code> 和 <code>函数声明</code> 并且<strong>将声明提升到全局顶部</strong>（没有定义），当出现同名声明冲突时，函数将覆盖变量，而其他的语句都不会改变他们的顺序。</p>
<p> <code>var</code> 声明的变量会出现变量提升，而 <code>let</code> 不可以。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let</span></span><br><span class="line"><span class="built_in">console</span>.log(a)		<span class="comment">// ReferenceError 引用错误</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var</span></span><br><span class="line"><span class="built_in">console</span>.log(b)		<span class="comment">// undefined 未定义</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var 的预处理代码</span></span><br><span class="line"><span class="keyword">var</span> b</span><br><span class="line"><span class="built_in">console</span>.log(b)</span><br><span class="line">b = <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>不能重复声明</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var 重复声明 a，不报错</span></span><br><span class="line"><span class="keyword">var</span> a</span><br><span class="line"><span class="keyword">var</span> a </span><br><span class="line"></span><br><span class="line"><span class="comment">// let 重复声明 b，第二个 b 会报错</span></span><br><span class="line"><span class="keyword">let</span> b </span><br><span class="line"><span class="keyword">let</span> b	<span class="comment">// Identifier 'b' has already been declared</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在块作用域内有效</p>
<p> 块级作用域与其他语言中的作用域类似。</p>
<p> 在 <code>ES5</code> 中规定，函数只能在顶层作用域和函数作用域中声明，不能在块级作用域中声明。</p>
<p> <code>ES6</code> 明确允许在块级作用域中声明函数，声明语句的行为类似于 <code>let</code>。</p>
 <font color="red">但是不建议在块级作用域中声明函数，因环境问题，容易报错，建议使用函数表达式的形式。</font>

 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b </span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><ol>
<li>循环遍历加监听</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用 var 变量遍历</span></span><br><span class="line"><span class="keyword">var</span> a = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)</span><br><span class="line">  a[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>]()		<span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上代码中，var 声明的 i 在全局有效，也就是说全局作用域中只有唯一一个 i ，函数表达式中的输出 i 都指向全局，而函数是在调用时候执行，for 循环之后，全局 i 变成 10，a[0]() 调用就是 10。至于 a[i] 中的 i 为什么不是 10？因为这个 i 和全局的 i 是同步变化的。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用 let 变量遍历</span></span><br><span class="line"><span class="keyword">var</span> a = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)</span><br><span class="line">  a[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">a[<span class="number">6</span>]()		<span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上代码中，let 声明的 i 在只在当前一轮的 for 循环中有效，也就是说共有 10 个 i 在 10 个不同的循环作用域中，函数表达式中的输出 i 都指向当前作用域中声明的 i 。</span></span><br><span class="line"><span class="comment">// 注意：理论上说，每一轮重新声明的 i 都应该是 0 ！！！但是在 JS 引擎内部会记住上一轮循环的值，初始化本轮的变量 i 时，就在上一轮的基础上进行的。</span></span><br></pre></td></tr></table></figure>
<h4 id="const"><a href="#const" class="headerlink" title="const"></a>const</h4><p><code>const</code> 变量，指的是变量指向的内存地址不变，而不是地址中存储的内容不变。其他的基本同 <code>let</code> 。</p>
<p>对于简单数据类型数据（Number、String、Boolean）来说，其内容存储在地址中，等同于常量；而对于对象数组等复杂数据类型，地址中只保存了实际数据的地址指针，<code>const</code> 也只能保证这个指针不变。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = &#123;&#125;</span><br><span class="line">foo.a = <span class="number">123</span>			<span class="comment">// 正确</span></span><br><span class="line">foo.b = <span class="number">456</span>			<span class="comment">// 正确</span></span><br><span class="line"><span class="built_in">console</span>.log(foo)	<span class="comment">// &#123;a: 123, b: 456&#125;</span></span><br><span class="line"></span><br><span class="line">foo = &#123; <span class="attr">c</span>: <span class="number">789</span> &#125;	<span class="comment">// 错误，指向另一个对象了</span></span><br></pre></td></tr></table></figure>
<p>如果需要让对象也是常量，可以用以下方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 冻结对象常量方法</span></span><br><span class="line"><span class="keyword">var</span> constantize = <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 冻结当前对象</span></span><br><span class="line">  <span class="built_in">Object</span>.freeze(obj);</span><br><span class="line">  <span class="comment">// 遍历并冻结对象类型的属性</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).forEach(<span class="function">(<span class="params">key, i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] === <span class="string">'object'</span>) &#123;</span><br><span class="line">      constantize( obj[key] )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明并初始化对象常量</span></span><br><span class="line"><span class="keyword">const</span> foo = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="comment">// 冻结 foo 常量</span></span><br><span class="line">constantize(foo)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加属性，不起作用，严格模式下报错</span></span><br><span class="line">foo.b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo)    <span class="comment">// &#123; a: 1 &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="变量的解构赋值"><a href="#变量的解构赋值" class="headerlink" title="变量的解构赋值"></a>变量的解构赋值</h3><p>解构赋值，顾名思义就是解析数组或对象结构并给变量赋值。</p>
<p>解构赋值需要按照一定的模式进行，是一种”模式匹配“，其规则是，只要等号右侧的值不是对象或者数组，就先转为对象，然后根据解构赋值机制进行赋值。<code>undefined</code> 和 <code>null</code> 无法转化成对象，不能进行解构赋值。</p>
<h4 id="普通赋值"><a href="#普通赋值" class="headerlink" title="普通赋值"></a>普通赋值</h4><p>如下，就是等号左边变量，等号右边值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(a)		<span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>解构赋值就是在这基础上完成的。</p>
<p>如果解构不成功，即左侧某个位置有变量，右侧对应位置没有值，则该变量为 <code>undefined</code> 。</p>
<p>如果不完全解构，即右侧某个位置有值，左侧对应位置没有声明变量，则该项不赋值。</p>
<h4 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h4><p>数组的解构赋值，等号右边是数组，左边也要是数组，按位置赋值。</p>
<ol>
<li>给变量赋值。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构赋值，结构数组 [1, 2, 3]，给左边数组对应位上的变量赋值</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c, d] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c, d)		<span class="comment">// 1 2 3 undefined</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>给数组赋值。</p>
<p> 需要使用 <code>...</code> 拓展运算法，并且拓展运算符只能写在最后一项变量中，并且只能给一个数组赋值，因为目标数组长度无法确定。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [...a] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a)		<span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [b, ...c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(b, c)	<span class="comment">// 1 [2, 3]</span></span><br></pre></td></tr></table></figure>
<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><p>解构赋值允许存在默认值，都是使用赋值符号表示，这里用数据解构来演示。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = []</span><br><span class="line"><span class="built_in">console</span>.log(foo)	<span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><code>ES6</code> 内部使用严格相等运算符（===）判断一个位置是否有值，只有严格等于 <code>undefined</code> ，默认值才能生效。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对应为使用 undefined 。</span></span><br><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = [<span class="literal">undefined</span>]</span><br><span class="line"><span class="built_in">console</span>.log(foo)	<span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对应为使用 'undefined' 字符串。</span></span><br><span class="line"><span class="keyword">let</span> [foo2 = <span class="literal">true</span>] = [<span class="string">'undefined'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> foo2, foo2)	<span class="comment">// string undefined</span></span><br></pre></td></tr></table></figure>
<p>默认值也可以引用解构赋值中已声明的变量（就是顺序在该变量之前），并且随着该变量的变化而变化。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = []		<span class="comment">// x = 1, y = 1</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [<span class="number">2</span>]	<span class="comment">// x = 2, y = 2</span></span><br><span class="line"><span class="keyword">let</span> [x = y, y = <span class="number">1</span>] = []		<span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure>
<h4 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h4><p>对象的解构赋值，等号右边是对象，左边也要是对象，按属性名赋值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#123; 对象属性名: 变量 &#125; 冒号左右侧相同时可以缩写为一个。</span></span><br><span class="line"><span class="comment">// 对象的解构赋值机制是先找到同名属性，然后赋值给对应的变量，被赋值这是冒号右侧的变量。</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: foo, <span class="attr">bar</span>: bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span> &#125;</span><br><span class="line"><span class="comment">// 简写</span></span><br><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span> &#125;</span><br><span class="line">foo		<span class="comment">// 'aaa'</span></span><br><span class="line">bar 	<span class="comment">// 'bbb'</span></span><br></pre></td></tr></table></figure>
<h5 id="数组与对象"><a href="#数组与对象" class="headerlink" title="数组与对象"></a>数组与对象</h5><p>因为数组的本质是特殊的对象，所以可以将数组解构为对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="number">0</span>: first, <span class="number">1</span>: secode &#125; = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="built_in">console</span>.log(first, secode)</span><br></pre></td></tr></table></figure>
<h4 id="字符串的解构赋值"><a href="#字符串的解构赋值" class="headerlink" title="字符串的解构赋值"></a>字符串的解构赋值</h4><p>字符串被解构时被转换成一个类似数组的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c, d, e] = <span class="string">'hello'</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">length</span>: len &#125; = <span class="string">'hello'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a, b, c, d, e)		<span class="comment">// h e l l o</span></span><br><span class="line"><span class="built_in">console</span>.log(len)				<span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h4 id="函数参数的解构赋值"><a href="#函数参数的解构赋值" class="headerlink" title="函数参数的解构赋值"></a>函数参数的解构赋值</h4><p>如下，函数参数是一个数组的时候，传入参数后就被解构成变量 <code>x</code>  和 <code>y</code> 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[x, y]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add([<span class="number">1</span>, <span class="number">2</span>]))</span><br></pre></td></tr></table></figure>
<p>函数参数的解构赋值中，有一点需要特别注意，就是函数参数的默认值和解构默认值。<font color="red">只要抓住解构赋值使用 “ = ” 进行设置默认值就行。</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构赋值的默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">&#123; x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">move(&#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;)     <span class="comment">// [3，8]</span></span><br><span class="line">move(&#123; <span class="attr">x</span>: <span class="number">3</span> &#125;)          <span class="comment">// [3，0]</span></span><br><span class="line">move(&#123;&#125;)                <span class="comment">// [0, 0]</span></span><br><span class="line">move()                  <span class="comment">// [0, 0]</span></span><br><span class="line"><span class="comment">// 函数参数的默认值是空对象 &#123;&#125;，解构赋值的默认值 x = 0, y = 0，当解构失败时候使用默认值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数参数的默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">&#123; x, y&#125; = &#123; x: <span class="number">0</span>, y: <span class="number">0</span>&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">move(&#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;)     <span class="comment">// [3，8]</span></span><br><span class="line">move(&#123; <span class="attr">x</span>: <span class="number">3</span> &#125;)          <span class="comment">// [3，undefined]</span></span><br><span class="line">move(&#123;&#125;)                <span class="comment">// [undefined, undefined]</span></span><br><span class="line">move()                  <span class="comment">// [undefined, undefined]</span></span><br><span class="line"><span class="comment">// 函数参数的默认值是 &#123; x: 0, y: 0&#125;，解构赋值 x, y 没有默认值，当且仅当调用函数没有传入参数时才取到函数默认值</span></span><br></pre></td></tr></table></figure>
<h4 id="解构赋值的圆括号问题"><a href="#解构赋值的圆括号问题" class="headerlink" title="解构赋值的圆括号问题"></a>解构赋值的圆括号问题</h4><p>在解构赋值中不建议使用圆括号，容易导致解构歧义。</p>
<p>不能使用圆括号的情况：</p>
<ol>
<li><p>变量声明语句。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [(a)] = [<span class="number">1</span>]		<span class="comment">// 报错，这个语句包括了声明和赋值，声明部分报错</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数参数。</p>
<p> 函数参数也属于变量声明，因此不能使用圆括号。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">[(x</span>)])	// 看着就容易出问题…</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>赋值语句的模式。</p>
<p> 之前说解构赋值是 “模式匹配” ，需要等号两边模式相同（数组、对象）才能正常执行，一旦模式部分出现了圆括号，就容易出错。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(&#123; <span class="attr">p</span>: a &#125;) = &#123; <span class="attr">p</span>: <span class="number">42</span> &#125;		<span class="comment">// 模式不匹配， () = &#123;&#125; 错误</span></span><br><span class="line">[(&#123; <span class="attr">p</span>: a &#125;), &#123; <span class="attr">x</span>: c &#125;] = [&#123;&#125;, &#123;&#125;]		<span class="comment">// 模式不匹配， () = &#123;&#125; 错误</span></span><br><span class="line"></span><br><span class="line">[(b)] = [<span class="number">3</span>]		<span class="comment">// 正确，模式是取数组的第一个成员，与圆括号无关，但是最好不要这样用！！！</span></span><br><span class="line">(&#123; <span class="attr">p</span>: (b) &#125; = &#123;&#125;)		<span class="comment">// 正确</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="解构赋值的用途"><a href="#解构赋值的用途" class="headerlink" title="解构赋值的用途"></a>解构赋值的用途</h4><ol>
<li><p>交换变量的值。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">[x, y] = [y, x]		<span class="comment">// 简化了使用第三中间变量的步奏，简洁易懂</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>从函数返回多个值。</p>
<p> 传统的函数中，只能返回一个值，或者是一个数组、对象。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = example()		<span class="comment">// 返回值是一个数组，利用解构赋值变成一堆单独的变量</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数参数的定义。</p>
<p> 可以设置函数参数形式以及是否有默认值。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">[x, y, z]</span>) </span>&#123; ... &#125;</span><br><span class="line">f([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])		<span class="comment">// 参数是一个有序的数组</span></span><br><span class="line">                       </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123; x, y, z &#125;</span>) </span>&#123; ... &#125;</span><br><span class="line">f(&#123; <span class="attr">z</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;)		<span class="comment">// 参数是无序的数组</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>提取 JSON 数据</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = &#123;</span><br><span class="line">    id: <span class="number">1</span>,</span><br><span class="line">    status: <span class="string">"OK"</span>,</span><br><span class="line">    data: [<span class="number">123</span>, <span class="number">456</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; id, status, <span class="attr">data</span>: number &#125; = jsonData</span><br><span class="line"></span><br><span class="line">id		<span class="comment">// 1</span></span><br><span class="line">status	<span class="comment">// "OK"</span></span><br><span class="line">number	<span class="comment">// [123, 456]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>遍历有 <code>Iterator</code> 接口的对象。</p>
</li>
<li>获取模块的指定方法。</li>
</ol>
<h3 id="字符串的拓展"><a href="#字符串的拓展" class="headerlink" title="字符串的拓展"></a>字符串的拓展</h3><h4 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h4><p>使用反引号来代替单引号/双引号。可以当做普通字符串使用，也可以定义多行字符串，或者嵌入变量。</p>
<ol>
<li><p>多行文本</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义多行文本，会保留其格式。所有空格缩进都会被保留。</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`123</span></span><br><span class="line"><span class="string">  456`</span></span><br><span class="line"><span class="built_in">console</span>.log(str)</span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套变量</p>
<p> 变量名需要写在 <code>${}</code> 的大括号中，可以使任意 <code>JS</code> 表达式，支持运算和对象属性。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 $&#123; 变量名 &#125; 来嵌套变量</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'hello'</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`你好，<span class="subst">$&#123;name&#125;</span>`</span>		<span class="comment">// 你好，hello</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">`<span class="subst">$&#123;x&#125;</span> + <span class="subst">$&#123;y&#125;</span> = <span class="subst">$&#123;x + y&#125;</span>`</span>		<span class="comment">// 1 + 2 = 3</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="字符串方法"><a href="#字符串方法" class="headerlink" title="字符串方法"></a>字符串方法</h4><ol>
<li><p>String.includes( str[, start] )</p>
<p> 返回布尔值，表示是否找到参数字符串。第二参数表示开始搜索位置。</p>
</li>
<li><p>String.startsWidth( str[, start])</p>
<p> 返回布尔值，表示参数字符串是否在源字符串的头部。第二参数表示开始搜索位置。</p>
</li>
<li><p>String.endsWidth( str[, start])</p>
<p> 返回布尔值，表示参数字符串是否在源字符串的尾部。第二参数表示开始搜索位置，特殊点是从开始到头部。</p>
</li>
<li><p>String.repeat( n )</p>
<p> 返回一个新字符串，表示将源字符串重复 n 次。小数会被向下取整。</p>
</li>
<li><p>String.padStart( length, str)</p>
<p> 用 str 头部补全目标字符串，默认 str 是空格，如果制定字符串最小长度 length 小于原字符串长度，则返回原字符串。</p>
</li>
<li><p>String.padEnd( length, str)</p>
</li>
</ol>
<h3 id="数值的拓展"><a href="#数值的拓展" class="headerlink" title="数值的拓展"></a>数值的拓展</h3><h4 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h4><p><code>ES6</code> 使用前缀 <code>0b(0B)</code> 表示二进制，<code>0o(0O)</code> 表示八进制。在严格模式下使用前缀 <code>0</code> 表示八进制会报错。</p>
<p>可以使用 <code>Number()</code> 方法将 其他进制转化为十进制。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="string">'0b111'</span>)		<span class="comment">// 7</span></span><br></pre></td></tr></table></figure>
<h4 id="Number-isNaN"><a href="#Number-isNaN" class="headerlink" title="Number.isNaN()"></a>Number.isNaN()</h4><p>检查一个值是否为 <code>NaN</code> 。</p>
<h4 id="Number-parseInt-和-Number-parseFloat"><a href="#Number-parseInt-和-Number-parseFloat" class="headerlink" title="Number.parseInt() 和 Number.parseFloat()"></a>Number.parseInt() 和 Number.parseFloat()</h4><p><code>ES6</code> 将全局方法 <code>parseInt()</code> 和 <code>parseFloat()</code> 移植到 <code>Number</code> 对象上，行为不变，由于 <code>ES</code> 向上兼容，仍然可以使用全局的方法。</p>
<h4 id="Number-isInteger"><a href="#Number-isInteger" class="headerlink" title="Number.isInteger()"></a>Number.isInteger()</h4><p>用来判断一个数是否为整数，在 <code>JS</code> 内部，整数和浮点数是同样的存储方法，所有 3 和 3.0 全等。</p>
<h4 id="Number-EPSILON"><a href="#Number-EPSILON" class="headerlink" title="Number.EPSILON"></a>Number.EPSILON</h4><p>极小常量 <code>2.220446049250313e-16</code> ，使用 <code>toFixed()</code> 方法保留 20 位小数后的值为 <code>0.00000000000000022204</code> 。</p>
<p>极小常量的实质是一个可以接受的误差范围，如果误差小于极小常量，我们就认为得到正确的结果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span>)		<span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0.1</span> + <span class="number">0.2</span>)		<span class="comment">// 0.30000000000000004</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.abs(<span class="number">0.1</span> + <span class="number">0.2</span> - <span class="number">0.3</span>) &lt; <span class="built_in">Number</span>.EPSILON)		<span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>其他的并不常用。</p>
<h3 id="函数的拓展"><a href="#函数的拓展" class="headerlink" title="函数的拓展"></a>函数的拓展</h3><h4 id="函数参数的默认值"><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a>函数参数的默认值</h4><p>在 <code>ES6</code> 之前不能为函数的参数指定默认值，只能采用变通的办法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> y === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    y = y || <span class="string">'hello'</span>;		<span class="comment">// 先判断参数是否被赋值，如果没有再使其等于默认值。</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(x, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体方法见解构赋值。</p>
<p>默认参数只能在参数列表尾部，不然这个参数无法省略。</p>
<h4 id="函数的-length-属性"><a href="#函数的-length-属性" class="headerlink" title="函数的 length 属性"></a>函数的 length 属性</h4><p>函数的 <code>length</code> 属性将返回第一个参数到第一个指定默认值的参数之间的所有参数个数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;&#125;).length		<span class="comment">// 1</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a = <span class="number">1</span></span>) </span>&#123;&#125;).length		<span class="comment">// 0</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a, b = <span class="number">1</span>, c</span>) </span>&#123;&#125;).length		<span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h4 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h4><p>一旦设置了参数的默认值，函数进行声明初始化时，<font color="red">参数会形成一个单独的作用域！！！</font>初始化结束后作用域消失。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>	<span class="comment">// 和函数中的 x 完全无关</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y = x</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(y)</span><br><span class="line">&#125;</span><br><span class="line">f(<span class="number">2</span>)	<span class="comment">// y = 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数 y 的默认值等于变量 x，调用函数，参数 (x, y = x) 形成单独作用域，y 的默认值指向第一个参数 x，而不是全局的 x。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>	<span class="comment">// 如果不存在，报错</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">y = x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">2</span></span><br><span class="line">  <span class="built_in">console</span>.log(y, x)		<span class="comment">// 1 2</span></span><br><span class="line">&#125;</span><br><span class="line">f()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数 y 的默认值等于变量 x，调用函数，参数 (y = x) 形成一个单独的作用域，x 没有声明，参数 x 会指向全局的 x，如果全局 x 未声明，则报错。</span></span><br><span class="line"><span class="comment">// 函数体内部声明的 x 不会影响到参数作用域中的 x，并且因为参数中未声明 x，函数体内的 x 声明不会报错！如果声明 y，则会因为参数中已经声明报错。</span></span><br></pre></td></tr></table></figure>
<h4 id="rest-参数"><a href="#rest-参数" class="headerlink" title="rest 参数"></a>rest 参数</h4><p><code>ES6</code> 引入<code>rest</code> 参数（<code>...变量名</code>） ，用于获取函数的多余参数，取代 <code>arguments</code> 类数组对象。该变量是一个数组，将多余的参数放入其中，函数中只能存在一个 <code>rest</code> 参数，并且只能放在参数尾部。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...values 就是 rest 参数，values 是一个数组</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">...values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> values)</span><br><span class="line">    sum += val</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)		<span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<h4 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h4><p><code>ES6</code> 允许使用箭头 <code>=&gt;</code> 来定义函数。</p>
<p>箭头函数中，如果只有一个参数，可以只写参数名，不需要括号，如果没有参数，只需要写一个括号；如果函数体只有一条语句，可以省略大括号以及 <code>return</code>。如果 <code>return</code> 值是一个对象，需要在对象外加圆括号以示区分。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 缩写为箭头函数</span></span><br><span class="line"><span class="keyword">let</span> f = <span class="function"><span class="params">v</span> =&gt;</span> v</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f2 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 缩写为箭头函数</span></span><br><span class="line"><span class="keyword">let</span> f2 = <span class="function"><span class="params">()</span> =&gt;</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>箭头函数的作用是简化回调函数，修改 <code>this</code>  指向。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正常写法</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头函数</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x * x)</span><br></pre></td></tr></table></figure>
<h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><ol>
<li>箭头函数体内的 <code>this</code> 对象就是定义时所在的对象，而不是使用时所在的对象。与一般的函数相反。</li>
<li>不可以当构造函数，也就是说不能使用 <code>new</code> 命令。</li>
<li>不可以使用 <code>arguments</code> 对象，必要时可以用 <code>rest</code> 参数代替。</li>
<li>不可以使用 <code>yield</code> 命令，不能作 <code>Generator</code> 函数。</li>
</ol>
<h5 id="this-理解"><a href="#this-理解" class="headerlink" title="this 理解"></a>this 理解</h5><p>箭头函数本身没有 <code>this</code> 对象，它继承自外层调用者，总是指向函数定义生效时所在的对象。</p>
<p><strong>扩展理解</strong>： 箭头函数的 this 看外层的是否有函数。如果有，外层函数的 this 就是内部箭头函数的 this ；如果没有，则 this 是 window 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 案例 1</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  f1: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  f2: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.f1()	<span class="comment">// windows</span></span><br><span class="line">obj.f2()	<span class="comment">// 调用时的对象 obj</span></span><br></pre></td></tr></table></figure>
<p>箭头函数常用于回调函数，用来获取外层函数的 <code>this</code> 。</p>
<h3 id="数组的拓展"><a href="#数组的拓展" class="headerlink" title="数组的拓展"></a>数组的拓展</h3><h4 id="拓展运算符"><a href="#拓展运算符" class="headerlink" title="拓展运算符"></a>拓展运算符</h4><p><code>...</code> 拓展运算符，它是函数 <code>rest</code> 参数的逆运算，将一个数组转为用逗号分隔的参数列表，直接打印输出是用空格分隔。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])		<span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a, b, c)</span><br><span class="line">&#125;</span><br><span class="line">foo(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])		<span class="comment">// 使用拓展运算符传入参数</span></span><br></pre></td></tr></table></figure>
<h5 id="应用-1"><a href="#应用-1" class="headerlink" title="应用"></a>应用</h5><ol>
<li><p>合并数组。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>]</span><br><span class="line"><span class="keyword">let</span> b = [<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> c = [<span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> arr = [...a, ...b, ...c]		<span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">a.push(...b)		<span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>与解构赋值结合生成数组。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, ...b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a, b)		<span class="comment">// 1 [2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串转数组。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [...<span class="string">'hello'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr)		<span class="comment">// ["h", "e", "l", "l", "o"]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>实现将有 <code>Iterator</code> 接口的对象转化为真正的数组。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">1</span>, <span class="string">'one'</span>], [<span class="number">2</span>, <span class="string">'two'</span>], [<span class="number">3</span>, <span class="string">'three'</span>]])</span><br><span class="line"><span class="keyword">let</span> arr = [...map.keys()]		<span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="keyword">let</span> arr2 = [...map.values()]	<span class="comment">// ["one", "two", "three"]</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h4><p>用于将类似数组的对象和可遍历的对象转化为真正的数组。并且可以接收第二个参数，作用类似于 map 方法，将每个元素处理后放入返回的数组。</p>
<h4 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h4><p>弥补数组构造函数 <code>Array()</code> 不足，将一组数值转换为数组。</p>
<p>构造函数 <code>Array()</code> 会因参数数量不同导致行为有差异。<code>Array.of()</code> 基本代替 <code>Array()</code> 和  <code>new Array()</code> ，行为统一，没有歧义。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>() 		<span class="comment">// 创建空数组</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>)		<span class="comment">// 创建空数组，长度为 3 。是[, , ,]，不是 [3]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>)		<span class="comment">// [1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>)		<span class="comment">// [3]</span></span><br></pre></td></tr></table></figure>
<h4 id="copyWithin"><a href="#copyWithin" class="headerlink" title="copyWithin()"></a>copyWithin()</h4><p>修改当前数组，将数组指定位置的成员覆盖到其他位置，并返回当前数组。</p>
<p><code>Array.prototype.copyWithin(target, start = 0, end = this.length)</code> </p>
<ul>
<li>target：开始替换位置。</li>
<li>start：开始读取数据位置。</li>
<li>end：停止读取位置。</li>
</ul>
<h4 id="find-和-findIndex"><a href="#find-和-findIndex" class="headerlink" title="find() 和 findIndex()"></a>find() 和 findIndex()</h4><p>用于找出第一个符合条件的数组成员，参数是回调函数。<code>find()</code> 返回值时第一个符合条件的值，或者 <code>undefined</code> 没找到。<code>findIndex()</code> 返回第一个符合条件的下标，或者 <code>-1</code> 没找到。</p>
<p>可以识别 <code>NaN</code> ，弥补 <code>IndexOf()</code> 方法的不足。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">10</span>].find(<span class="function">(<span class="params">value, index, arr</span>) =&gt;</span> value &lt; <span class="number">0</span>)		<span class="comment">// -5</span></span><br></pre></td></tr></table></figure>
<h4 id="fill"><a href="#fill" class="headerlink" title="fill()"></a>fill()</h4><p>使用给定值填充数组。</p>
<p><code>array.fill(value, start = 0, end = this.length6)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">7</span>)		<span class="comment">// [7, 7, 7] 创建长度为 3 的数组，并全部填充数值 7</span></span><br></pre></td></tr></table></figure>
<h3 id="Promise-异步操作"><a href="#Promise-异步操作" class="headerlink" title="Promise 异步操作"></a>Promise 异步操作</h3><h4 id="callback-hell-回调地狱"><a href="#callback-hell-回调地狱" class="headerlink" title="callback hell 回调地狱"></a>callback hell 回调地狱</h4><p>在 JS 程序中，程序执行不会等待异步操作执行，而异步操作的时 。 间长短与操作的内容有关，并不一定会按顺序。</p>
<p>如下代码，有三个读取文件的异步操作，其执行结束的顺序与文件大小及其他因素有关，所以控制台输出的结果顺序会不同。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./b.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./c.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>如果需要将这个程序按先后顺序执行，可以如下修改：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line"></span><br><span class="line">  fs.readFile(<span class="string">'./b.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line"></span><br><span class="line">    fs.readFile(<span class="string">'./c.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>如果有更多的异步操作，就需要在回调函数中不断地嵌套函数，代码深度将非常恐怖，也非常不利于维护，这就是<font color="red">回调地域</font>。</p>
<h4 id="Promise-对象"><a href="#Promise-对象" class="headerlink" title="Promise 对象"></a>Promise 对象</h4><p><code>Promise</code> 对象用于解决异步操作的回调地狱（函数作为参数层层嵌套）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 虽然解决了异步操作的先后顺序，单数出现了回调地域</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line"></span><br><span class="line">  fs.readFile(<span class="string">'./b.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line"></span><br><span class="line">    fs.readFile(<span class="string">'./c.txt'</span>, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="Promise-状态"><a href="#Promise-状态" class="headerlink" title="Promise 状态"></a>Promise 状态</h5><p><code>Promise</code> 异步操作有三种状态：<code>pending（进行中）</code>、 <code>resolved（已定型） /fulfilled（已成功）</code> 和  <code>rejected（已失败）</code>。</p>
<p><code>Promise</code>对象只有：从 <code>pending</code> 变为 <code>Resolved</code> 和从 <code>pending</code> 变为 <code>rejected</code> 的状态改变。只要处于 <code>resolved</code> 和 <code>rejected</code> ，状态就不会再变了。</p>
<p><img src="/2019/08/01/前端-JavaScript基础-EcamScript6/Promise.jpg" alt="Promise.jpg"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise 对象的使用</span></span><br><span class="line"><span class="keyword">var</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... some code</span></span><br><span class="line"></span><br><span class="line">  异步操作方法(xxx, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 承诺任务失败，Pending 状态变成 Rejected</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 承诺任务完成，Pending 状态变成 Resolve</span></span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>Promise</code> 对象一旦新建就会被执行，中途无法被取消。</p>
<h5 id="then-方法"><a href="#then-方法" class="headerlink" title="then() 方法"></a>then() 方法</h5><p><code>then()</code> 方法接收两个回调函数作为参数，两个函数只会有一个被调用。</p>
<ul>
<li><p>第一个参数是 <code>Promise</code> 执行成功 <code>Resolve</code> 成功状态时的回调。</p>
</li>
<li><p>第二个参数是 <code>Promise</code> 执行失败 <code>Reject</code> 失败状态时的回调。</p>
</li>
</ul>
<p><code>then()</code> 方法会在异步操作完成之后执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单个异步操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... some code</span></span><br><span class="line"></span><br><span class="line">  fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 承诺任务失败，Pending 状态变成 Rejected</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 承诺任务完成，Pending 状态变成 Resolve</span></span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">myPromise.then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;, (err) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'文件读取失败，错误对象：'</span>, err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>then()</code> 方法可以链式调用，每个 <code>then()</code> 方法的一个回调函数中 <code>return</code> 下一个要执行的异步操作的 <code>Promise</code> 对象，这样第二个异步操作就会在第一个异步操作之后执行，这样就确保了异步操作的执行顺序问题，同时也避免了回调地域问题。</p>
<hr>
<h5 id="案例：Node-js-中-Promise-读取文件数据"><a href="#案例：Node-js-中-Promise-读取文件数据" class="headerlink" title="案例：Node.js 中 Promise 读取文件数据"></a>案例：Node.js 中 Promise 读取文件数据</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Node.js 中多个异步操作依次执行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 承诺任务失败，Pending 状态变成 Rejected</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 承诺任务完成，Pending 状态变成 Resolve</span></span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./b.txt'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 承诺任务失败，Pending 状态变成 Rejected</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 承诺任务完成，Pending 状态变成 Resolve</span></span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./c.txt'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 承诺任务失败，Pending 状态变成 Rejected</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 承诺任务完成，Pending 状态变成 Resolve</span></span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1</span><br><span class="line">  .then(</span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">      <span class="keyword">return</span> p2</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'文件读取失败，错误对象：'</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .then(</span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">      <span class="keyword">return</span> p3</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'文件读取失败，错误对象：'</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .then(</span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'文件读取失败，错误对象：'</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为了简化代码，可以将这个异步操作封装成 API</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pReadFile</span> (<span class="params">filePath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(filePath, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 承诺任务失败，Pending 状态变成 Rejected</span></span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 承诺任务完成，Pending 状态变成 Resolve</span></span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pReadFile(<span class="string">'./a.txt'</span>)</span><br><span class="line">  .then(</span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">      <span class="keyword">return</span> pReadFile(<span class="string">'./b.txt'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'文件读取失败，错误对象：'</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .then(</span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">      <span class="keyword">return</span> pReadFile(<span class="string">'./c.txt'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'文件读取失败，错误对象：'</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .then(</span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'文件读取失败，错误对象：'</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="案例：前端请求数据时的-Promise"><a href="#案例：前端请求数据时的-Promise" class="headerlink" title="案例：前端请求数据时的 Promise"></a>案例：前端请求数据时的 Promise</h5><p>这里使用 <code>ajax</code> 请求 <code>API</code> 数据时，有时会出现一个页面需要请求多个不同的 <code>API</code>，少则三五个，多则七八个，因彼此间有先后顺序，此时就需要保证异步请求的先后顺序了，<code>jQuery</code> 中已经支持了 <code>Promise</code>。</p>
<p>这个案例需要 <code>API</code> 数据，可以用 <code>json-server</code> 工具来模拟。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"user_form"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 模板内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; user.username &#125;&#125;"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; user.age &#125;&#125;"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>职业<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span></span><br><span class="line"><span class="undefined">                    &#123;&#123; each jobs&#125;&#125;</span></span><br><span class="line"><span class="javascript">                        &#123;&#123; <span class="keyword">if</span> user.jobId === $value.id&#125;&#125;</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; $value.id &#125;&#125;"</span> <span class="attr">selected</span>&gt;</span>&#123;&#123; $value.name &#125;&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="javascript">                        &#123;&#123; <span class="keyword">else</span> &#125;&#125;</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; $value.id &#125;&#125;"</span>&gt;</span>&#123;&#123; $value.name &#125;&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="javascript">                        &#123;&#123; /<span class="keyword">if</span> &#125;&#125;</span></span><br><span class="line"><span class="undefined">                    &#123;&#123; /each &#125;&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引用模板 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"node_modules/art-template/lib/template-web.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引用 jQuery --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"node_modules/jquery/dist/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 模板渲染 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             *  未用 promise</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> data = &#123;&#125;;</span></span><br><span class="line"><span class="javascript">            promiseGet(<span class="string">"http://127.0.0.1:3000/users/4"</span>)</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">userData</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">                    data.user = userData</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> promiseGet(<span class="string">"http://127.0.0.1:3000/jobs"</span>)</span></span><br><span class="line"><span class="undefined">                &#125;)</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">jobsData</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">                    data.jobs = jobsData</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(data)</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> htmlStr = template(<span class="string">"tpl"</span>, data)</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.querySelector(<span class="string">"#user_form"</span>).innerHTML = htmlStr</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             *  使用 promise 的 jQuery</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="comment">// var data = &#123;&#125;;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// // userData，jobsData 返回时就是对象了</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// $.get("http://127.0.0.1:3000/users/4")</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     .then(userData =&gt; &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         data.user = userData</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         return $.get("http://127.0.0.1:3000/jobs")</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     &#125;)</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     .then(jobsData =&gt; &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         data.jobs = jobsData</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         var htmlStr = template("tpl", data)</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         document.querySelector("#user_form").innerHTML = htmlStr</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     &#125;)</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 封装 ajax 获取网络请求的 promise 方法，可以再写个callback，就可以支持多重形式</span></span><br><span class="line"><span class="undefined">             **/</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">promiseGet</span>(<span class="params">url</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 当请求加载成功之后要调用的函数</span></span></span><br><span class="line"><span class="javascript">                    oReq.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                        resolve(<span class="built_in">JSON</span>.parse(oReq.responseText));</span></span><br><span class="line"><span class="undefined">                    &#125;;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 当请求加载失败之后要调用的函数</span></span></span><br><span class="line"><span class="javascript">                    oReq.onerror = <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">                        reject(err);</span></span><br><span class="line"><span class="undefined">                    &#125;;</span></span><br><span class="line"><span class="javascript">                    oReq.open(<span class="string">"get"</span>, url, <span class="literal">true</span>);</span></span><br><span class="line"><span class="undefined">                    oReq.send();</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// data.json</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"users"</span>:[</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"username"</span>:<span class="string">"admin"</span>,<span class="attr">"age"</span>:<span class="number">28</span>,<span class="attr">"jobId"</span>:<span class="number">3</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"username"</span>:<span class="string">"admin"</span>,<span class="attr">"age"</span>:<span class="number">28</span>,<span class="attr">"jobId"</span>:<span class="number">4</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">3</span>,<span class="attr">"username"</span>:<span class="string">"admin"</span>,<span class="attr">"age"</span>:<span class="number">28</span>,<span class="attr">"jobId"</span>:<span class="number">5</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">4</span>,<span class="attr">"username"</span>:<span class="string">"admin"</span>,<span class="attr">"age"</span>:<span class="number">28</span>,<span class="attr">"jobId"</span>:<span class="number">5</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"jobs"</span>:[</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"name"</span>:<span class="string">"学生"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"name"</span>:<span class="string">"老师"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">3</span>,<span class="attr">"name"</span>:<span class="string">"司机"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">4</span>,<span class="attr">"name"</span>:<span class="string">"画家"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">5</span>,<span class="attr">"name"</span>:<span class="string">"演员"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">"id"</span>:<span class="number">6</span>,<span class="attr">"name"</span>:<span class="string">"电竞"</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="案例：Node-js-调用-Mongoose-时的-promise"><a href="#案例：Node-js-调用-Mongoose-时的-promise" class="headerlink" title="案例：Node.js 调用 Mongoose 时的 promise"></a>案例：Node.js 调用 Mongoose 时的 promise</h5><p><code>mongoose</code> 所有 <code>API</code> 都支持 <code>promise</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">27017</span></span><br><span class="line"><span class="keyword">const</span> hostname = <span class="string">'127.0.0.1'</span></span><br><span class="line"><span class="keyword">const</span> dbName = <span class="string">'user'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 连接数据库</span></span><br><span class="line">mongoose.connect(<span class="string">`mongodb://<span class="subst">$&#123;hostname&#125;</span>:<span class="subst">$&#123;port&#125;</span>/<span class="subst">$&#123;dbName&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数据库连接状态;</span></span><br><span class="line"><span class="keyword">var</span> db = mongoose.connection</span><br><span class="line">db.on(<span class="string">'error'</span>, <span class="built_in">console</span>.error.bind(<span class="built_in">console</span>, <span class="string">'数据库连接失败！'</span>))</span><br><span class="line">db.once(<span class="string">'open'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// we're connected!</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'数据库连接成功！'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Schema 文档结构设计（表结构）</span></span><br><span class="line"><span class="keyword">var</span> userSchema = mongoose.Schema(&#123;</span><br><span class="line">  username: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    <span class="built_in">require</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  password: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    <span class="built_in">require</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  email: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    <span class="built_in">require</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  age: &#123;</span><br><span class="line">    type: <span class="built_in">Number</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  gender: &#123;</span><br><span class="line">    type: <span class="built_in">Number</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="number">0</span>,</span><br><span class="line">    enum: [<span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 把 schema 编译成一个 Model，并返回 Model 对象</span></span><br><span class="line"><span class="keyword">var</span> User = mongoose.model(<span class="string">'User'</span>, userSchema)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> userJson = &#123;</span><br><span class="line">  username: <span class="string">'admin'</span>,</span><br><span class="line">  password: <span class="string">'1234'</span>,</span><br><span class="line">  email: <span class="string">'1234@qq.com'</span>,</span><br><span class="line">  age: <span class="number">17</span>,</span><br><span class="line">  gender: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 mongoose 的 Promise，避免用户重复注册</span></span><br><span class="line">User.findOne(&#123; <span class="attr">username</span>: <span class="string">'admin'</span> &#125;)</span><br><span class="line">  .then(</span><br><span class="line">    <span class="comment">// 查询成功的回调，data 为查找到的对象</span></span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (data) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'用户名已存在'</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'用户名可用'</span>)</span><br><span class="line">        <span class="comment">// 用户不存在，注册</span></span><br><span class="line">        <span class="comment">// return 异步操作 save()</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(userJson).save()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    () =&gt; <span class="built_in">console</span>.log(<span class="string">'数据查询失败'</span>)</span><br><span class="line">  )</span><br><span class="line">  .then(</span><br><span class="line">    <span class="comment">// 如果执行 save() 成功，data 返回的是保存的对象</span></span><br><span class="line">    <span class="comment">// 未执行 save() 方法，data 为空</span></span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (data) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'数据保存成功:'</span>, data)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'数据不保存'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    () =&gt; <span class="built_in">console</span>.log(<span class="string">'数据保存失败'</span>)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不使用 Promise</span></span><br><span class="line"><span class="comment">// User.findOne(&#123; username: 'admin' &#125;, (err, data) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   if (err) &#123;</span></span><br><span class="line"><span class="comment">//     return console.log('查询失败')</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//   console.log('查找成功，data：', data)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//   if (data) &#123;</span></span><br><span class="line"><span class="comment">//     console.log('用户名已存在')</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     console.log('用户名可用')</span></span><br><span class="line"><span class="comment">//     new User(userJson).save((err, data) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//       if (err) &#123;</span></span><br><span class="line"><span class="comment">//         return console.log('保存失败')</span></span><br><span class="line"><span class="comment">//       &#125;</span></span><br><span class="line"><span class="comment">//       console.log('保存成功，data：', data)</span></span><br><span class="line"><span class="comment">//     &#125;)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/01/前端-JavaScript基础-EcamScript6/" data-id="cjy01amzx0030osutxou2hqi0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/EcamScript6/">EcamScript6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2019/07/12/前端-CSS预处理器/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">前端-CSS预处理器</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BOM/">BOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECharts/">ECharts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EcamScript6/">EcamScript6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Html-Css/">Html/Css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/">Node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/浏览器兼容/">浏览器兼容</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动端/">移动端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件配置/">软件配置</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 19px;">Android</a> <a href="/tags/BOM/" style="font-size: 10px;">BOM</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/tags/ECharts/" style="font-size: 10px;">ECharts</a> <a href="/tags/EcamScript6/" style="font-size: 10px;">EcamScript6</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Html-Css/" style="font-size: 11px;">Html/Css</a> <a href="/tags/JavaScript/" style="font-size: 17px;">JavaScript</a> <a href="/tags/Node/" style="font-size: 14px;">Node</a> <a href="/tags/Python/" style="font-size: 16px;">Python</a> <a href="/tags/Vue/" style="font-size: 14px;">Vue</a> <a href="/tags/blog/" style="font-size: 11px;">blog</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/tool/" style="font-size: 10px;">tool</a> <a href="/tags/前端/" style="font-size: 18px;">前端</a> <a href="/tags/后端/" style="font-size: 13px;">后端</a> <a href="/tags/小程序/" style="font-size: 10px;">小程序</a> <a href="/tags/数据库/" style="font-size: 12px;">数据库</a> <a href="/tags/服务器/" style="font-size: 10px;">服务器</a> <a href="/tags/框架/" style="font-size: 15px;">框架</a> <a href="/tags/浏览器兼容/" style="font-size: 10px;">浏览器兼容</a> <a href="/tags/移动端/" style="font-size: 20px;">移动端</a> <a href="/tags/软件配置/" style="font-size: 10px;">软件配置</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/01/前端-JavaScript基础-EcamScript6/">前端-JavaScript基础-二刷ES6</a>
          </li>
        
          <li>
            <a href="/2019/07/12/前端-CSS预处理器/">前端-CSS预处理器</a>
          </li>
        
          <li>
            <a href="/2019/05/22/阿里云服务器配置/">阿里云服务器配置</a>
          </li>
        
          <li>
            <a href="/2019/04/25/框架-Vuex/">框架-Vuex</a>
          </li>
        
          <li>
            <a href="/2019/04/11/框架-全栈开发/">Vue+Node+Mongodb全栈开发</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Ai Junhao<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>