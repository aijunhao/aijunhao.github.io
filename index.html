<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hello, I&#39;m Junhao Ai.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hello, I&#39;m Junhao Ai.">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hello, I&#39;m Junhao Ai.">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello, I&#39;m Junhao Ai.">
  
    <link rel="alternate" href="/atom.xml" title="Hello, I&#39;m Junhao Ai." type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hello, I&#39;m Junhao Ai.</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-前端-JavaScript基础-tool工具集合" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/12/前端-JavaScript基础-tool工具集合/" class="article-date">
  <time datetime="2019-02-12T05:42:45.000Z" itemprop="datePublished">2019-02-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/12/前端-JavaScript基础-tool工具集合/">前端-JavaScript基础-tool工具集合</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>工具目录：</p>
<ul>
<li>addClass(obj, cn) 给元素添加class属性</li>
<li>hasClass(obj, cn) 判断元素是否有某个class属性</li>
<li>removeClass(obj, cn) 删除一个元素指定的class属性</li>
<li>toggleClss(obj, cn) 切换类(如果元素具有该类，则删除；如果没有则添加)</li>
<li>getStyle(obj, name) 获取元素当前可用样式值</li>
<li>move(obj, attr, speed, target, callback) 元素动画效果</li>
<li>bind(obj, eventStr, callback) 多事件绑定</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给元素添加class属性</span></span><br><span class="line"><span class="comment"> * obj：对象</span></span><br><span class="line"><span class="comment"> * cn: 类名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">obj, cn</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!hasClass(obj, cn))&#123;</span><br><span class="line">        obj.className += <span class="string">" "</span> + cn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断元素是否有某个class属性</span></span><br><span class="line"><span class="comment"> * obj：对象</span></span><br><span class="line"><span class="comment"> * cn: 类名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">obj, cn</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 判断obj中有没有cn这个类</span></span><br><span class="line">    <span class="comment">// 使用构造函数拼接动态正则表达式</span></span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\b"</span> + cn + <span class="string">"\\b"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> reg.test(obj.className);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除一个元素指定的class属性</span></span><br><span class="line"><span class="comment"> * obj：对象</span></span><br><span class="line"><span class="comment"> * cn: 类名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">obj, cn</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 正则表达式</span></span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\b"</span> + cn + <span class="string">"\\b"</span>);</span><br><span class="line">                        </span><br><span class="line">    <span class="comment">// 删除class</span></span><br><span class="line">    obj.className = obj.className.replace(reg, <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 切换类。如果元素中具有该类，则删除；如果没有则添加。</span></span><br><span class="line"><span class="comment"> * obj：对象</span></span><br><span class="line"><span class="comment"> * cn: 类名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleClss</span>(<span class="params">obj, cn</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断是否有cn</span></span><br><span class="line">    <span class="keyword">if</span> (hasClass(obj, cn)) &#123;</span><br><span class="line">        removeClass(obj, cn)</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        addClass(obj, cn)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取元素当前可用样式值。兼容浏览器</span></span><br><span class="line"><span class="comment"> * obj：对象</span></span><br><span class="line"><span class="comment"> * name：样式名字符串</span></span><br><span class="line"><span class="comment"> * 返回值： 属性值字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">obj, name</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 因为判断浏览器比较麻烦,所以我们通过判断是window中是否有getComputedStyle方法来判断使用哪种方式</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.getComputedStyle)&#123;</span><br><span class="line">        <span class="comment">// 正常浏览器</span></span><br><span class="line">        <span class="keyword">return</span> getComputedStyle(obj, <span class="literal">null</span>)[name];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// IE8</span></span><br><span class="line">        <span class="keyword">return</span> obj.currentStyle[name];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 元素动画效果</span></span><br><span class="line"><span class="comment"> *  obj: 要执行动画的对象</span></span><br><span class="line"><span class="comment"> *  attr: 要执行的动画样式字符串。如："left"/"top"/"width"/"height"</span></span><br><span class="line"><span class="comment"> *  speed: 移动速度绝对值</span></span><br><span class="line"><span class="comment"> *  target: 上下限</span></span><br><span class="line"><span class="comment"> *  callback: 回调函数，可以添加默认！回调函数有无限可能^——^</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">obj, attr, speed, target, callback</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 关闭上一个定时器，在对象内部新建的一个定时器</span></span><br><span class="line">    clearInterval(obj.timer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断速度的正负值,即左右运动方向</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">parseInt</span>(getStyle(obj, attr)) &gt; target)&#123;</span><br><span class="line">        speed = -speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开启一个定时器,用来执行动画效果</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 先执行动画的对象中添加一个timer对象，用来保存自己的定时器</span></span><br><span class="line"><span class="comment">     * 避免多个对象同时使用定时器造成混乱</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    obj.timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取obj的attr</span></span><br><span class="line">        <span class="keyword">var</span> oldValue = <span class="built_in">parseInt</span>(getStyle(obj, attr));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在旧值基础上增加</span></span><br><span class="line">        <span class="keyword">var</span> newValue = oldValue + speed;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断最值</span></span><br><span class="line">        <span class="keyword">if</span>((speed &lt; <span class="number">0</span> &amp;&amp; newValue &lt; target) || (speed &gt; <span class="number">0</span> &amp;&amp; newValue &gt; target))&#123;</span><br><span class="line">            newValue = target;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新值设置给obj</span></span><br><span class="line">        obj.style[attr] = newValue + <span class="string">"px"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当元素移动到400px时,停止执行动画</span></span><br><span class="line">        <span class="keyword">if</span>(newValue == target)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭定时器</span></span><br><span class="line">            clearInterval(obj.timer);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 动画执行完毕的回调函数,只有有回调函数时候才执行,也就是可以不传回调函数!!!</span></span><br><span class="line">            callback &amp;&amp; callback();</span><br><span class="line">        &#125;</span><br><span class="line">                    </span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 多事件绑定。兼容浏览器，统一this。</span></span><br><span class="line"><span class="comment"> * obj: 要绑定的事件的对象</span></span><br><span class="line"><span class="comment"> * eventStr: 事件的字符串(不要on)</span></span><br><span class="line"><span class="comment"> * callback: 回调函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">obj, eventStr, callback</span>)</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 兼容浏览器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span>(obj.addEventListener)&#123;</span><br><span class="line">        <span class="comment">// 大部分浏览器</span></span><br><span class="line">        obj.addEventListener(eventStr, callback, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// IE8及以下浏览器，并在匿名函数中使用回调函数，统一this</span></span><br><span class="line">        obj.attachEvent(<span class="string">"on"</span> + eventStr, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">// 在匿名函数中调用回调函数</span></span><br><span class="line">            callback.call(obj);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/12/前端-JavaScript基础-tool工具集合/" data-id="cjs1ci11c002l6suthgt5qo0j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端，tool/">前端，tool</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-前端-JavaScript基础-BOM基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/08/前端-JavaScript基础-BOM基础/" class="article-date">
  <time datetime="2019-02-08T15:16:25.000Z" itemprop="datePublished">2019-02-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/08/前端-JavaScript基础-BOM基础/">前端-JavaScript基础-BOM基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目录：</p>
<ul>
<li>什么是BOM</li>
<li>BOM对象</li>
<li>window<ul>
<li>setInterval()定时调动</li>
<li>setTimeout()延时调动</li>
</ul>
</li>
<li>Navigator<ul>
<li>userAgent</li>
<li>内容说明</li>
<li>浏览器判断</li>
</ul>
</li>
<li>Location</li>
<li>History</li>
<li>Screen</li>
<li>综合案例——动画</li>
<li>综合案例——轮播图</li>
<li>综合案例——二级菜单</li>
</ul>
<hr>
<h3 id="什么是BOM"><a href="#什么是BOM" class="headerlink" title="什么是BOM"></a>什么是BOM</h3><p>BOM全程Browser Object Model，即浏览器对象模型。</p>
<p>BOM提供了独立于内容 而与浏览器窗口进行交互的对象；由于BOM主要用于管理窗口与窗口之间的通讯，因此其核心对象是window；BOM由一系列相关的对象构成，并且每个对象都提供了很多方法与属性；BOM缺乏标准，JavaScript语法的标准化组织是ECMA，DOM的标准化组织是W3C，BOM最初是Netscape浏览器标准的一部分。</p>
<hr>
<h3 id="BOM对象"><a href="#BOM对象" class="headerlink" title="BOM对象"></a>BOM对象</h3><p>更多：<a href="http://www.w3school.com.cn/jsref/index.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jsref/index.asp</a>  Browser对象</p>
<p>这些BOM对象在浏览器中都是作为window对象的属性保存的，可以通过window对象来使用，也可以直接使用。</p>
<hr>
<h3 id="window"><a href="#window" class="headerlink" title="window"></a>window</h3><p>代表的是整个浏览器的窗口，同时也是网页中的全局对象。</p>
<p>window是最常用的BOM对象。</p>
<p>更多：<a href="http://www.w3school.com.cn/jsref/dom_obj_window.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jsref/dom_obj_window.asp</a></p>
<hr>
<h4 id="setInterval-定时调动"><a href="#setInterval-定时调动" class="headerlink" title="setInterval()定时调动"></a>setInterval()定时调动</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">        	window.onload = function()&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                var count = document.getElementById("p1");</span></span><br><span class="line"><span class="undefined">                var btnOn = document.getElementById("btnOn");</span></span><br><span class="line"><span class="undefined">                var btnOff = document.getElementById("btnOff");</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 计数器</span></span><br><span class="line"><span class="undefined">                var num = 1;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 定时器对象</span></span><br><span class="line"><span class="undefined">                var timer;</span></span><br><span class="line"><span class="undefined">               </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 绑定点击事件，每点击一次开始，就会新建一个定时器！！！</span></span><br><span class="line"><span class="undefined">                 * 关闭定时器是，如果有多个定时器叠加在一起，只会关闭最新的一个。</span></span><br><span class="line"><span class="undefined">                 * 也就是说之前叠加的不会被关闭，仍然继续执行。</span></span><br><span class="line"><span class="undefined">                 * 所以在开启定时器之前，必须关闭同一对象上定时器！！！</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                btnOn.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 关闭已有的定时器，如果是第一次点击，timer为undefined，无效值，会被忽略</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="undefined">                    clearInterval(timer);</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * setInterval()</span></span><br><span class="line"><span class="undefined">                     *  - 定时调用</span></span><br><span class="line"><span class="undefined">                     *  - 将一个函数，每隔一定时间执行一次</span></span><br><span class="line"><span class="undefined">                     *  - 参数：</span></span><br><span class="line"><span class="undefined">                     *      1. 回调函数</span></span><br><span class="line"><span class="undefined">                     *      2. 间隔时间, 毫秒</span></span><br><span class="line"><span class="undefined">                     *  - 返回值：返回一个Number类型的数据作为定时器标识</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="undefined">                    timer = setInterval(function()&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                        count.innerHTML = num++;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                    &#125;, 500);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                btnOff.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 使用clearInterval(定时器标识)关闭指定的定时器</span></span><br><span class="line"><span class="undefined">                     * 如果传入的参数有效，则关闭对应的定时器，无效则忽略</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="undefined">                    clearInterval(timer);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnOn"</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnOff"</span>&gt;</span>停止<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在DOM基础中有一节内容按键事件控制div的移动中，浏览器的默认行为导致移动的第一次和第二次之间有卡顿，需要定时器来解决。这里我们来改造当时的代码。</p>
<p>我们将按键控制和移动功能分开，移动功能使用定时器刷新来实现。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            #box1&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	</span></span><br><span class="line"><span class="undefined">            window.onload = function()&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                var box1 = document.getElementById("box1");</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                // 默认叔叔</span></span><br><span class="line"><span class="undefined">                var speed = 5;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 方向变量</span></span><br><span class="line"><span class="undefined">                var dir = 0;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 按钮按下只控制方向及速度</span></span><br><span class="line"><span class="undefined">                document.onkeydown = function(event)&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    event = event || event;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                    if(event.ctrlKey)&#123;</span></span><br><span class="line"><span class="undefined">                        speed = 10;</span></span><br><span class="line"><span class="undefined">                    &#125; else &#123;</span></span><br><span class="line"><span class="undefined">                        speed = 5;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                    dir = event.keyCode;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 当按下松开时,div不再移动</span></span><br><span class="line"><span class="undefined">                document.onkeyup = function()&#123;</span></span><br><span class="line"><span class="undefined">                    dir = 0;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * bug:</span></span><br><span class="line"><span class="undefined">                 * 这里还有一个小问题，就是长按时候的第一次与第二次间隔稍长。</span></span><br><span class="line"><span class="undefined">                 * 这是浏览器默认行为，需要定时器才能取消。见BOM基础！</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                // 开启一个定时器,来控制div的移动</span></span><br><span class="line"><span class="undefined">                setInterval(function()&#123;</span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 37 左</span></span><br><span class="line"><span class="undefined">                     * 38 上</span></span><br><span class="line"><span class="undefined">                     * 39 又</span></span><br><span class="line"><span class="undefined">                     * 40 下</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="undefined">                    switch(dir)&#123;</span></span><br><span class="line"><span class="undefined">                        case 37:</span></span><br><span class="line"><span class="undefined">                            box1.style.left = box1.offsetLeft - speed + "px";</span></span><br><span class="line"><span class="undefined">                            break;</span></span><br><span class="line"><span class="undefined">                        case 38:</span></span><br><span class="line"><span class="undefined">                            box1.style.top = box1.offsetTop - speed + "px";</span></span><br><span class="line"><span class="undefined">                            break;</span></span><br><span class="line"><span class="undefined">                        case 39:</span></span><br><span class="line"><span class="undefined">                            box1.style.left = box1.offsetLeft + speed + "px";</span></span><br><span class="line"><span class="undefined">                            break;</span></span><br><span class="line"><span class="undefined">                        case 40:</span></span><br><span class="line"><span class="undefined">                            box1.style.top = box1.offsetTop + speed + "px";</span></span><br><span class="line"><span class="undefined">                            break;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;, 30);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="setTimeout-延时调动"><a href="#setTimeout-延时调动" class="headerlink" title="setTimeout()延时调动"></a>setTimeout()延时调动</h4><p>延时调用和定时调用用法完全相同，唯一的区别就是，延时调用只执行一次，定时调用会执行多次。</p>
<p>同样也可以使用关闭延时调用。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clearTimeout(定时器标识);</span><br></pre></td></tr></table></figure></p>
<p>延时调用和定时调用实际上是可以互相代替的，所以使用定时调用更好。</p>
<hr>
<h3 id="Navigator"><a href="#Navigator" class="headerlink" title="Navigator"></a>Navigator</h3><p>代表的是浏览器信息，通过该对象可以来识别不同的浏览器。</p>
<p>由于历史原因，Navigator对象中的大部分属性都已经不能帮助我们识别浏览器了。一般我们只会使用userAgent(等价于浏览器)来判断浏览器的信息，不同的浏览器有不同的userAgent。</p>
<p>更多：<a href="http://www.w3school.com.cn/jsref/dom_obj_navigator.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jsref/dom_obj_navigator.asp</a></p>
<h4 id="userAgent"><a href="#userAgent" class="headerlink" title="userAgent"></a>userAgent</h4><ul>
<li><p>火狐：</p>
<p>  Mozilla/5.0 (Windows NT 10.0; WOW64; rv:65.0) Gecko/20100101 Firefox/65.0</p>
</li>
<li><p>谷歌：</p>
<p>  Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36</p>
</li>
<li><p>IE 11 (已经没有任何微软和IE的标识了)：</p>
<p>  Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729; rv:11.0) like Gecko</p>
</li>
<li><p>IE 10：</p>
<p>  Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)</p>
</li>
<li><p>IE 9：</p>
<p>  Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)</p>
</li>
<li><p>IE 8：</p>
<p>  Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)</p>
</li>
<li><p>Edge (内置浏览器，其实也是用内置chrome)：</p>
<p>  Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36 Edge/18.17763</p>
</li>
</ul>
<h4 id="内容说明"><a href="#内容说明" class="headerlink" title="内容说明"></a>内容说明</h4><ul>
<li><p>Mozilla/5.0 ：Mozilla基金会5.0版本。</p>
</li>
<li><p>Windows NT 10.0 ：Windows版本代号。Windows NT 10.0表示window10；Windows NT 6.1表示window7。</p>
</li>
<li><p>WOW64 ：64位系统。</p>
</li>
<li><p>rv:65.0 ：浏览器版本位65.0。</p>
</li>
<li><p>Gecko ：CSS渲染引擎名。最出名的一种。</p>
</li>
<li><p>Firefox / Chrome / Edge ：浏览器名称，用来判断是什么浏览器，除了缺德的IE11……</p>
</li>
</ul>
<h4 id="浏览器判断"><a href="#浏览器判断" class="headerlink" title="浏览器判断"></a>浏览器判断</h4><p>从userAgent中的浏览器名称可以判断出大部分浏览器，而IE11，因为没有任何标识，除了有“rv:11”浏览器版本标识可以大致判断是IE11，但是这种大致判断不一定可靠！！！此外还可以通过一些浏览器中特有的对象来判断浏览器信息，如ActiveXObject，是IE发送Ajax请求的，是IE特有的。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            var ua = navigator.userAgent;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            console.log(ua);</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * - 通过忽略大小写的正则表达式校验userAgent来判断浏览器</span></span><br><span class="line"><span class="undefined">             *</span></span><br><span class="line"><span class="undefined">             * - 无法通过userAgent方式判断时，通过浏览器特有的对象来判断，常用的ActiveXObject。</span></span><br><span class="line"><span class="undefined">             *      - 通过双感叹号来转换成bool值判断是否有该对象。但是！！！IE11会造假！！！把ActiveXObject的改成false……</span></span><br><span class="line"><span class="undefined">             *      - 通过in表达式来判断，这种方式无法造假。</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="undefined">            if(/firefox/i.test(ua))&#123;</span></span><br><span class="line"><span class="undefined">                alert("火狐浏览器！");</span></span><br><span class="line"><span class="undefined">            &#125; else if(/chrome/i.test(ua))&#123;</span></span><br><span class="line"><span class="undefined">                alert("谷歌浏览器！");</span></span><br><span class="line"><span class="undefined">            &#125; else if(/msie/i.test(ua))&#123;</span></span><br><span class="line"><span class="undefined">                alert("IE浏览器！");</span></span><br><span class="line"><span class="undefined">            &#125; else if("ActiveXObject" in window)&#123;</span></span><br><span class="line"><span class="undefined">                alert("IE11浏览器");</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h3><p>代表当前浏览器的地址栏信息，可以获取浏览器地址栏信息，或者操作浏览器跳转。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	window.onload = function()&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 获取location地址</span></span><br><span class="line"><span class="undefined">                alert(location);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 修改location</span></span><br><span class="line"><span class="undefined">                 * 和assign()方法效果相同</span></span><br><span class="line"><span class="undefined">                 */ </span></span><br><span class="line"><span class="undefined">                location = "https://www.baidu.com/";</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * reload()</span></span><br><span class="line"><span class="undefined">                 * 重新加载当前页面，刷新当前页面，会有历史记录，可回退</span></span><br><span class="line"><span class="undefined">                 * 如果传递true，则会强制清空缓存刷新页面，即ctrl+F5效果</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                location.reload(true);      </span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * replace()</span></span><br><span class="line"><span class="undefined">                 * 可以使用一个新的页面替代当前页面，没有历史记录，不能回退</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                location.replace();</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="History"><a href="#History" class="headerlink" title="History"></a>History</h3><p>代表浏览器的历史记录，同时通过该对象来操作浏览器的历史记录。由于隐式原因，该对象不能获取到具体的历史记录，只能操作浏览器向前或向后翻页，并且只在当次访问时有效。</p>
<p>更多：<a href="http://www.w3school.com.cn/jsref/dom_obj_history.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jsref/dom_obj_history.asp</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	window.onload = function()&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * length: 获取当前访问数量</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                alert(window.history.length);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * back()</span></span><br><span class="line"><span class="undefined">                 * 返回上一个页面，和浏览器回退按钮功能一样</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                history.back();</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * forward()</span></span><br><span class="line"><span class="undefined">                 * 返回下一个页面，和浏览器回前进按钮功能一样</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                history.forward();</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * go(int)</span></span><br><span class="line"><span class="undefined">                 * 跳转到指定的页面</span></span><br><span class="line"><span class="undefined">                 * - 整数：相当于forward()，向前跳n个页面</span></span><br><span class="line"><span class="undefined">                 * - 负数：相当于back()，向后跳n个页面</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                history.go(1);</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>history<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Screen"><a href="#Screen" class="headerlink" title="Screen"></a>Screen</h3><p>代表用户的屏幕信息，通过该对象可以获取到用户的显示器的相关信息。</p>
<p>不常用。</p>
<hr>
<h3 id="综合案例——动画"><a href="#综合案例——动画" class="headerlink" title="综合案例——动画"></a>综合案例——动画</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	*&#123;</span></span><br><span class="line"><span class="undefined">                margin: 0;</span></span><br><span class="line"><span class="undefined">                padding: 0;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            #box1&#123;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="undefined">                left: 0px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 获取样式值 </span></span><br><span class="line"><span class="undefined">             * 兼容IE8及常见浏览器</span></span><br><span class="line"><span class="undefined">             * obj：对象</span></span><br><span class="line"><span class="undefined">             * name：样式名字符串</span></span><br><span class="line"><span class="undefined">             * 返回值： 属性值字符串</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="undefined">            function getStyle(obj, name)&#123;</span></span><br><span class="line"><span class="undefined">                // 因为判断浏览器比较麻烦,所以我们通过判断是window中是否有getComputedStyle方法来判断使用哪种方式</span></span><br><span class="line"><span class="undefined">                if(window.getComputedStyle)&#123;</span></span><br><span class="line"><span class="undefined">                    // 正常浏览器</span></span><br><span class="line"><span class="undefined">                    return getComputedStyle(obj, null)[name];</span></span><br><span class="line"><span class="undefined">                &#125; else &#123;</span></span><br><span class="line"><span class="undefined">                    // IE8</span></span><br><span class="line"><span class="undefined">                    return obj.currentStyle[name];</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 参数：</span></span><br><span class="line"><span class="undefined">             *  obj: 要执行动画的对象</span></span><br><span class="line"><span class="undefined">             *  attr: 要执行的动画样式。如：left/top/width/height，string值</span></span><br><span class="line"><span class="undefined">             *  speed: 移动速度绝对值</span></span><br><span class="line"><span class="undefined">             *  target: 上下限</span></span><br><span class="line"><span class="undefined">             *  callback: 回调函数，可以添加默认！回调函数有无限可能^——^</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="undefined">            function move(obj, attr, speed, target, callback)&#123;</span></span><br><span class="line"><span class="undefined">                // 关闭上一个定时器</span></span><br><span class="line"><span class="undefined">                clearInterval(obj.timer);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 判断速度的正负值,即左右运动方向</span></span><br><span class="line"><span class="undefined">                if(parseInt(getStyle(obj, attr)) &gt; target)&#123;</span></span><br><span class="line"><span class="undefined">                    speed = -speed;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 开启一个定时器,用来执行动画效果</span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 先执行动画的对象中添加一个timer对象，用来保存自己的定时器</span></span><br><span class="line"><span class="undefined">                 * 避免多个对象同时使用定时器造成混乱</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                obj.timer = setInterval(function()&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 获取obj的attr</span></span><br><span class="line"><span class="undefined">                    var oldValue = parseInt(getStyle(obj, attr));</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 在旧值基础上增加</span></span><br><span class="line"><span class="undefined">                    var newValue = oldValue + speed;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 判断最值</span></span><br><span class="line"><span class="undefined">                    if((speed &lt; 0 &amp;&amp; newValue &lt; target) || (speed &gt; 0 &amp;&amp; newValue &gt; target))&#123;</span></span><br><span class="line"><span class="undefined">                        newValue = target;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 新值设置给obj</span></span><br><span class="line"><span class="undefined">                    obj.style[attr] = newValue + "px";</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 当元素移动到400px时,停止执行动画</span></span><br><span class="line"><span class="undefined">                    if(newValue == target)&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 关闭定时器</span></span><br><span class="line"><span class="undefined">                        clearInterval(obj.timer);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 动画执行完毕的回调函数,只有有回调函数时候才执行,也就是可以不传回调函数!!!</span></span><br><span class="line"><span class="undefined">                        callback &amp;&amp; callback();</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                &#125;, 30);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">        	window.onload = function()&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                //</span></span><br><span class="line"><span class="undefined">                var btnMoveRight = document.getElementById("btnMoveRight");</span></span><br><span class="line"><span class="undefined">                var btnMoveLeft = document.getElementById("btnMoveLeft");</span></span><br><span class="line"><span class="undefined">                var btnMoveDown = document.getElementById("btnMoveDown");</span></span><br><span class="line"><span class="undefined">                var btnMoveUp = document.getElementById("btnMoveUp");</span></span><br><span class="line"><span class="undefined">                var btnWidthUp = document.getElementById("btnWidthUp");</span></span><br><span class="line"><span class="undefined">                var btnWidthDown = document.getElementById("btnWidthDown");</span></span><br><span class="line"><span class="undefined">                var box1 = document.getElementById("box1");</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                btnMoveRight.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    move(box1, "left", 10, 400, function()&#123;</span></span><br><span class="line"><span class="undefined">                        alert('动画执行完毕');</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                btnMoveLeft.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    move(box1, "left", 10, 0, function()&#123;</span></span><br><span class="line"><span class="undefined">                        alert('动画执行完毕');</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                btnMoveDown.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    move(box1, "top", 10, 400, function()&#123;</span></span><br><span class="line"><span class="undefined">                        alert('动画执行完毕');</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                btnMoveUp.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    move(box1, "top", 10, 0, function()&#123;</span></span><br><span class="line"><span class="undefined">                        alert('动画执行完毕');</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                btnWidthUp.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    move(box1, "width", 10, 400, function()&#123;</span></span><br><span class="line"><span class="undefined">                        alert('动画执行完毕');</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                btnWidthDown.onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                    move(box1, "width", 10, 5, function()&#123;</span></span><br><span class="line"><span class="undefined">                        alert('动画执行完毕');</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnMoveRight"</span>&gt;</span>向右移动<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnMoveLeft"</span>&gt;</span>向左移动<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnMoveDown"</span>&gt;</span>向下移动<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnMoveUp"</span>&gt;</span>向上移动<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnWidthUp"</span>&gt;</span>宽度增加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnWidthDown"</span>&gt;</span>宽度减少<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="综合案例——轮播图"><a href="#综合案例——轮播图" class="headerlink" title="综合案例——轮播图"></a>综合案例——轮播图</h3><p>结合setInterval()定时调动和动画效果。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	*&#123;</span></span><br><span class="line"><span class="undefined">                margin: 0;</span></span><br><span class="line"><span class="undefined">                padding: 0;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            #outer&#123;</span></span><br><span class="line"><span class="undefined">                width: 520px;</span></span><br><span class="line"><span class="undefined">                height: 333px;</span></span><br><span class="line"><span class="undefined">                margin: 50px auto;</span></span><br><span class="line"><span class="undefined">                background-color: greenyellow;</span></span><br><span class="line"><span class="undefined">                padding: 10px 0;</span></span><br><span class="line"><span class="undefined">                /* 父元素开启相对定位 */</span></span><br><span class="line"><span class="undefined">                position: relative;</span></span><br><span class="line"><span class="undefined">                /* 裁剪多余的内容 */</span></span><br><span class="line"><span class="undefined">                overflow: hidden;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            #imgList&#123;</span></span><br><span class="line"><span class="undefined">                /* 去除项目符号 */</span></span><br><span class="line"><span class="undefined">                list-style: none;</span></span><br><span class="line"><span class="undefined">                /* 子元素开启绝对定位 */</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /* 设置图片中的li */</span></span><br><span class="line"><span class="undefined">            #imgList li&#123;</span></span><br><span class="line"><span class="undefined">                /* 设置浮动，将垂直排列变成水平排列 */</span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">                margin: 0 10px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /* 设置导航按钮 */</span></span><br><span class="line"><span class="undefined">            #navDiv&#123;</span></span><br><span class="line"><span class="undefined">                /* 开启绝对定位 */</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="undefined">                /* 设置位置 */</span></span><br><span class="line"><span class="undefined">                bottom: 15px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            #navDiv a&#123;</span></span><br><span class="line"><span class="undefined">                /* 设置浮动 */</span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">                width: 15px;</span></span><br><span class="line"><span class="undefined">                height: 15px;</span></span><br><span class="line"><span class="undefined">                margin: 0 5px;</span></span><br><span class="line"><span class="undefined">                background-color: #FF0000;</span></span><br><span class="line"><span class="undefined">                /* 设置透明 */</span></span><br><span class="line"><span class="undefined">                opacity: 0.5;</span></span><br><span class="line"><span class="undefined">                /* 兼容IE透明 */</span></span><br><span class="line"><span class="undefined">                filter: alpha(opacity = 50);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /* 鼠标移入效果 */</span></span><br><span class="line"><span class="undefined">            #navDiv a:hover&#123;</span></span><br><span class="line"><span class="undefined">                background-color: black;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 获取样式值 </span></span><br><span class="line"><span class="undefined">             * 兼容IE8及常见浏览器</span></span><br><span class="line"><span class="undefined">             * obj：对象</span></span><br><span class="line"><span class="undefined">             * name：样式名字符串</span></span><br><span class="line"><span class="undefined">             * 返回值： 属性值字符串</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="undefined">            function getStyle(obj, name)&#123;</span></span><br><span class="line"><span class="undefined">                // 因为判断浏览器比较麻烦,所以我们通过判断是window中是否有getComputedStyle方法来判断使用哪种方式</span></span><br><span class="line"><span class="undefined">                if(window.getComputedStyle)&#123;</span></span><br><span class="line"><span class="undefined">                    // 正常浏览器</span></span><br><span class="line"><span class="undefined">                    return getComputedStyle(obj, null)[name];</span></span><br><span class="line"><span class="undefined">                &#125; else &#123;</span></span><br><span class="line"><span class="undefined">                    // IE8</span></span><br><span class="line"><span class="undefined">                    return obj.currentStyle[name];</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 参数：</span></span><br><span class="line"><span class="undefined">             *  obj: 要执行动画的对象</span></span><br><span class="line"><span class="undefined">             *  attr: 要执行的动画样式。如：left/top/width/height</span></span><br><span class="line"><span class="undefined">             *  speed: 移动速度绝对值</span></span><br><span class="line"><span class="undefined">             *  target: 上下限</span></span><br><span class="line"><span class="undefined">             *  callback: 回调函数，可以添加默认！回调函数有无限可能^——^</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="undefined">            function move(obj, attr, speed, target, callback)&#123;</span></span><br><span class="line"><span class="undefined">                // 关闭上一个定时器</span></span><br><span class="line"><span class="undefined">                clearInterval(obj.timer);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 判断速度的正负值,即左右运动方向</span></span><br><span class="line"><span class="undefined">                if(parseInt(getStyle(obj, attr)) &gt; target)&#123;</span></span><br><span class="line"><span class="undefined">                    speed = -speed;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 开启一个定时器,用来执行动画效果</span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 先执行动画的对象中添加一个timer对象，用来保存自己的定时器</span></span><br><span class="line"><span class="undefined">                 * 避免多个对象同时使用定时器造成混乱</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                obj.timer = setInterval(function()&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 获取obj的attr</span></span><br><span class="line"><span class="undefined">                    var oldValue = parseInt(getStyle(obj, attr));</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 在旧值基础上增加</span></span><br><span class="line"><span class="undefined">                    var newValue = oldValue + speed;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 判断最值</span></span><br><span class="line"><span class="undefined">                    if((speed &lt; 0 &amp;&amp; newValue &lt; target) || (speed &gt; 0 &amp;&amp; newValue &gt; target))&#123;</span></span><br><span class="line"><span class="undefined">                        newValue = target;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 新值设置给obj</span></span><br><span class="line"><span class="undefined">                    obj.style[attr] = newValue + "px";</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 当元素移动到400px时,停止执行动画</span></span><br><span class="line"><span class="undefined">                    if(newValue == target)&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 关闭定时器</span></span><br><span class="line"><span class="undefined">                        clearInterval(obj.timer);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 动画执行完毕的回调函数,只有有回调函数时候才执行,也就是可以不传回调函数!!!</span></span><br><span class="line"><span class="undefined">                        callback &amp;&amp; callback();</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                &#125;, 30);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            window.onload = function()&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 设置ul的宽度</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                // 获取imgList</span></span><br><span class="line"><span class="undefined">                var imgList = document.getElementById("imgList");</span></span><br><span class="line"><span class="undefined">                // 获取ul中所有img标签</span></span><br><span class="line"><span class="undefined">                var imgArr = imgList.getElementsByTagName("img");</span></span><br><span class="line"><span class="undefined">                // 设置imgList的宽度</span></span><br><span class="line"><span class="undefined">                imgList.style.width = 520 * imgArr.length + "px";</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 设置导航按钮的位置居中</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                // 获取navDiv</span></span><br><span class="line"><span class="undefined">                var navDiv = document.getElementById("navDiv");</span></span><br><span class="line"><span class="undefined">                //获取outer</span></span><br><span class="line"><span class="undefined">                var outer = document.getElementById("outer");</span></span><br><span class="line"><span class="undefined">                // 设置navDiv的left值</span></span><br><span class="line"><span class="undefined">                navDiv.style.left = (outer.offsetWidth - navDiv.offsetWidth)/2 + "px";</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 默认显示图片的索引</span></span><br><span class="line"><span class="undefined">                var index = 0;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 获取所有的a并设置默认选中效果</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                var allA = document.getElementsByTagName("a");</span></span><br><span class="line"><span class="undefined">                // 设置默认选中的效果</span></span><br><span class="line"><span class="undefined">                allA[index].style.backgroundColor = "black";</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 点击超链接切换到指定的图片</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                for (var i=0; i&lt;allA.length; i++) &#123;</span></span><br><span class="line"><span class="undefined">                	</span></span><br><span class="line"><span class="undefined">                    // 为超链接添加索引属性</span></span><br><span class="line"><span class="undefined">                    allA[i].num = i;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 为超链接绑定单击响应函数</span></span><br><span class="line"><span class="undefined">                    allA[i].onclick = function()&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 关闭自动切换的定时器</span></span><br><span class="line"><span class="undefined">                        clearInterval(timer);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 获取点击超链接的索引,并将其设置为index</span></span><br><span class="line"><span class="undefined">                        index = this.num;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 切换图片</span></span><br><span class="line"><span class="undefined">                        //imgList.style.left = "-" + 520 * index + "px";</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 使用move函数切换图片</span></span><br><span class="line"><span class="undefined">                        move(imgList, "left", 30, -520*index, function()&#123;</span></span><br><span class="line"><span class="undefined">                            /* 重新开始自动切换图片 */</span></span><br><span class="line"><span class="undefined">                            autoChange();</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 修改选中的a</span></span><br><span class="line"><span class="undefined">                        setA();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 自动切换图片</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                autoChange();</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                // 定时器对象</span></span><br><span class="line"><span class="undefined">                var timer;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 开启自动切换</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                function autoChange()&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 开启定时器</span></span><br><span class="line"><span class="undefined">                    timer = setInterval(function()&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        // 索引自增</span></span><br><span class="line"><span class="undefined">                        index ++;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        index %= imgArr.length;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        move(imgList, "left", 30, -520*index, function()&#123;</span></span><br><span class="line"><span class="undefined">                            // 修改导航按钮</span></span><br><span class="line"><span class="undefined">                            setA();</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                    &#125;, 2000);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 导航按钮的颜色改变的方法</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                function setA()&#123;</span></span><br><span class="line"><span class="undefined">                     </span></span><br><span class="line"><span class="undefined">                    // 判断当前索引是否是最后一张额外的图片</span></span><br><span class="line"><span class="undefined">                    if(index &gt;= imgArr.length - 1)&#123;</span></span><br><span class="line"><span class="undefined">                        // 修改index</span></span><br><span class="line"><span class="undefined">                        index = 0;</span></span><br><span class="line"><span class="undefined">                        // 通过css将最后一张切换成第一张,通过瞬移实现流畅</span></span><br><span class="line"><span class="undefined">                        imgList.style.left = 0 + "px";</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 清空a的内联背景样式,会露出css中的样式</span></span><br><span class="line"><span class="undefined">                    for(var i=0; i&lt;allA.length; i++)&#123;</span></span><br><span class="line"><span class="undefined">                        allA[i].style.backgroundColor = "";</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    // 将选中的a设置为黑色</span></span><br><span class="line"><span class="undefined">                    allA[index].style.backgroundColor = "black";</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        	</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"outer"</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"imgList"</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/1.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/2.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/3.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/4.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/5.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 最后一张和第一张重复，为了动画效果流畅 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/1.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 导航按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"navDiv"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>轮播图演示效果：</p>
<p><img src="/2019/02/08/前端-JavaScript基础-BOM基础/轮播图效果.gif" alt="前端-JavaScript基础-BOM基础/轮播图效果.gif"></p>
<p>轮播图原理演示：</p>
<p><img src="/2019/02/08/前端-JavaScript基础-BOM基础/轮播图原理演示.gif" alt="前端-JavaScript基础-BOM基础/轮播图原理演示.gif"></p>
<hr>
<h3 id="综合案例——二级菜单"><a href="#综合案例——二级菜单" class="headerlink" title="综合案例——二级菜单"></a>综合案例——二级菜单</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/08/前端-JavaScript基础-BOM基础/" data-id="cjs1ci114002e6sutgjpe8yge" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端，BOM/">前端，BOM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-前端-浏览器兼容" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/01/前端-浏览器兼容/" class="article-date">
  <time datetime="2019-02-01T07:06:44.000Z" itemprop="datePublished">2019-02-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/01/前端-浏览器兼容/">前端-浏览器兼容</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目录：</p>
<ul>
<li>CSS透明</li>
<li>HTML父容器高度塌陷问题</li>
<li>DOM操作Css获取当前有效样式</li>
<li>DOM事件对象event</li>
<li>DOM多事件绑定<ul>
<li>addEventListener()</li>
<li>attachEvent()</li>
<li>浏览器兼容并统一this</li>
</ul>
</li>
<li>浏览器默认拖拽行为</li>
<li>DOM滚轮事件</li>
</ul>
<h3 id="CSS透明"><a href="#CSS透明" class="headerlink" title="CSS透明"></a>CSS透明</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在css中设置透明：</span><br><span class="line"></span><br><span class="line">/* 设置透明 */</span><br><span class="line">opacity: 0.5;</span><br><span class="line"></span><br><span class="line">/* 兼容IE透明 */</span><br><span class="line">filter: alpha(opacity = 50);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="HTML父容器高度塌陷问题"><a href="#HTML父容器高度塌陷问题" class="headerlink" title="HTML父容器高度塌陷问题"></a>HTML父容器高度塌陷问题</h3><p>详细见博客《Html_Css常见问题解决》</p>
<p>即不添加多余的div结构，又要解决高度塌陷问题。使用CSS的方法，通过after伪类，向元素后添加一个空白的块元素，然后清除浮动，实现html方法添加div并设置clear的效果。</p>
<p>关键代码如下，只需要在出现高度塌陷的元素中使用这个类就能实现高度缺陷问题。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.clearfix:after&#123;</span><br><span class="line">    /* 添加一个空的内容 */</span><br><span class="line">    content: "";</span><br><span class="line">    /* 转换为一个块元素，block、table都行 */</span><br><span class="line">    display: block;</span><br><span class="line">    /* 清除浮动 */</span><br><span class="line">    clear: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 兼容IE6 */</span><br><span class="line">.clearfix&#123;</span><br><span class="line">    zoom: 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="DOM操作Css获取当前有效样式"><a href="#DOM操作Css获取当前有效样式" class="headerlink" title="DOM操作Css获取当前有效样式"></a>DOM操作Css获取当前有效样式</h3><p>获取当前有效样式：（只读，不可通过这种方式修改）</p>
<ul>
<li><p>IE8及以上：getComputedStyle(元素, 伪元素(null)).样式名;</p>
<ul>
<li>该方法返回一个对象，对象中封装了当前元素对应的样式，通过.样式名来读取样式。如果获取的样式没有设置，则返回获取到真实的值，而不是auto。</li>
<li>颜色值返回的是rgb值。</li>
</ul>
</li>
<li><p>IE8及以下：元素.currentStyle.样式名;</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/* </span><br><span class="line"> * 兼容IE8及常见浏览器</span><br><span class="line"> * obj：对象</span><br><span class="line"> * name：样式名字符串</span><br><span class="line"> * 返回值： 属性值字符串</span><br><span class="line"> */</span><br><span class="line">function getStyle(obj, name)&#123;</span><br><span class="line">    // 因为判断浏览器比较麻烦,所以我们通过判断是window中是否有getComputedStyle方法来判断使用哪种方式</span><br><span class="line">    if(window.getComputedStyle)&#123;</span><br><span class="line">        // 正常浏览器</span><br><span class="line">        return getComputedStyle(obj, null)[name];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // IE8</span><br><span class="line">        return obj.currentStyle[name];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>IE中如果是默认值，会返回auto，所以最好是显示指定默认值。</p>
<hr>
<h3 id="DOM事件对象event"><a href="#DOM事件对象event" class="headerlink" title="DOM事件对象event"></a>DOM事件对象event</h3><p>在IE8中，响应函数被触发时，浏览器不会传递事件对象。在IE8及以下的浏览器中，是将事件对象作为window对象的属性保存的。火狐传递事件对象，不将事件对象保存到window中，所以，IE8与火狐之间发生冲突。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* 兼容一： */</span><br><span class="line">if(!event)&#123;</span><br><span class="line">    event = window.event;</span><br><span class="line">&#125; </span><br><span class="line">/* 兼容二： */</span><br><span class="line">event = event || window.event;</span><br><span class="line"></span><br><span class="line">var x = event.clientX;</span><br><span class="line">var y = event.clientY;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="DOM多事件绑定"><a href="#DOM多事件绑定" class="headerlink" title="DOM多事件绑定"></a>DOM多事件绑定</h3><p>使用 “对象.事件 = 函数” 的形式绑定响应函数，它只能同时为一个元素的一个事件绑定一个响应函数，如果绑定多个，则后面的会覆盖前面的。</p>
<p>有些时候元素需要一个绑定事件有多个响应函数，可以通过addEventListener()来绑定响应函数。</p>
<p>但是addEventListener()不支持IE8及以下。可以使用attachEvent()来绑定。</p>
<h4 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener()"></a>addEventListener()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">元素.addEventListener(string，function()&#123;&#125;, false);</span><br></pre></td></tr></table></figure>
<p>addEventListener()中的this，是绑定事件的对象。</p>
<p>效果：元素就能同时绑定多个响应函数，响应函数依次执行，且不会被覆盖。</p>
<p>参数：</p>
<ul>
<li>事件字符串：对应的事件，不要on。如果onclick事件，只填”click”即可。</li>
<li>回调函数：事件触发时该函数会被调用。</li>
<li>是否捕获阶段触发事件，一般都是false。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    	    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'1'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'2'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    	    &#125;</span></span><br><span class="line"><span class="undefined">    	</span></span><br><span class="line"><span class="undefined">    	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>弹出对话框<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="attachEvent"><a href="#attachEvent" class="headerlink" title="attachEvent()"></a>attachEvent()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">元素.attachEvent(string, function()&#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>attachEvent()中的this，是window。</p>
<p>效果：元素就能同时绑定多个响应函数，响应函数倒序执行，且不会被覆盖。</p>
<p>参数：</p>
<ul>
<li>事件字符串：对应的事件，必须要on。如果onclick事件，填”onclick”。</li>
<li>回调函数：事件触发时该函数会被调用。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    	    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.attachEvent(<span class="string">"onlick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'1'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.attachEvent(<span class="string">"onclick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'2'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    	    &#125;</span></span><br><span class="line"><span class="undefined">    	</span></span><br><span class="line"><span class="undefined">    	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>弹出对话框<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="浏览器兼容并统一this"><a href="#浏览器兼容并统一this" class="headerlink" title="浏览器兼容并统一this"></a>浏览器兼容并统一this</h4><p>这里需要兼容的地方有两个，一个浏览器，一个this。自定义了一bind()函数来兼容。this的兼容需要重点理解。</p>
<html><br>    <head><br>        <meta charset="utf-8"><br>        <title></title><br><br>        <script type="text/javascript"><br><br>            /<em>
             </em> 参数：<br>             <em> obj: 要绑定的事件的对象
             </em> eventStr: 事件的字符串(不要on)<br>             <em> callback: 回调函数
             </em>/<br>            function bind(obj, eventStr, callback){<br>                /*<em>
                 </em> 兼容浏览器<br>                 */<br>                if(obj.addEventListener){<br>                    // 大部分浏览器<br>                    obj.addEventListener(eventStr, callback, false);<br>                } else {<br>                    // IE8及以下浏览器，并在匿名函数中使用回调函数，统一this<br>                    obj.attachEvent(“on” + eventStr, function(){<br>                        // 在匿名函数中调用回调函数<br>                        callback.call(obj);<br>                    });<br>                }<br>            };<br><br>            window.onload = function(){<br>                var btn = document.getElementById(“btn”);<br>                bind(btn, “click”, function(){<br>                    alert(‘1’);<br>                });<br>                bind(btn, “click”, function(){<br>                    alert(‘2’);<br>                })<br><br>            };<br><br>        </script><br>    </head><br>    <body><br>        <button id="btn">弹出对话框</button><br>    </body><br></html>

<h3 id="浏览器默认拖拽行为"><a href="#浏览器默认拖拽行为" class="headerlink" title="浏览器默认拖拽行为"></a>浏览器默认拖拽行为</h3><p>我们拖拽一个网页中的内容时，浏览器会默认去搜索引擎中搜索内容，此时会导致拖拽功能异常。</p>
<ul>
<li>大部分浏览器中，通过return false取消浏览器默认行为。</li>
<li>IE8及以下，通过 “元素.setCapture(); ”事件捕获来实现，需要取消捕获。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">    // 为obj绑定按下事件</span><br><span class="line">    obj.onmousedown = function(event)&#123;</span><br><span class="line"></span><br><span class="line">    //设置obj捕获所有按下事件事件</span><br><span class="line">    /**</span><br><span class="line">     * setCapture()只在IE8及以下支持</span><br><span class="line">     */</span><br><span class="line">    obj.setCapture &amp;&amp; obj.setCapture();</span><br><span class="line"></span><br><span class="line">    // 为document绑定onmousemove事件</span><br><span class="line">    document.onmousemove = function(event)&#123;</span><br><span class="line">        ......</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // 当鼠标松开时,被拖拽元素固定在当前位置</span><br><span class="line">    // 为document绑定抬起事件,不能给obj</span><br><span class="line">    document.onmouseup = function()&#123;</span><br><span class="line"></span><br><span class="line">        // 取消onmousemove事件</span><br><span class="line">        document.onmousemove = null;</span><br><span class="line">        // 取消onmouseup事件</span><br><span class="line">        document.onmouseup = null;</span><br><span class="line"></span><br><span class="line">        // 取消obj的事件捕获</span><br><span class="line">        obj.releaseCapture &amp;&amp; obj.releaseCapture();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 当我们拖拽一个网页中的内容时，浏览器会默认去搜索引擎中搜索内容，此时会导致拖拽功能异常</span><br><span class="line">     * </span><br><span class="line">     * IE9及以上，通过return false取消浏览器默认行为</span><br><span class="line">     * IE8及以下，通过 元素.setCapture(); 事件捕获来实现，需要取消捕获</span><br><span class="line">     */</span><br><span class="line">    return false;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="DOM滚轮事件"><a href="#DOM滚轮事件" class="headerlink" title="DOM滚轮事件"></a>DOM滚轮事件</h3><p>onmousewheel鼠标滚轮滚动的事件，但是火狐不支持；在火狐中有一个DOMMouseScroll事件，并通过addEventListener()来绑定滚动事件。</p>
<p>判断鼠标滚轮方向：</p>
<ul>
<li>非火狐：event.wheelDelta，向上120,向下-120</li>
<li>火狐：event.detail，向上-3,向下3</li>
</ul>
<p>当滚轮滚动时，如果浏览器有滚动条，滚动条会随之滚动，取消浏览器滚轮默认行为：</p>
<ul>
<li>使用return false;取消默认行为。</li>
<li>使用addEventListener()方法绑定响应函数，需要使用event.preventDefault();来取消默认行为</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	#box1&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 多事件绑定，浏览器兼容</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">obj, eventStr, callback</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 兼容浏览器</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(obj.addEventListener)&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 大部分浏览器</span></span></span><br><span class="line"><span class="javascript">                    obj.addEventListener(eventStr, callback, <span class="literal">false</span>);</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// IE8及以下浏览器，并在匿名函数中使用回调函数，统一this</span></span></span><br><span class="line"><span class="javascript">                    obj.attachEvent(<span class="string">"on"</span> + eventStr, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 在匿名函数中调用回调函数</span></span></span><br><span class="line"><span class="undefined">                        callback.call(obj);</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 当鼠标滚轮向下滚动时，box1变长，反之变短</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 判断鼠标滚轮方向</span></span><br><span class="line"><span class="undefined">                 * 非火狐：event.wheelDelta，向上120,向下-120</span></span><br><span class="line"><span class="undefined">                 * 火狐：event.detail，向上-3,向下3</span></span><br><span class="line"><span class="undefined">                 */ </span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(event.wheelDelta &gt; <span class="number">0</span> || event.detail &lt; <span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="javascript">                    box1.style.height = box1.clientHeight - <span class="number">10</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    box1.style.height = box1.clientHeight + <span class="number">10</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 取消event默认行为</span></span><br><span class="line"><span class="undefined">                 * </span></span><br><span class="line"><span class="undefined">                 * 当滚轮滚动时，如果浏览器有滚动条，滚动条会随之滚动</span></span><br><span class="line"><span class="javascript">                 * 使用<span class="keyword">return</span> <span class="literal">false</span>;取消默认行为。</span></span><br><span class="line"><span class="undefined">                 * </span></span><br><span class="line"><span class="undefined">                 * 但是使用addEventListener()方法绑定响应函数，需要使用event来取消默认行为。</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(event.preventDefault)&#123;</span></span><br><span class="line"><span class="undefined">                    event.preventDefault();</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">        	<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取box</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 为box1绑定一个鼠标滚轮的事件,兼容非火狐浏览器</span></span></span><br><span class="line"><span class="undefined">                box1.onmousewheel = fun;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * onmousewheel鼠标滚轮滚动的事件，但是火狐不支持</span></span><br><span class="line"><span class="undefined">                 * </span></span><br><span class="line"><span class="undefined">                 * 在火狐中有一个DOMMouseScroll事件，并通过addEventListener()来绑定滚动事件</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                bind(box1, <span class="string">"DOMMouseScroll"</span>, fun);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"height: 2000px;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/01/前端-浏览器兼容/" data-id="cjs1ci11e002n6sutsxkvoo8l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/浏览器兼容/">浏览器兼容</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动端/">移动端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-前端-JavaScript基础-DOM基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/19/前端-JavaScript基础-DOM基础/" class="article-date">
  <time datetime="2019-01-19T08:21:26.000Z" itemprop="datePublished">2019-01-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/19/前端-JavaScript基础-DOM基础/">JavaScript基础_DOM基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目录：</p>
<ul>
<li>什么是DOM</li>
<li>节点Node</li>
<li>document对象</li>
<li>DOM对象方法实现增删改查<ul>
<li>appendChild() 添加子节点</li>
<li>insertbefore() 添加子节点</li>
<li>replaceChild() 替换子节点</li>
<li>removeChild() 删除子节点</li>
<li>parenNode() 获取父节点</li>
<li>innerHTML() 查看/修改节点内容</li>
<li>折中innerHTML()+appendChild()添加子节点。</li>
<li>综合案例</li>
</ul>
</li>
<li>DOM操作Css<ul>
<li>兼容浏览器</li>
</ul>
</li>
<li>事件<ul>
<li>常见的事件</li>
<li>事件对象event</li>
<li>event对象常见属性</li>
<li>浏览器兼容事件对象event</li>
<li>事件冒泡(Bubble)</li>
<li>事件的委派</li>
<li>多个事件的绑定<ul>
<li>addEventListener()</li>
<li>attachEvent()</li>
<li>浏览器兼容</li>
<li>事件的传播</li>
</ul>
</li>
<li>综合案例——鼠标事件之鼠标移动</li>
<li>综合案例——鼠标事件之拖拽</li>
<li>综合案例——鼠标事件之滚轮</li>
<li>综合案例——键盘事件</li>
</ul>
</li>
<li>类的操作</li>
</ul>
<hr>
<h3 id="什么是DOM"><a href="#什么是DOM" class="headerlink" title="什么是DOM"></a>什么是DOM</h3><p>DOM，由三个字符组成，全称Document Object Model文档对象模型。</p>
<p>JS中通过DOM来对HTML文档进行操作，只要理解了DOM就可以随心所欲的操作WEB页面。</p>
<ul>
<li>文档：文档表示的就是整个HTML网页文档</li>
<li>对象：表示网页中的每一个部分都转换为一个对象</li>
<li>模型：使用模型来表示对象之间的关系，这样方便我们获取对象</li>
</ul>
<p>DOM的模型树：</p>
<p><img src="/2019/01/19/前端-JavaScript基础-DOM基础/DOM-Tree.gif" alt="DOM文档树"></p>
<hr>
<h3 id="节点Node"><a href="#节点Node" class="headerlink" title="节点Node"></a>节点Node</h3><p>节点Node，是否城网页的最基本的组成部分，网页中的每一个部分都称为一个节点，如：html标签、属性、文本、注释、整个文档等。</p>
<p>常用节点分为四类：</p>
<ul>
<li>文档节点：整个HTML文档</li>
<li>元素节点：HTML文档中的标签</li>
<li>属性节点：元素的属性</li>
<li>文本节点：HTML标签中的文本内容</li>
</ul>
<hr>
<h3 id="document对象"><a href="#document对象" class="headerlink" title="document对象"></a>document对象</h3><p>浏览器已经为我们提供文档节点对象，这个对象时window属性，可以在页面中直接使用，文档节点代表的是整个网页。document对象就是我们的文档节点，就是整个网页。</p>
<p>我们可以通过document方法来获取整个网页，然后使用document的方法来控制网页。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            var btn = document.getElementById("btn");</span></span><br><span class="line"><span class="undefined">            btn.innerHTML = "I'm button";       // 修改btn的内部代码</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<font color="red"><br>注意此处的script写的地方，是在body中，button之后。由于浏览器在加载一个页面时，它是按代码自上而下的顺序加载的，如果此处的script写在button之前，script中的代码对象为空，无法加载，会报错。<br><br>如果非要将此处的script代码写在head中，也可以！！！不过需要将这部分代码在onload事件加载整个页面之后再执行。这样，虽然这部分代码被加载了，但是并没有执行，整个页面加载完成之后再执行，此时其中对应的对象就能正常获取了。<br><br>如果是独立的方法则无所谓，因为方法是在<br></font>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            window.onload = function()&#123;     // 整个页面加载完成之后执行的代码</span></span><br><span class="line"><span class="undefined">                var btn = document.getElementById("btn");</span></span><br><span class="line"><span class="undefined">                btn.innerHTML = "I'm button";       // 修改btn的内部代码</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="DOM对象方法实现增删改查"><a href="#DOM对象方法实现增删改查" class="headerlink" title="DOM对象方法实现增删改查"></a>DOM对象方法实现增删改查</h3><p>document对象包含的方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>具体描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>getElementById()</td>
<td>根据指定id属性值得到一个元素节点对象</td>
</tr>
<tr>
<td>getElementByName()</td>
<td>根据指定的Name属性值得到一组元素节点对象</td>
</tr>
<tr>
<td>getElementByTagName()</td>
<td>根据指定的标签名得到一组元素节点的对象</td>
</tr>
<tr>
<td>querySelector()</td>
<td>根据css选择器得到一个元素节点对象，支持IE8</td>
</tr>
<tr>
<td>querySelectorAll()</td>
<td>根据css选择器得到一组元素节点对象，支持IE8</td>
</tr>
<tr>
<td>appendChild()</td>
<td>把新的子节点添加到指定节点中</td>
</tr>
<tr>
<td>removeChild()</td>
<td>删除子节点</td>
</tr>
<tr>
<td>replaceChild()</td>
<td>替换子节点</td>
</tr>
<tr>
<td>insertBefore()</td>
<td>在指定的子节点前面插入新的子节点</td>
</tr>
<tr>
<td>createAttribute()</td>
<td>创建属性节点</td>
</tr>
<tr>
<td>createElement()</td>
<td>创建元素节点</td>
</tr>
<tr>
<td>createTextNode()</td>
<td>创建文本节点</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="appendChild-添加子节点"><a href="#appendChild-添加子节点" class="headerlink" title="appendChild() 添加子节点"></a>appendChild() 添加子节点</h4><p>向父节点中添加一个新的子节点。首先必须创建该元素，然后把它追加到已有的元素上，放在最后。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">父节点.appendChild(子节点);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建p标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementP = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建Text文本标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementText = <span class="built_in">document</span>.createTextNode(<span class="string">"123"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 将Text文本标签添加到p标签中 */</span></span></span><br><span class="line"><span class="undefined">                newElementP.appendChild(newElementText);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 获取id为div1的标签节点 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 父节点.appendChild(新节点); */</span></span></span><br><span class="line"><span class="undefined">                div1.appendChild(newElementP);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="insertbefore-添加子节点"><a href="#insertbefore-添加子节点" class="headerlink" title="insertbefore() 添加子节点"></a>insertbefore() 添加子节点</h4><p>在指定的子节点前面插入新的子节点。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建p标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementP = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建Text文本标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementText = <span class="built_in">document</span>.createTextNode(<span class="string">"New paragraph."</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 将Text文本标签添加到p标签中 */</span></span></span><br><span class="line"><span class="undefined">                newElementP.appendChild(newElementText);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 获取id为p1的标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 父容器.insertBrfor(新节点, 指定节点); */</span></span></span><br><span class="line"><span class="undefined">                div1.insertBefore(newElementP, p1);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is first paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>This is second paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">This is first paragraph.</span><br><span class="line">New paragraph.</span><br><span class="line">This is second paragraph.</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="replaceChild-替换子节点"><a href="#replaceChild-替换子节点" class="headerlink" title="replaceChild() 替换子节点"></a>replaceChild() 替换子节点</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建p标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementP = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建Text文本标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementText = <span class="built_in">document</span>.createTextNode(<span class="string">"New paragraph."</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 将Text文本标签添加到p标签中 */</span></span></span><br><span class="line"><span class="undefined">                newElementP.appendChild(newElementText);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 获取id为p1的标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 父容器.replaceChild(新节点, 旧节点); */</span></span></span><br><span class="line"><span class="undefined">                div1.replaceChild(newElementP, p1);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is first paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>This is second paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="removeChild-删除子节点"><a href="#removeChild-删除子节点" class="headerlink" title="removeChild() 删除子节点"></a>removeChild() 删除子节点</h4><p>删除指定子节点。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 获取id为p1的标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 父节点.removeChild(子节点) */</span></span></span><br><span class="line"><span class="undefined">                div1.removeChild(p1);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is first paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>This is second paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="parenNode-获取父节点"><a href="#parenNode-获取父节点" class="headerlink" title="parenNode() 获取父节点"></a>parenNode() 获取父节点</h4><p>因为节点的增删改都是父节点的属性，因此，为了方便获取某个节点的父节点，就有了通过子节点来查询父节点的操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">子节点.parentNode.xxxChild(子节点);</span><br></pre></td></tr></table></figure>
<p>这样要对某个节点进行删除之类的操作，就不同再单独获取它的父节点，就能进行了。</p>
<hr>
<h4 id="innerHTML-查看-修改节点内容"><a href="#innerHTML-查看-修改节点内容" class="headerlink" title="innerHTML() 查看/修改节点内容"></a>innerHTML() 查看/修改节点内容</h4><p>innerHTML()方法可以查看节点的内容，也可以给节点.innerHTML赋值修改内容。所以这种方式也可以实现添加删除的功能，但是动作比较大，有弊端，但是写法比较方便。所以，建议和上面的方法结合使用，而不是全部使用innerHTML方式添加内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 获取id为p1的标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 查看p1节点的内容 */</span></span></span><br><span class="line"><span class="undefined">                alert(p1.innerHTML);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 修改p1内容 */</span></span></span><br><span class="line"><span class="javascript">                p1.innerHTML = <span class="string">"New paragraph."</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is first paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>This is second paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="折中innerHTML-appendChild-添加子节点。"><a href="#折中innerHTML-appendChild-添加子节点。" class="headerlink" title="折中innerHTML()+appendChild()添加子节点。"></a>折中innerHTML()+appendChild()添加子节点。</h4><p>使用这种折中的方式实现添加节点，可以减少代码使用量，同时也不会大幅度改变代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建p标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementP = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 方法一： */</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 新建Text文本标签 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newElementText = <span class="built_in">document</span>.createTextNode(<span class="string">"New paragraph."</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 将Text文本标签添加到p标签中 */</span></span></span><br><span class="line"><span class="undefined">                newElementP.appendChild(newElementText);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 方法二： */</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 将新建完的p标签直接使用innerHTML添加文本内容。 */</span></span></span><br><span class="line"><span class="javascript">                newElementP.innerHTML = <span class="string">"New paragraph."</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 获取id为div1的标签节点 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 父节点.appendChild(新节点); */</span></span></span><br><span class="line"><span class="undefined">                div1.appendChild(newElementP);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h4><p><img src="/2019/01/19/前端-JavaScript基础-DOM基础/综合案例.jpg" alt="综合案例"><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>添加删除记录练习<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/css.css"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        </span></span><br><span class="line"><span class="javascript">            <span class="comment">/* 删除一行的响应函数 */</span></span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">Del</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 删除对应行</span></span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取当前tr，这里只能用this，获取当前的a</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> tr = <span class="keyword">this</span>.parentNode.parentNode;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取名字</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> name = tr.getElementsByTagName(<span class="string">"td"</span>)[<span class="number">0</span>].innerHTML;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 确认弹出框</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> flag = confirm(<span class="string">"是否确认删除"</span> + name);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 删除</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(flag)&#123;</span></span><br><span class="line"><span class="undefined">                    tr.parentNode.removeChild(tr);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 取消超链接默认行为</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">            <span class="comment">/* 添加员工信息 */</span></span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">Add</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取信息</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> name = <span class="built_in">document</span>.getElementById(<span class="string">"empName"</span>).value;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> email = <span class="built_in">document</span>.getElementById(<span class="string">"email"</span>).value;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> salary = <span class="built_in">document</span>.getElementById(<span class="string">"salary"</span>).value;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// alert(name + "," + email + "," + salary);</span></span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /* 纯DOM方法拼tr，复杂！！！</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 创建四个td</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newTdName = <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newTdEmail = <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newTdSalary = <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newA = <span class="built_in">document</span>.createElement(<span class="string">"td"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 创建一个a</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 添加td和a中的文本内容</span></span></span><br><span class="line"><span class="undefined">                newTdName.innerHTML = name;</span></span><br><span class="line"><span class="undefined">                newTdEmail.innerHTML = email;</span></span><br><span class="line"><span class="undefined">                newTdSalary.innerHTML = salary;</span></span><br><span class="line"><span class="javascript">                a.innerHTML = <span class="string">"Delete"</span>;</span></span><br><span class="line"><span class="javascript">                a.href = <span class="string">"javascript:;"</span></span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 为新加的a绑定删除事件</span></span></span><br><span class="line"><span class="undefined">                a.onclick = Del;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 将a添加到td中</span></span></span><br><span class="line"><span class="undefined">                newA.appendChild(a);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 创建tr，并将td添加到tr中</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newTr = <span class="built_in">document</span>.createElement(<span class="string">"tr"</span>);</span></span><br><span class="line"><span class="undefined">                newTr.appendChild(newTdName);</span></span><br><span class="line"><span class="undefined">                newTr.appendChild(newTdEmail);</span></span><br><span class="line"><span class="undefined">                newTr.appendChild(newTdSalary);</span></span><br><span class="line"><span class="undefined">                newTr.appendChild(newA);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">//alert(newTr.innerHTML);</span></span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                */</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 结合innerHTML,拼tr字符串,简单</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> newTr = <span class="built_in">document</span>.createElement(<span class="string">"tr"</span>);</span></span><br><span class="line"><span class="javascript">                newTr.innerHTML = <span class="string">"&lt;td&gt;"</span> + name + <span class="string">"&lt;/td&gt;"</span></span></span><br><span class="line"><span class="javascript">                                    + <span class="string">"&lt;td&gt;"</span> + email + <span class="string">"&lt;/td&gt;"</span></span></span><br><span class="line"><span class="javascript">                                    + <span class="string">"&lt;td&gt;"</span> + salary + <span class="string">"&lt;/td&gt;"</span></span></span><br><span class="line"><span class="xml">                                    + "<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'javascript:;'</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>";</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 给a绑定单击响应函数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> a = newTr.getElementsByTagName(<span class="string">"a"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="undefined">                a.onclick = Del;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取table</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> table = <span class="built_in">document</span>.getElementById(<span class="string">"employeeTable"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取tbody</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> tbody = table.getElementsByTagName(<span class="string">"tbody"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="undefined">                tbody.appendChild(newTr);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> allA = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 给当前的每一个a添加绑定事件 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; allA.length; i++)&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 注意for循环的执行和响应函数的执行顺序</span></span></span><br><span class="line"><span class="undefined">                    allA[i].onclick = Del;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">/* 添加员工的功能 */</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> botton = <span class="built_in">document</span>.getElementById(<span class="string">"addEmpButton"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 绑定点击事件</span></span></span><br><span class="line"><span class="undefined">                botton.onclick = Add;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"employeeTable"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>Salary<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Tom<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>tom@tom.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>5000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Jerry<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>jerry@sohu.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>8000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bob<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>bob@tom.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>10000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"formDiv"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h4</span>&gt;</span>添加新员工<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>name: <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"inp"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"empName"</span> <span class="attr">id</span>=<span class="string">"empName"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>email: <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"inp"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">id</span>=<span class="string">"email"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>salary: <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"inp"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"salary"</span> <span class="attr">id</span>=<span class="string">"salary"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"addEmpButton"</span>&gt;</span></span><br><span class="line">                            Submit</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="DOM操作Css"><a href="#DOM操作Css" class="headerlink" title="DOM操作Css"></a>DOM操作Css</h3><p>DOM中操作Css规则如下：</p>
<ul>
<li><p>设置内联样式CSS：元素.style.样式名 = “样式值”; </p>
</li>
<li><p>读取内联样式CSS：var a = 元素.style.样式名;       // 如：a = 200px；无法读取style样式表中的样式</p>
</li>
<li><p>获取当前有效样式：（只读，不可通过这种方式修改）</p>
<ul>
<li><p>IE8及以上：getComputedStyle(元素, 伪元素(null)).样式名;<br>  该方法返回一个对象，对象中封装了当前元素对应的样式，通过.样式名来读取样式。如果获取的样式没有设置，则返回获取到真实的值，而不是auto。<br>  颜色值返回的是rgb值。</p>
</li>
<li><p>IE8及以下：元素.currentStyle.样式名;</p>
</li>
</ul>
</li>
<li><p>如果CSS样式名中含有’-‘，如background-color，此时需要将这种有样式名改为驼峰命名法。</p>
</li>
</ul>
<p>我们通过这个方式设置的样式都是内联样式，有较高的优先级，通过JS修改的有样式会立即修改。但是如果在style样式表中写了’!important’，此时JS修改无效。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            #box1&#123;</span></span><br><span class="line"><span class="undefined">                width: 200px;</span></span><br><span class="line"><span class="undefined">                height: 200px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                /*</span></span><br><span class="line"><span class="undefined">                 * 点击按钮修改box1大小</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取box1</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 绑定单击响应函数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="javascript">                btn01.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 修改box1的宽度</span></span></span><br><span class="line"><span class="javascript">                    box1.style.width = <span class="string">"400px"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                    box1.style.backgroundColor = <span class="string">"aqua"</span>;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更多详见CSS手册：<a href="http://www.w3school.com.cn/cssref/index.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/cssref/index.asp</a></p>
<h4 id="兼容浏览器"><a href="#兼容浏览器" class="headerlink" title="兼容浏览器"></a>兼容浏览器</h4><p>从上可以知道，不同浏览器之间不兼容。而且，都写也会报错！！！所以要做到兼容，最好还是自己写。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/* </span><br><span class="line"> * 兼容IE8及常见浏览器</span><br><span class="line"> * obj：对象</span><br><span class="line"> * name：样式名字符串</span><br><span class="line"> * 返回值： 属性值字符串</span><br><span class="line"> */</span><br><span class="line">function getStyle(obj, name)&#123;</span><br><span class="line">    // 因为判断浏览器比较麻烦,所以我们通过判断是window中是否有getComputedStyle方法来判断使用哪种方式</span><br><span class="line">    if(window.getComputedStyle)&#123;</span><br><span class="line">        // 正常浏览器</span><br><span class="line">        return getComputedStyle(obj, null)[name];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // IE8</span><br><span class="line">        return obj.currentStyle[name];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>参考文档：<a href="http://www.w3school.com.cn/jsref/dom_obj_event.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jsref/dom_obj_event.asp</a></p>
<p>事件，就是文档或浏览器窗口中发生的一些特定的交互瞬间。JavaScript和HTML之间的交互式通过事件实现的。如，鼠标点击、鼠标移动、关闭窗口等。</p>
<p>我们可以在事件对应的属性中设置一些js代码，这样当事件触发时，这些代码将会执行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"alert('讨厌,点我干嘛')"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>为了解决结构和行为耦合，可以为按钮的对应事件绑定处理函数来响应事件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>"&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">"讨厌,点我干嘛"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">script|</span> &gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">bod|</span> <span class="attr">y</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="常见的事件"><a href="#常见的事件" class="headerlink" title="常见的事件"></a>常见的事件</h4><table>
<thead>
<tr>
<th>属性</th>
<th>事件发生时间</th>
</tr>
</thead>
<tbody>
<tr>
<td>onabort</td>
<td>图像的加载被中断。</td>
</tr>
<tr>
<td>onblur</td>
<td>元素失去焦点。</td>
</tr>
<tr>
<td>onchange</td>
<td>域的内容被改变。</td>
</tr>
<tr>
<td>onclick</td>
<td>当用户点击某个对象时调用的事件句柄。</td>
</tr>
<tr>
<td>ondblclick</td>
<td>当用户双击某个对象时调用的事件句柄。</td>
</tr>
<tr>
<td>onerror</td>
<td>在加载文档或图像时发生错误。</td>
</tr>
<tr>
<td>onfocus</td>
<td>元素获得焦点。</td>
</tr>
<tr>
<td>onkeydown</td>
<td>某个键盘按键被按下。</td>
</tr>
<tr>
<td>onkeypress</td>
<td>某个键盘按键被按下并松开。</td>
</tr>
<tr>
<td>onkeyup</td>
<td>某个键盘按键被松开。</td>
</tr>
<tr>
<td>onload</td>
<td>一张页面或一幅图像完成加载。</td>
</tr>
<tr>
<td>onmousedown</td>
<td>鼠标按钮被按下。</td>
</tr>
<tr>
<td>onmousemove</td>
<td>鼠标被移动。</td>
</tr>
<tr>
<td>onmouseout</td>
<td>鼠标从某元素移开。</td>
</tr>
<tr>
<td>onmouseover</td>
<td>鼠标移到某元素之上。</td>
</tr>
<tr>
<td>onmouseup</td>
<td>鼠标按键被松开。</td>
</tr>
<tr>
<td>onreset</td>
<td>重置按钮被点击。</td>
<td></td>
</tr>
<tr>
<td>onresize</td>
<td>窗口或框架被重新调整大小。</td>
</tr>
<tr>
<td>onselect</td>
<td>文本被选中。</td>
</tr>
<tr>
<td>onsubmit</td>
<td>确认按钮被点击。</td>
</tr>
<tr>
<td>onunload</td>
<td>用户退出页面。</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="事件对象event"><a href="#事件对象event" class="headerlink" title="事件对象event"></a>事件对象event</h4><p>当事件的响应函数被触发时，浏览器每次都会将一个事件对象作为实参传递进响应函数。在事件对象中封装了当前事件相关的一切信息，如，鼠标坐标、键盘按下、鼠标滚轮滚动方向……</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/* 其中event就是事件对象，也可以自命名 */</span><br><span class="line">对象.事件 = function(event)&#123;</span><br><span class="line">    x = event.clientX;      // 通过事件对象中的属性来获取值</span><br><span class="line">    y = event.clientY;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="event对象常见属性"><a href="#event对象常见属性" class="headerlink" title="event对象常见属性"></a>event对象常见属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>altKey</td>
<td>返回当事件被触发时，”ALT” 是否被按下。</td>
</tr>
<tr>
<td>button</td>
<td>返回当事件被触发时，哪个鼠标按钮被点击。</td>
</tr>
<tr>
<td>clientX</td>
<td>返回当事件被触发时，鼠标指针的水平坐标。</td>
</tr>
<tr>
<td>clientY</td>
<td>返回当事件被触发时，鼠标指针的垂直坐标。</td>
</tr>
<tr>
<td>ctrlKey</td>
<td>返回当事件被触发时，”CTRL” 键是否被按下。</td>
</tr>
<tr>
<td>metaKey</td>
<td>返回当事件被触发时，”meta” 键是否被按下。</td>
</tr>
<tr>
<td>relatedTarget</td>
<td>返回与事件的目标节点相关的节点。</td>
</tr>
<tr>
<td>screenX</td>
<td>返回当某个事件被触发时，鼠标指针的水平坐标。</td>
</tr>
<tr>
<td>screenY</td>
<td>返回当某个事件被触发时，鼠标指针的垂直坐标。</td>
</tr>
<tr>
<td>shiftKey</td>
<td>返回当事件被触发时，”SHIFT” 键是否被按下。</td>
</tr>
<tr>
<td>cancelBubble</td>
<td>如果事件句柄想阻止事件传播到包容对象，必须把该属性设为 true。</td>
</tr>
<tr>
<td>fromElement</td>
<td>对于 mouseover 和 mouseout 事件，fromElement 引用移出鼠标的元素。</td>
</tr>
<tr>
<td>keyCode</td>
<td>对于 keypress 事件，该属性声明了被敲击的键生成的 Unicode 字符码.对于 keydown 和 keyup 事件，它指定了被敲击的键的虚拟键盘码。虚拟键盘码可能和使用的键盘的布局相关。</td>
</tr>
<tr>
<td>offsetX,offsetY</td>
<td>发生事件的地点在事件源元素的坐标系统中的 x 坐标和 y 坐标。</td>
</tr>
<tr>
<td>returnValue</td>
<td>如果设置了该属性，它的值比事件句柄的返回值优先级高。把这个属性设置为 fasle，可以取消发生事件的源元素的默认动作。</td>
</tr>
<tr>
<td>srcElement</td>
<td>对于生成事件的 Window 对象、Document 对象或 Element 对象的引用。</td>
</tr>
<tr>
<td>toElement</td>
<td>对于 mouseover 和 mouseout 事件，该属性引用移入鼠标的元素。</td>
</tr>
<tr>
<td>x,y</td>
<td>事件发生的位置的 x 坐标和 y 坐标，它们相对于用CSS动态定位的最内。</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="浏览器兼容事件对象event"><a href="#浏览器兼容事件对象event" class="headerlink" title="浏览器兼容事件对象event"></a>浏览器兼容事件对象event</h4><p>在IE8中，响应函数被触发时，浏览器不会传递事件对象。在IE8及以下的浏览器中，是将事件对象作为window对象的属性保存的。火狐传递事件对象，不将事件对象保存到window中，所以，IE8与火狐之间发生冲突。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* 兼容一： */</span><br><span class="line">if(!event)&#123;</span><br><span class="line">    event = window.event;</span><br><span class="line">&#125; </span><br><span class="line">/* 兼容二：推荐 */</span><br><span class="line">event = event || window.event;</span><br><span class="line"></span><br><span class="line">var x = event.clientX;</span><br><span class="line">var y = event.clientY;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="事件冒泡-Bubble"><a href="#事件冒泡-Bubble" class="headerlink" title="事件冒泡(Bubble)"></a>事件冒泡(Bubble)</h4><p>所谓的事件冒泡，就是值子元素的向上传导，当后代元素上的事件被触发时，其祖先元素的相同事件也会被触发。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    		#box1&#123;</span></span><br><span class="line"><span class="undefined">    	        width: 200px;</span></span><br><span class="line"><span class="undefined">    	        height: 200px;</span></span><br><span class="line"><span class="undefined">    	        background-color: yellowgreen;</span></span><br><span class="line"><span class="undefined">    	    &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            #s1&#123;</span></span><br><span class="line"><span class="undefined">                background-color: yellow;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">    	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    	    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> s1 = <span class="built_in">document</span>.getElementById(<span class="string">"s1"</span>);</span></span><br><span class="line"><span class="javascript">                s1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'我是span的单击函数'</span>);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="javascript">                box1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'我是box的单击函数'</span>);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> body = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"body"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">                body.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'我是body的单击函数'</span>);</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">    	    &#125;;</span></span><br><span class="line"><span class="undefined">    	</span></span><br><span class="line"><span class="undefined">    	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span></span><br><span class="line">            我是box1</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"s1"</span>&gt;</span>我是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 依次弹出span、box、body对话框，其上html和document也会有事件冒泡 --&gt;</span></span><br></pre></td></tr></table></figure>
<p>在开发中，事件冒泡往往是有用的，而小部分时候有无用的或者有害的！这时候就要取消事件冒泡。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> s1 = <span class="built_in">document</span>.getElementById(<span class="string">"s1"</span>);</span></span><br><span class="line"><span class="javascript">            s1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 浏览器兼容</span></span></span><br><span class="line"><span class="javascript">                event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                alert(<span class="string">'我是span的单击函数'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 取消冒泡</span></span></span><br><span class="line"><span class="javascript">                event.cancelBubble = <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 依次弹出span、box、body对话框，其上html和document也会有事件冒泡 --&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="事件的委派"><a href="#事件的委派" class="headerlink" title="事件的委派"></a>事件的委派</h4><p>事件的委派：指将事件统一绑定给元素的共同的祖先元素，这样当后代元素上的事件触发时，会一直冒泡到祖先元素，从而通过祖先元素的响应函数来处理事件。事件委派是利用了冒泡，通过委派可以减少事件绑定的次数，提高程序的性能。</p>
<p>在以前的代码中，点击按钮添加超链接并绑定点击相应函数，当时的那种绑定方法比较麻烦，且性能不佳，这里我们使用事件的委派来实现相同的效果，使得代码效率提升。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    	    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                /* </span></span><br><span class="line"><span class="undefined">                 * 为所有超链接保定单击响应函数，这种方法比较麻烦，且性能不好</span></span><br><span class="line"><span class="undefined">                 * 只能绑定当前有的超链接</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> allA = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;allA.length; i++)&#123;</span></span><br><span class="line"><span class="javascript">                    allA[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        alert(<span class="string">'a的单击响应函数'</span>)</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                */</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                /* </span></span><br><span class="line"><span class="undefined">                 * 只绑定一次事件，即可应用到多个元素上，即时是后添加的</span></span><br><span class="line"><span class="undefined">                 * 可以尝试将其绑定给元素的共同祖先元素</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                ul.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                    event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 如果触发事件的对象是我们期望的元素,则执行</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(event.target.className == <span class="string">"link"</span>)&#123;</span></span><br><span class="line"><span class="javascript">                        alert(<span class="string">'我是ul的单击响应函数'</span>);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取ul</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> u1 = <span class="built_in">document</span>.getElementById(<span class="string">"ul"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="javascript">                btn01.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 创建li </span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> newLi = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span></span><br><span class="line"><span class="xml">                    newLi.innerHTML = "<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'javascript:;'</span> <span class="attr">class</span>=<span class="string">'link'</span>&gt;</span>新建的超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span>";</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 将li添加到ul中</span></span></span><br><span class="line"><span class="undefined">                    ul.appendChild(newLi);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">    	    &#125;</span></span><br><span class="line"><span class="undefined">    	</span></span><br><span class="line"><span class="undefined">    	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"ul"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"link"</span>&gt;</span>超链接一<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"link"</span>&gt;</span>超链接二<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"link"</span>&gt;</span>超链接三<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>添加超链接<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="多个事件的绑定"><a href="#多个事件的绑定" class="headerlink" title="多个事件的绑定"></a>多个事件的绑定</h4><p>使用 “对象.事件 = 函数” 的形式绑定响应函数，它只能同时为一个元素的一个事件绑定一个响应函数，如果绑定多个，则后面的会覆盖前面的。</p>
<p>有些时候元素需要一个绑定事件有多个响应函数，可以通过addEventListener()来绑定响应函数。</p>
<p>但是addEventListener()不支持IE8及以下。可以使用attachEvent()来绑定。</p>
<h5 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener()"></a>addEventListener()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">元素.addEventListener(string，function()&#123;&#125;, false);</span><br></pre></td></tr></table></figure>
<p>addEventListener()中的this，是绑定事件的对象。</p>
<p>效果：元素就能同时绑定多个响应函数，响应函数依次执行，且不会被覆盖。</p>
<p>参数：</p>
<ul>
<li>事件字符串：对应的事件，不要on。如果onclick事件，只填”click”即可。</li>
<li>回调函数：事件触发时该函数会被调用。</li>
<li>是否捕获阶段触发事件，一般都是false。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    	    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'1'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'2'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    	    &#125;</span></span><br><span class="line"><span class="undefined">    	</span></span><br><span class="line"><span class="undefined">    	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>弹出对话框<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="attachEvent"><a href="#attachEvent" class="headerlink" title="attachEvent()"></a>attachEvent()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">元素.attachEvent(string, function()&#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>attachEvent()中的this，是window。</p>
<p>效果：元素就能同时绑定多个响应函数，响应函数倒序执行，且不会被覆盖。</p>
<p>参数：</p>
<ul>
<li>事件字符串：对应的事件，必须要on。如果onclick事件，填”onclick”。</li>
<li>回调函数：事件触发时该函数会被调用。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    	    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.attachEvent(<span class="string">"onlick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'1'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                btn.attachEvent(<span class="string">"onclick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">'2'</span>);</span></span><br><span class="line"><span class="javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    	    &#125;</span></span><br><span class="line"><span class="undefined">    	</span></span><br><span class="line"><span class="undefined">    	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>弹出对话框<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="浏览器兼容并统一this"><a href="#浏览器兼容并统一this" class="headerlink" title="浏览器兼容并统一this"></a>浏览器兼容并统一this</h5><p>这里需要兼容的地方有两个，一个浏览器，一个this。自定义了一bind()函数来兼容。this的兼容需要重点理解。</p>
<html><br>    <head><br>        <meta charset="utf-8"><br>        <title></title><br><br>        <script type="text/javascript"><br><br>            /<em>
             </em> 参数：<br>             <em> obj: 要绑定的事件的对象
             </em> eventStr: 事件的字符串(不要on)<br>             <em> callback: 回调函数
             </em>/<br>            function bind(obj, eventStr, callback){<br>                /*<em>
                 </em> 兼容浏览器<br>                 */<br>                if(obj.addEventListener){<br>                    // 大部分浏览器<br>                    obj.addEventListener(eventStr, callback, false);<br>                } else {<br>                    // IE8及以下浏览器，并在匿名函数中使用回调函数，统一this<br>                    obj.attachEvent(“on” + eventStr, function(){<br>                        // 在匿名函数中调用回调函数<br>                        callback.call(obj);<br>                    });<br>                }<br>            };<br><br>            window.onload = function(){<br>                var btn = document.getElementById(“btn”);<br>                bind(btn, “click”, function(){<br>                    alert(‘1’);<br>                });<br>                bind(btn, “click”, function(){<br>                    alert(‘2’);<br>                })<br><br>            };<br><br>        </script><br>    </head><br>    <body><br>        <button id="btn">弹出对话框</button><br>    </body><br></html>

<hr>
<h4 id="事件的传播"><a href="#事件的传播" class="headerlink" title="事件的传播"></a>事件的传播</h4><p>W3C将事件的传播分成三个阶段：</p>
<ul>
<li>捕获阶段：在捕获阶段时从最外层的祖先元素，向目标元素进行事件的捕获，但是默认此时不会触发事件。</li>
<li>目标阶段：事件捕获到目标元素，捕获结束开始在目标元素上触发事件。</li>
<li>冒泡阶段：事件从目标元素向他的祖先元素传递，依次触发祖先元素上的事件。</li>
</ul>
<p>在IE9之上浏览器中，如果希望在捕获阶段就执行事件，可以将addEventListener()的第三个参数设置为true。一般情况下，我们不会希望在捕获阶段触发事件，所以这个参数一般为false。而在IE8及以下，没有捕获阶段。</p>
<hr>
<h4 id="综合案例——鼠标事件之鼠标移动"><a href="#综合案例——鼠标事件之鼠标移动" class="headerlink" title="综合案例——鼠标事件之鼠标移动"></a>综合案例——鼠标事件之鼠标移动</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	#box1&#123;</span></span><br><span class="line"><span class="undefined">                height: 200px;</span></span><br><span class="line"><span class="undefined">                width: 200px;</span></span><br><span class="line"><span class="undefined">                background-color: #87CEEB;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 获取鼠标在box1中的坐标，并在box2中显示出来</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box2 = <span class="built_in">document</span>.getElementById(<span class="string">"box2"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                box1.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 浏览器兼容</span></span></span><br><span class="line"><span class="javascript">                    event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 通过event事件对象获取鼠标坐标</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> x = event.clientX;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> y = event.clientY;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    box2.innerHTML = <span class="string">"x="</span> + x + <span class="string">", y="</span> + y;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此处忽略鼠标，gif没有弄进去</p>
<p><img src="/2019/01/19/前端-JavaScript基础-DOM基础/move.gif" alt="JavaScript基础-DOM基础/move.gif"></p>
<h4 id="综合案例——鼠标事件之拖拽"><a href="#综合案例——鼠标事件之拖拽" class="headerlink" title="综合案例——鼠标事件之拖拽"></a>综合案例——鼠标事件之拖拽</h4><p>拖拽事件的理解点在于事件对象选用哪个。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	#box1&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            #box2&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: yellow;</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="undefined">                /* 设置偏移量 */</span></span><br><span class="line"><span class="undefined">                top: 200px;</span></span><br><span class="line"><span class="undefined">                left: 200px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            body&#123;</span></span><br><span class="line"><span class="undefined">                margin: 0px;</span></span><br><span class="line"><span class="undefined">                padding: 0px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 拖拽方法</span></span><br><span class="line"><span class="undefined">             * obj: 要开启拖拽的元素</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">drag</span>(<span class="params">obj</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 拖拽obj元素</span></span><br><span class="line"><span class="undefined">                 * - 拖拽流程</span></span><br><span class="line"><span class="undefined">                 *      1. 当鼠标在被拖拽元素上按下时，开始拖拽</span></span><br><span class="line"><span class="undefined">                 *      2. 当鼠标移动时，被拖拽元素跟随鼠标移动</span></span><br><span class="line"><span class="undefined">                 *      3. 当鼠标松开时，被拖拽元素固定在当前位置</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 为obj绑定按下事件</span></span></span><br><span class="line"><span class="javascript">                obj.onmousedown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="comment">//设置obj捕获所有按下事件事件</span></span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * setCapture()只在IE8及以下支持</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="undefined">                    obj.setCapture &amp;&amp; obj.setCapture();</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 获取div的偏移量</span></span><br><span class="line"><span class="undefined">                     * offsetLeft: 获取的是当前对象左侧距离父对象左侧的值(均不包含border);</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> outLeft = event.clientX - obj.offsetLeft;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> outTop = event.clientY - obj.offsetTop;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 为document绑定onmousemove事件</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 获取鼠标的坐标</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> x = event.clientX;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> y = event.clientY;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 修改obj的位置,需要减去偏移量</span></span></span><br><span class="line"><span class="javascript">                        obj.style.left = x - outLeft + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                        obj.style.top = y - outTop + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">                    &#125;;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 当鼠标松开时,被拖拽元素固定在当前位置</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 为document绑定抬起事件,不能给obj</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.onmouseup = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 取消onmousemove事件</span></span></span><br><span class="line"><span class="javascript">                        <span class="built_in">document</span>.onmousemove = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 取消onmouseup事件</span></span></span><br><span class="line"><span class="javascript">                        <span class="built_in">document</span>.onmouseup = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 取消obj的事件捕获</span></span></span><br><span class="line"><span class="undefined">                        obj.releaseCapture &amp;&amp; obj.releaseCapture();</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 当我们拖拽一个网页中的内容时，浏览器会默认去搜索引擎中搜索内容，此时会导致拖拽功能异常</span></span><br><span class="line"><span class="undefined">                     * </span></span><br><span class="line"><span class="javascript">                     * IE9及以上，通过<span class="keyword">return</span> <span class="literal">false</span>取消浏览器默认行为</span></span><br><span class="line"><span class="undefined">                     * IE8及以下，通过 元素.setCapture(); 事件捕获来实现，需要取消捕获</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">        	<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取box</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box2 = <span class="built_in">document</span>.getElementById(<span class="string">"box2"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                drag(box1);</span></span><br><span class="line"><span class="undefined">                drag(box2);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/01/19/前端-JavaScript基础-DOM基础/drag.gif" alt="JavaScript基础-DOM基础/drag.gif"></p>
<hr>
<h4 id="综合案例——鼠标事件之滚轮"><a href="#综合案例——鼠标事件之滚轮" class="headerlink" title="综合案例——鼠标事件之滚轮"></a>综合案例——鼠标事件之滚轮</h4><p>onmousewheel鼠标滚轮滚动的事件，但是火狐不支持；在火狐中有一个DOMMouseScroll事件，并通过addEventListener()来绑定滚动事件。</p>
<p>判断鼠标滚轮方向：</p>
<ul>
<li>非火狐：event.wheelDelta，向上120,向下-120</li>
<li>火狐：event.detail，向上-3,向下3</li>
</ul>
<p>当滚轮滚动时，如果浏览器有滚动条，滚动条会随之滚动，取消浏览器滚轮默认行为：</p>
<ul>
<li>使用return false;取消默认行为。</li>
<li>使用addEventListener()方法绑定响应函数，需要使用event.preventDefault();来取消默认行为</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	#box1&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 多事件绑定，浏览器兼容</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">obj, eventStr, callback</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 兼容浏览器</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(obj.addEventListener)&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 大部分浏览器</span></span></span><br><span class="line"><span class="javascript">                    obj.addEventListener(eventStr, callback, <span class="literal">false</span>);</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// IE8及以下浏览器，并在匿名函数中使用回调函数，统一this</span></span></span><br><span class="line"><span class="javascript">                    obj.attachEvent(<span class="string">"on"</span> + eventStr, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 在匿名函数中调用回调函数</span></span></span><br><span class="line"><span class="undefined">                        callback.call(obj);</span></span><br><span class="line"><span class="undefined">                    &#125;);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 当鼠标滚轮向下滚动时，box1变长，反之变短</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 判断鼠标滚轮方向</span></span><br><span class="line"><span class="undefined">                 * 非火狐：event.wheelDelta，向上120,向下-120</span></span><br><span class="line"><span class="undefined">                 * 火狐：event.detail，向上-3,向下3</span></span><br><span class="line"><span class="undefined">                 */ </span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(event.wheelDelta &gt; <span class="number">0</span> || event.detail &lt; <span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="javascript">                    box1.style.height = box1.clientHeight - <span class="number">10</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    box1.style.height = box1.clientHeight + <span class="number">10</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 取消event默认行为</span></span><br><span class="line"><span class="undefined">                 * </span></span><br><span class="line"><span class="undefined">                 * 当滚轮滚动时，如果浏览器有滚动条，滚动条会随之滚动</span></span><br><span class="line"><span class="javascript">                 * 使用<span class="keyword">return</span> <span class="literal">false</span>;取消默认行为。</span></span><br><span class="line"><span class="undefined">                 * </span></span><br><span class="line"><span class="undefined">                 * 但是使用addEventListener()方法绑定响应函数，需要使用event来取消默认行为。</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(event.preventDefault)&#123;</span></span><br><span class="line"><span class="undefined">                    event.preventDefault();</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">        	<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取box</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 为box1绑定一个鼠标滚轮的事件,兼容非火狐浏览器</span></span></span><br><span class="line"><span class="undefined">                box1.onmousewheel = fun;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * onmousewheel鼠标滚轮滚动的事件，但是火狐不支持</span></span><br><span class="line"><span class="undefined">                 * </span></span><br><span class="line"><span class="undefined">                 * 在火狐中有一个DOMMouseScroll事件，并通过addEventListener()来绑定滚动事件</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                bind(box1, <span class="string">"DOMMouseScroll"</span>, fun);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"height: 2000px;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/01/19/前端-JavaScript基础-DOM基础/scroll.gif" alt="JavaScript基础-DOM基础/scroll.gif"></p>
<hr>
<h4 id="综合案例——键盘事件"><a href="#综合案例——键盘事件" class="headerlink" title="综合案例——键盘事件"></a>综合案例——键盘事件</h4><p>键盘事件一般都会绑定给一些可以<font color="red">获取到焦点的对象</font>或者<font color="red">document</font>。给div之类的对象绑定毫无意义，且没有响应！</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 键盘事件：</span></span><br><span class="line"><span class="undefined">                 *  onkeydown：键盘被按下。</span></span><br><span class="line"><span class="undefined">                 *      如果长按，事件会被连续触发。连续触发时，第一次与第二次之间会间隔稍长，之后会非常快，这是为了防止长按误操作！</span></span><br><span class="line"><span class="undefined">                 *  onkeyup：键盘被松开。</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    event = event || event;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 通过keyCode属性获取按下的键的unicode编码</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(event.keyCode);</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 功能键：</span></span><br><span class="line"><span class="javascript">                     *  altKey: <span class="string">"ALT"</span> 是否被按下，返回boolean值。</span></span><br><span class="line"><span class="javascript">                     *  ctrlKey：<span class="string">"CTRL"</span> 键是否被按下，返回boolean值。</span></span><br><span class="line"><span class="javascript">                     *  shiftKey：<span class="string">"SHIFT"</span> 键是否被按下，返回boolean值。</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(event.keyCode == <span class="number">65</span> &amp;&amp; event.altKey)&#123;</span></span><br><span class="line"><span class="javascript">                        alert(<span class="string">'同时按下a和alt'</span>);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用键盘按键控制div移动：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            #box1&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    event = event || event;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> speed = <span class="number">5</span>;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(event.ctrlKey)&#123;</span></span><br><span class="line"><span class="undefined">                        speed = 10;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 37 左</span></span><br><span class="line"><span class="undefined">                     * 38 上</span></span><br><span class="line"><span class="undefined">                     * 39 又</span></span><br><span class="line"><span class="undefined">                     * 40 下</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">switch</span>(event.keyCode)&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">case</span> <span class="number">37</span>:</span></span><br><span class="line"><span class="javascript">                            box1.style.left = box1.offsetLeft - speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">case</span> <span class="number">38</span>:</span></span><br><span class="line"><span class="javascript">                            box1.style.top = box1.offsetTop - speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">case</span> <span class="number">39</span>:</span></span><br><span class="line"><span class="javascript">                            box1.style.left = box1.offsetLeft + speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">case</span> <span class="number">40</span>:</span></span><br><span class="line"><span class="javascript">                            box1.style.top = box1.offsetTop + speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * bug:</span></span><br><span class="line"><span class="undefined">                     * 这里还有一个小问题，就是长按时候的第一次与第二次间隔稍长。</span></span><br><span class="line"><span class="undefined">                     * 这是浏览器默认行为，需要定时器才能取消。见BOM基础！</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="类的操作"><a href="#类的操作" class="headerlink" title="类的操作"></a>类的操作</h3><p>类的操作，通过修改或者叠加类，可以修改样式，降低代码耦合，提高性能。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	.box1&#123;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: red;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .box2&#123;</span></span><br><span class="line"><span class="undefined">                /* height: 200px; */</span></span><br><span class="line"><span class="undefined">                width: 200px;</span></span><br><span class="line"><span class="undefined">                background-color: yellow;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">        	<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                btn01.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 有以下两种方式修改box的样式</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 第一种：</span></span><br><span class="line"><span class="undefined">                     *      通过style属性来修改元素的样式，每修改一个样式，浏览器就需要重新渲染一次页面。</span></span><br><span class="line"><span class="undefined">                     *  这样的执行性能比较差，而且这种形式修改多个样式时，不太方便。并且会导致行为与表现的耦合。</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript"><span class="comment">//                     box.style.width = "200px";</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//                     box.style.height = "200px";</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//                     box.style.backgroundColor = "yellow";</span></span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 第二种：</span></span><br><span class="line"><span class="javascript">                     *      修改<span class="class"><span class="keyword">class</span>属性来修改样式，这样一来，只需要修改一次即可修改多个样式，浏览器只需要重新渲染一次页面即可，性能较高。</span></span></span><br><span class="line"><span class="undefined">                     *  并且这种方式可以使表现和行为进一步分离。</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 在类中添加一个类</span></span></span><br><span class="line"><span class="javascript">                    addClass(box, <span class="string">"box2"</span>);</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 移除一个类</span></span></span><br><span class="line"><span class="javascript">                    removeClass(box, <span class="string">"box2"</span>);</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 切换类</span></span></span><br><span class="line"><span class="javascript">                    toggleClss(box, <span class="string">"box2"</span>);</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 添加类</span></span><br><span class="line"><span class="undefined">                     * 参数：</span></span><br><span class="line"><span class="undefined">                     *  obj：对象</span></span><br><span class="line"><span class="undefined">                     *  cn: 类名</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">obj, cn</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="keyword">if</span>(!hasClass(obj, cn))&#123;</span></span><br><span class="line"><span class="javascript">                            obj.className += <span class="string">" "</span> + cn;</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 类去重</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">obj, cn</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 判断obj中有没有cn这个类</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 使用构造函数拼接动态正则表达式</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\b"</span> + cn + <span class="string">"\\b"</span>);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="keyword">return</span> reg.test(obj.className);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="javascript">                     * 删除一个元素中指定的<span class="class"><span class="keyword">class</span>属性</span></span></span><br><span class="line"><span class="undefined">                     * 参数：</span></span><br><span class="line"><span class="undefined">                     *  obj：对象</span></span><br><span class="line"><span class="undefined">                     *  cn: 类名</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">obj, cn</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 正则表达式</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\b"</span> + cn + <span class="string">"\\b"</span>);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 删除class</span></span></span><br><span class="line"><span class="javascript">                        obj.className = obj.className.replace(reg, <span class="string">""</span>);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="undefined">                    /**</span></span><br><span class="line"><span class="undefined">                     * 切换类</span></span><br><span class="line"><span class="undefined">                     *  如果元素中具有该类，则删除；如果没有则添加</span></span><br><span class="line"><span class="undefined">                     */</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span> <span class="title">toggleClss</span>(<span class="params">obj, cn</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 判断是否有cn</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">if</span> (hasClass(obj, cn)) &#123;</span></span><br><span class="line"><span class="undefined">                        	removeClass(obj, cn)</span></span><br><span class="line"><span class="javascript">                        &#125; <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="undefined">                        	addClass(obj, cn)</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>点击按钮以后修改box的样式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="综合案例——二级菜单"><a href="#综合案例——二级菜单" class="headerlink" title="综合案例——二级菜单"></a>综合案例——二级菜单</h3><p>此案例结合类的操作、动画、延时操作等实现。动画、延时操作可见博客“前端-JavaScript基础-BOM基础”，tool工具类见“前端-JavaScript基础-tool工具”。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        	* &#123;</span></span><br><span class="line"><span class="undefined">                margin: 0;</span></span><br><span class="line"><span class="undefined">                padding: 0;</span></span><br><span class="line"><span class="undefined">                list-style-type: none;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            a, img&#123;</span></span><br><span class="line"><span class="undefined">                border: 0;</span></span><br><span class="line"><span class="undefined">                text-decoration: none;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            body&#123;</span></span><br><span class="line"><span class="undefined">                font: 12px/180% "arial, helvetica, sans-serif", "新宋体";</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .sdmenu&#123;</span></span><br><span class="line"><span class="undefined">                margin: 0 auto;</span></span><br><span class="line"><span class="undefined">                width: 150px;</span></span><br><span class="line"><span class="undefined">                font-family: Arial, sans-serif;</span></span><br><span class="line"><span class="undefined">                font-size: 12px;</span></span><br><span class="line"><span class="undefined">                background: url(css/bottom.gif) no-repeat right bottom;</span></span><br><span class="line"><span class="undefined">                padding-bottom: 10px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .sdmenu div&#123;</span></span><br><span class="line"><span class="undefined">                background: url(css/title.gif);</span></span><br><span class="line"><span class="undefined">                overflow: hidden;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .sdmenu div:first-child&#123;</span></span><br><span class="line"><span class="undefined">                background: url(css/toptitle.gif) no-repeat;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .sdmenu div span&#123;</span></span><br><span class="line"><span class="undefined">                color: #fff;</span></span><br><span class="line"><span class="undefined">                padding: 5px 10px;</span></span><br><span class="line"><span class="undefined">                font-weight: bold;</span></span><br><span class="line"><span class="undefined">                font-size: 12px;</span></span><br><span class="line"><span class="undefined">                background: url(css/expanded.gif) no-repeat 10px center;</span></span><br><span class="line"><span class="undefined">                padding: 5px 25px;</span></span><br><span class="line"><span class="undefined">                height: 15px;</span></span><br><span class="line"><span class="undefined">                cursor: pointer;</span></span><br><span class="line"><span class="undefined">                border-bottom: 1px solid #ddd;</span></span><br><span class="line"><span class="undefined">                display: block;</span></span><br><span class="line"><span class="undefined">                line-height: 15px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .sdmenu div.collapsed span&#123;</span></span><br><span class="line"><span class="undefined">                background: url(css/collapsed.gif) no-repeat 10px center;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .sdmenu div a&#123;</span></span><br><span class="line"><span class="undefined">                display: block;</span></span><br><span class="line"><span class="undefined">                background: #eee;</span></span><br><span class="line"><span class="undefined">                border-bottom: 1px solid #ddd;</span></span><br><span class="line"><span class="undefined">                padding: 5px 10px;</span></span><br><span class="line"><span class="undefined">                color: #066;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .sdmenu div a:hover&#123;</span></span><br><span class="line"><span class="undefined">                background: #066 url(css/linkarrow.gif) no-repeat right center;</span></span><br><span class="line"><span class="undefined">                color: #fff;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .sdmenu div.collapsed&#123;</span></span><br><span class="line"><span class="undefined">                height: 25px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>   </span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"tool.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">        	<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 每一个菜单都是一个div</span></span><br><span class="line"><span class="undefined">                 * 当div有collapsed类时，折叠，反之展开</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                /**</span></span><br><span class="line"><span class="undefined">                 * 点击菜单，切换菜单的显示状态</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 获取class为menuSpan的元素</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> menuSpan = <span class="built_in">document</span>.querySelectorAll(<span class="string">".menuSpan"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 保存当前打开的菜单</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> openDiv = menuSpan[<span class="number">0</span>].parentNode;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 为span绑定菜单点击函数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;menuSpan.length; i++)&#123;</span></span><br><span class="line"><span class="undefined">                    </span></span><br><span class="line"><span class="javascript">                    menuSpan[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// this代表当前点击的span,获取span的父元素</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> parentDiv = <span class="keyword">this</span>.parentNode;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 切换菜单显示状态</span></span></span><br><span class="line"><span class="undefined">                        toggleMenu(parentDiv);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 为了可以和之前的toggleClass可以使用同一个动画效果,这里不使用用addClass</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 只让toggleClass执行添加的作用,只要不进判断就行了</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">if</span>(openDiv != parentDiv &amp;&amp; !hasClass(openDiv, <span class="string">"collapsed"</span>))&#123;</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// 关闭之前打开的菜单</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">// addClass(openDiv, "collapsed");</span></span></span><br><span class="line"><span class="undefined">                            toggleMenu(openDiv);</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 更新openDiv</span></span></span><br><span class="line"><span class="undefined">                        openDiv = parentDiv;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            /**</span></span><br><span class="line"><span class="undefined">             * 切换菜单的折叠和显示状态</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">toggleMenu</span>(<span class="params">obj</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 切换之前获取元素的高度</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> begin = obj.offsetHeight;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 开/关div</span></span></span><br><span class="line"><span class="javascript">                toggleClass(obj, <span class="string">"collapsed"</span>);</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// 切换之后获取一个高度</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> end = obj.offsetHeight;</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">// alert(begin + " " + end);</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 动画效果就是从begin到end过度</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 将元素的高度重置到begin,然后添加动画效果</span></span></span><br><span class="line"><span class="javascript">                obj.style.height = begin + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">                move(obj, <span class="string">"height"</span>, <span class="number">30</span>, end, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 动画执行完毕，清除内联样式</span></span></span><br><span class="line"><span class="javascript">                    obj.style.height = <span class="string">""</span>;</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"my_menu"</span> <span class="attr">class</span>=<span class="string">"sdmenu"</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"menuSpan"</span>&gt;</span>第一个二级菜单<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collapsed"</span>&gt;</span></span><br><span class="line">            	<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"menuSpan"</span>&gt;</span>第二个二级菜单<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collapsed"</span>&gt;</span></span><br><span class="line">            	<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"menuSpan"</span>&gt;</span>第三个二级菜单<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collapsed"</span>&gt;</span></span><br><span class="line">            	<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"menuSpan"</span>&gt;</span>第四个二级菜单<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collapsed"</span>&gt;</span></span><br><span class="line">            	<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"menuSpan"</span>&gt;</span>第五个二级菜单<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>图片资源如下：</p>
<p>bottom.gif：<br><img src="/2019/01/19/前端-JavaScript基础-DOM基础/bottom.gif" alt="JavaScript基础-DOM基础/bottom.gif"></p>
<p>collapsed.gif：<img src="/2019/01/19/前端-JavaScript基础-DOM基础/collapsed.gif" alt="JavaScript基础-DOM基础/collapsed.gif"></p>
<p>expanded.gif：<img src="/2019/01/19/前端-JavaScript基础-DOM基础/expanded.gif" alt="JavaScript基础-DOM基础/expanded.gif"></p>
<p>linkarrow.gif：<img src="/2019/01/19/前端-JavaScript基础-DOM基础/linkarrow.gif" alt="JavaScript基础-DOM基础/linkarrow.gif"></p>
<p>title.gif：<img src="/2019/01/19/前端-JavaScript基础-DOM基础/title.gif" alt="JavaScript基础-DOM基础/title.gif"></p>
<p>toptitle.gif：<img src="/2019/01/19/前端-JavaScript基础-DOM基础/toptitle.gif" alt="JavaScript基础-DOM基础/toptitle.gif"></p>
<p>二级菜单：</p>
<p><img src="/2019/01/19/前端-JavaScript基础-DOM基础/二级菜单.gif" alt="JavaScript基础-DOM基础/二级菜单.gif"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/19/前端-JavaScript基础-DOM基础/" data-id="cjs1ci116002g6sut76xzbv5h" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端，DOM/">前端，DOM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-前端-JavaScript基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/18/前端-JavaScript基础/" class="article-date">
  <time datetime="2018-12-18T12:57:31.000Z" itemprop="datePublished">2018-12-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/18/前端-JavaScript基础/">JavaScript基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>JavaScript目录：</p>
<ul>
<li>JS简介</li>
<li>JS的HelloWorld</li>
<li>JS编写位置</li>
<li>JS基本语法<ul>
<li>JS注释</li>
<li>数据类型</li>
<li>字面量（常量）和变量</li>
<li>标识符</li>
<li>强制类型转换</li>
<li>运算符</li>
</ul>
</li>
<li>对象<ul>
<li>创建对象</li>
<li>对象的 in 运算符</li>
<li>工厂方法创建对象</li>
<li>原型对象</li>
<li>查询对象中属性</li>
</ul>
</li>
<li>函数<ul>
<li>自定义函数声明</li>
<li>函数调用</li>
<li>立即执行函数</li>
<li>函数对象方法：call()和apply()</li>
</ul>
</li>
<li>作用域</li>
<li>声明提前</li>
<li>隐含参数：this</li>
<li>toString方法</li>
<li>垃圾回收(GC)</li>
<li>数组（Array）<ul>
<li>创建数组</li>
<li>数组存取</li>
<li>数组长度</li>
<li>数组遍历</li>
<li>数组去重</li>
</ul>
</li>
<li>隐含参数：arguments</li>
<li>Math工具类<ul>
<li>ceil()向上取整方法</li>
<li>floor()向下取整方法</li>
<li>round()四舍五入方法</li>
<li>random()生成0到1随机数方法</li>
<li>max()和min()最大最小方法</li>
</ul>
</li>
<li>包装类<ul>
<li>String()对象</li>
</ul>
</li>
</ul>
<hr>
<h3 id="JS简介"><a href="#JS简介" class="headerlink" title="JS简介"></a>JS简介</h3><p>JavaScript诞生于1995年，它的出现主要是用于处理网页中的前端验证。所谓的前端验证，就是指检查用户输入的内容是否符合一定的规则。</p>
<p>时至今日，JS已经不仅仅是前端验证了。还有网页动态效果、后端NodeJS等。</p>
<p>一个完整的JavaScript包括三个部分：ECMAScript、DOM和BOM。</p>
<p>JS的特点：</p>
<ol>
<li>解释型语言</li>
<li>类似于C和Java的语法结构</li>
<li>动态语言</li>
<li>基于原型的面向对象</li>
</ol>
<hr>
<h3 id="JS的HelloWorld"><a href="#JS的HelloWorld" class="headerlink" title="JS的HelloWorld"></a>JS的HelloWorld</h3><p>页面中有三条输出指令，JS代码是从上到下一条一条执行的。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">/* 控制浏览器弹出一个警告框 */</span></span></span><br><span class="line"><span class="javascript">            alert(<span class="string">"Hello World!"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">/* 向body中添加一个内容 */</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.write(<span class="string">"Hello World!"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">/* 向控制输出一个内容 */</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">"Hello World!"</span>);</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>控制浏览器弹出一个警告框：<br><img src="/2018/12/18/前端-JavaScript基础/helloworld.jpg" alt=""></p>
<p>向body中添加一个内容：<br><img src="/2018/12/18/前端-JavaScript基础/helloworld1.jpg" alt=""></p>
<p>向控制输出一个内容：<br><img src="/2018/12/18/前端-JavaScript基础/helloworld2.jpg" alt=""></p>
<hr>
<h3 id="JS编写位置"><a href="#JS编写位置" class="headerlink" title="JS编写位置"></a>JS编写位置</h3><ul>
<li><p>JS代码写在script标签中。<br>  就像上面写hello world一样，在html的head部分添加script标签，将JS代码写到script标签中。</p>
</li>
<li><p>JS代码写在标签的onclick属性中</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 当点击按钮的时候，JS代码才会执行 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"alert('Hello World!');"</span>&gt;</span>你点我一下<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>JS代码卸载超链接的href属性中</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:alert('Hello World!');"</span>&gt;</span>你点我一下<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>JS写在外部文件中，在html页面中引入</p>
<p>  html页面：</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/myjs.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  myjs.js:</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">"Hello World!"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="JS基本语法"><a href="#JS基本语法" class="headerlink" title="JS基本语法"></a>JS基本语法</h3><h4 id="JS注释"><a href="#JS注释" class="headerlink" title="JS注释"></a>JS注释</h4><p>要养成良好的编写注释的习惯，也可以通过注释来对代码进行一些简单的调试，就是删掉……</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 单行注释</span></span><br></pre></td></tr></table></figure>
<h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>JS包含五中基本数据类型和一个引用数据类型Object：</p>
<ol>
<li>Undefined<br> Undefined类型只有一个，就是undefined。</li>
<li>Null<br> 空值，如果引用一个没有定义的变量，则返回空值，只有一个值，就是null。</li>
<li>Boolean<br> 布尔类型，包含true和false，或者1和0。</li>
<li>String<br> 字符串类型，由单引号或者双引号括起来的字符。</li>
<li>Number<br> 数值类型，可以是32位、64位整数或浮点数。Number.MAX_VALUE表示最大值，Number.MIN_VALUE表示最小值。</li>
</ol>
<p>基本数据类型的值直接在栈内存中存储。</p>
<p>对象是保存在堆内存中的，每创建一个新的对象，就会在堆内存中开辟出一个新的空间，而栈内存中保存的是对象值在堆中的内存地址。</p>
<h4 id="字面量（常量）和变量"><a href="#字面量（常量）和变量" class="headerlink" title="字面量（常量）和变量"></a>字面量（常量）和变量</h4><p>常量是不可改变的值，可以直接使用，但是一般我们不会直接使用，因为有一些比较麻烦。</p>
<p>变量是内存中命名的存储位置，可以在程序中设置和修改变量的值。在开发中都是通过变量去保存一个常量。</p>
<p>声明变量：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在JS中使用var关键字来声明变量</span></span><br><span class="line"><span class="keyword">var</span> x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为变量赋值常量</span></span><br><span class="line">x = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用变量</span></span><br><span class="line"><span class="built_in">document</span>.write(y);</span><br></pre></td></tr></table></figure></p>
<p>可以使用变量来描述常量。</p>
<h4 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h4><p>在JS中所有可以由我们自主命名的都可以成为标识符，例如：变量名、函数名、属性名都属于标识符。</p>
<p>命名一个标识符时需要遵守如下的规则：</p>
<ul>
<li>标识符中可以含有字母、数字、下划线和$符。</li>
<li>标识符不能以数字开头</li>
<li>标识符不能是ES中的关键字或保留字</li>
<li>标识符一般采用驼峰命名法</li>
<li>JS底层保存标识符时实际上采用的是Unicode编码，所以理论上讲，所有的utf-8中含有的内容都可以作为标识符，比如中文，但是一般不会这样用</li>
</ul>
<h4 id="强制类型转换"><a href="#强制类型转换" class="headerlink" title="强制类型转换"></a>强制类型转换</h4><ol>
<li><p>将其他类型转换为String</p>
<ul>
<li>方法一：调用被转换数据类型的toString()方法，该方法将返回转换的结果，其本身不变。null和undefinded没有toString()方法。</li>
<li>方法二：调用String()函数，并将被转换的数据作为参数传递给函数。对于Number和Boolean实际上就是调用toString()方法，对于null和undefinded，直接转换。  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用a的toString()方法，并重置a，a为null或undefinded时报错</span></span><br><span class="line">a = a.toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用String()方法，并重置a</span></span><br><span class="line">a = <span class="built_in">String</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);      <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(a);             <span class="comment">// "123"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>将其他的数据类型转换为Number</p>
<ul>
<li><p>方法一：使用Number()函数。</p>
<ul>
<li>字符串 -&gt; 数字：<ul>
<li>如果是纯数字的字符串，则直接转换为数字；</li>
<li>如果有非数字的字符串，则准换为NaN；</li>
<li>如果是空字符串或者空格字符串，则转换为0。</li>
</ul>
</li>
<li>布尔值 -&gt; 数字：<ul>
<li>true 转 1</li>
<li>false 转 0</li>
</ul>
</li>
<li>Null -&gt; 数字：0</li>
<li><p>undefined -&gt; 数字：NaN</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"123"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用String()方法，并重置a</span></span><br><span class="line">a = <span class="built_in">Number</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);      <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(a);             <span class="comment">// "123"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>方法二：专门对付字符串。</p>
<ul>
<li>parseInt() 把一个字符串转换为整数，将字符串中的有效的整数内容取出来（当出现非数字就停止），然后转换为Number。</li>
<li>parseFrom() 把一个字符串转换为浮点数，将字符串中的有效的小数内容取出来（当出现非数字和小数点就停止），然后转换为Number。</li>
<li><p>以上两种方法，对于非String类型，会先转换为String，然后再操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"123a234px"</span>;</span><br><span class="line"></span><br><span class="line">a = <span class="built_in">parseInt</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);      <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(a);             <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"12.345px"</span>;</span><br><span class="line"></span><br><span class="line">b = <span class="built_in">parseFloat</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);      <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(b);             <span class="comment">// 12.345</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>将其他的数据类型转换为Boolean</p>
<ul>
<li>方法一：使用Boolean()函数。<ul>
<li>数字 -&gt; 布尔：除了0和NaN，其余的都是true。</li>
<li>字符串 -&gt; 布尔：除了空串，其余的都是true。</li>
<li>null和undefined -&gt; 布尔：false。</li>
<li>对象 -&gt; 布尔：true。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><p>运算符也叫操作符，通过运算符可以对一个或多个值进行运算，并获取运算结果。</p>
<ul>
<li><p>typeof</p>
<p>  可以用来获得一个值的类型，它会将该值的类型以字符串的形式返回。</p>
<p>  number、string、boolean、undefined、object</p>
</li>
<li><p>“+”、”-“</p>
<p>  正号不会对数字产生任何影响，符号可以对数字进行负号的取反。</p>
<p>  在运算时，对于非number类型的值，它会将值先转换为number，然后再运算。可以对一个其他的数据类型使用“+”，来将其转换为number类型。其原理和Number()函数一样。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="number">1</span> + +<span class="string">"2"</span> + <span class="number">3</span>;</span><br><span class="line">        </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"result = "</span> + result);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>……</p>
<hr>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>对象的分类：</p>
<ol>
<li><p>内建对象</p>
<ul>
<li>由ES标准中定义的对象，在任何的ES的实现中都可以使用。如：Math、String、Number、Boolean、Function、Object…</li>
</ul>
</li>
<li><p>宿主对象</p>
<ul>
<li>由JS的运行环境提供的对象，目前来讲主要是指浏览器提供的对象。如BOM、DOM…</li>
</ul>
</li>
<li><p>自定义对象</p>
<ul>
<li>由开发人员自己创建的对象。内建对象和宿主对象时浏览器开发人员定义的自定义对象。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 创建对象 */</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj);        <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(obj);           <span class="comment">// Object&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在对象中保存的值称为属性</span></span><br><span class="line"><span class="comment"> * 向对象中添加属性：</span></span><br><span class="line"><span class="comment"> *      语法： 对象.属性名 = 属性值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">obj.name = <span class="string">"名字"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj);       <span class="comment">// Object&#123; name="孙悟空"&#125;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="对象的-in-运算符"><a href="#对象的-in-运算符" class="headerlink" title="对象的 in 运算符"></a>对象的 in 运算符</h4><p>可以通过in运算符检查一个对象中是否含有指定的属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 查询对象obj中是否有test属性 */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"test"</span> <span class="keyword">in</span> obj);</span><br></pre></td></tr></table></figure>
<p>枚举对象中的属性：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/* for...in语句，对象中有几个属性就遍历几次 */</span><br><span class="line">for(var n in obj)&#123;</span><br><span class="line">    console.log(n);     // 输出属性的名字n</span><br><span class="line">    console.log(obj[n]);        // 输出属性对应的值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="工厂方法创建对象"><a href="#工厂方法创建对象" class="headerlink" title="工厂方法创建对象"></a>工厂方法创建对象</h4><p>使用工厂方法创建的对象，使用的构造函数都是Object，所以创建的都是Object这个类型，所以就导致我们无法区分出多种不同类型的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 创建工厂方法 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age, gender</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line">    obj.name = name;</span><br><span class="line">    obj.age = age;</span><br><span class="line">    obj.gender = gender;</span><br><span class="line">    obj.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用工厂方法创建对象 */</span></span><br><span class="line"><span class="keyword">var</span> obj = createPerson(<span class="string">"孙悟空"</span>, <span class="number">20</span>, <span class="string">"男"</span>);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><p>构造函数就是一个普通函数，创建方式和普通函数没有区别。不同的是构造函数习惯上首字母大写。</p>
<p>构造函数需要使用<font color="red">new关键字</font>来调用。</p>
<p>比如使用工厂函数是候创建Object类一样，Object()就是一个构造函数            ：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure></p>
<p>构造函数的执行流程：</p>
<ol>
<li>立刻创建一个新的对象</li>
<li>将新建的对象设置为函数中的this，在构造函数中可以使用this来引用新建的对象</li>
<li>逐行执行函数中的代码</li>
<li>将新建的对象作为返回值返回</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, gender</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.gender = gender;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> Person(<span class="string">"孙悟空"</span>, <span class="number">20</span>, <span class="string">"男"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(per);</span><br></pre></td></tr></table></figure>
<p>使用同一个构造函数创建的对象，我们称为一类对象，也将一个构造函数称为一个类，我们将通过同一个构造函数创建的对象称为是该类的实例。</p>
<p>使用instanceof可以检查一个对象是否是一个类的实例。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 判断per是否是Person类 */</span></span><br><span class="line"><span class="built_in">console</span>.log(per <span class="keyword">instanceof</span> Person);</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h4><p>原型prototype，我们创建的每一个函数，解析器都会想函数中添加一个属性prototype，这个属性对应着一个对象，这个对象就是我们所谓的原型对象。</p>
<p>如果函数作为普通函数调用，prototype没有任何作用。</p>
<p>如果函数作为构造函数调用，它所创建爱你的对象都忽悠一个隐含的属性，指向构造函数的原型对象，可以通过<strong>proto</strong>来访问属性。</p>
<p>原型对象就相当于一个公共的区域，所有同一个类的实例都可以访问到这个原型对象，因此我们可以将对象中共有的内容，统一设置到原型对象中。比如之前的sayName()方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">"name"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向MyClass的原型中添加属性a */</span></span><br><span class="line">MyClass.prototype.a = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向MyClass的原型中添加一个方法 */</span></span><br><span class="line">MyClass.prototype.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">"hello"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="keyword">var</span> mc2 = <span class="keyword">new</span> MyClass();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(mc.a)</span><br><span class="line"><span class="built_in">console</span>.log(mc.sayHello());</span><br><span class="line"><span class="built_in">console</span>.log(mc.a == mc2.a);      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(mc.sayHello == mc2.sayHello);      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(mc.sayName == mc2.sayName);    <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>任何对象都有原型对象，包括原型对象，但是Object对象没有原型，已经到底了。</p>
<hr>
<h4 id="查询对象中属性"><a href="#查询对象中属性" class="headerlink" title="查询对象中属性"></a>查询对象中属性</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* in运算符，检查对象中是否含有某个属性，原型中的属性也算 */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"name"</span> <span class="keyword">in</span> mc);      <span class="comment">// 有就返回true，没有返回false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 用 对象原型的原型......中的hasOwnProperty()方法来检查对象自身中是否有某个属性，原型中的不算 */</span></span><br><span class="line"><span class="built_in">console</span>.log(mc.hasOwnProperty(<span class="string">"name"</span>));     <span class="comment">// 只有当对象自身中含有属性时，才会返回true</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>函数 function 由若干条语句组成，用于实现特定的功能。</p>
<p>函数也是一个对象，函数汇总可以封装一些功能，在调用时执行这些功能代码。</p>
<p>每个函数中创建的内容都是独立的。</p>
<hr>
<h4 id="自定义函数声明"><a href="#自定义函数声明" class="headerlink" title="自定义函数声明"></a>自定义函数声明</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 函数声明 */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> 函数名(<span class="params">[形参<span class="number">1</span>，形参<span class="number">2</span>……]</span>)</span>&#123;</span><br><span class="line">        语句……</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 函数表达式创建匿名函数 */</span></span><br><span class="line">    <span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; 语句…… &#125;;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h4><ul>
<li><p>在JS代码中调用函数</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> &gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">/* 函数声明 */</span></span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> num1 + num2;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">/* JS中调用函数 */</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.write(sum(<span class="number">1</span>, <span class="number">2</span>));</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在Html中调用函数</p>
<p>  使用”javascript:”方式调用JavaScript函数。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> &gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">/* 函数声明 */</span></span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.write(num1 + num2);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:sum(1, 2)"</span>&gt;</span>计算<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h4 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a>立即执行函数</h4><p>顾名思义，立即执行函数就是函数定义完就立即被调用。立即执行往往只执行一次，所以常是用匿名函数作为立即执行函数。</p>
<p>之前我们说匿名函数语法如下，需要将匿名函数赋值给变量，然后调用变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 函数表达式创建匿名函数 */</span></span><br><span class="line">    <span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; 语句…… &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 调用 */</span></span><br><span class="line">    fun();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>立即执行函数只需要稍微变一下就是。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 立即执行函数 */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * function语句单独使用会保存，但是如果将它用括号括起来，它就是一个整体，将不再报错，然后后面一个括号是函数的标志，加上之后就相当于调用了之前的一个function代码块，括号就是这个立即执行函数的形参域。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; 语句…… &#125;)();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="函数对象方法：call-和apply"><a href="#函数对象方法：call-和apply" class="headerlink" title="函数对象方法：call()和apply()"></a>函数对象方法：call()和apply()</h4><p>call()和apply()这两个方法都是函数对象的方法，需要通过函数对象来调用，当函数调用call()和apply()都会调用函数执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">"我是fun函数！"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 效果相同 */</span></span><br><span class="line">fun.call();</span><br><span class="line">fun.apply();</span><br><span class="line">fun();</span><br></pre></td></tr></table></figure>
<p>函数的默认this是window，调用call()和apply()可以将一个对象指定为第一个参数，此时这个对象将会成为函数执行时的this。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">"obj"</span>&#125;;</span><br><span class="line"></span><br><span class="line">fun();              <span class="comment">// fun函数的this是window</span></span><br><span class="line">fun.call(obj);</span><br><span class="line">fun.apply(obj);        <span class="comment">// 此时fun函数的this就是obj了。</span></span><br></pre></td></tr></table></figure>
<p>传递参数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    <span class="built_in">console</span>.log(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">"obj"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* call()可以将实参在对象之后依次传递。 */</span></span><br><span class="line">fun.call(obj, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">/* apply()可以将实参封装到一个数组中统一传递 */</span></span><br><span class="line">fun.apply(obj, [<span class="number">1</span>, <span class="number">2</span>]);</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>作用域指一个变量的作用范围。</p>
<ul>
<li><p>全局作用域：</p>
<ul>
<li>直接编写在script标签中的JS代码，都在全局作用域中。</li>
<li>全局作用域在页面打开时创建，在页面关闭时销毁</li>
<li>全局作用域中有一个全局对象windows，它代表一个浏览器的窗口，由浏览器创建，可以直接使用。</li>
<li>在全局作用域中，创建的变量都会作为windows对象的属性保存；创建的函数都会作为windows对象的方法保存。</li>
<li>全局作用域中的变量都是全局变量，在页面的任意位置都能访问。</li>
</ul>
</li>
<li><p>局部作用域/函数作用域：</p>
<ul>
<li>调用函数时创建函数作用域，函数执行完毕以后，函数作用域被销毁。</li>
<li>每调用一次函数就会创建一个新的函数作用域，他们之间是互相独立的。</li>
<li>在函数作用域中可以访问到全局作用域中的变量，但是函数作用域中的变量只能被当前函数作用域中被访问。</li>
<li>当函数作用域中操作一个变量时，会先在自身作用域中寻找，如果有就用，没有就去上一级作用域中找，并不是直接找全局变量。</li>
<li>要在函数中访问全局变量，可以直接使用window对象。</li>
<li>在函数中，不适用var声明的变量都会成为全局变量。</li>
<li>定义形参就相当于在函数作用域中声明了变量。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="声明提前"><a href="#声明提前" class="headerlink" title="声明提前"></a>声明提前</h3><ul>
<li><p>变量的声明提前</p>
<p>  使用var关键字声明的变量，会在所有的代码执行之前被声明（但是不会被赋值）。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"a = "</span> + a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
<p>  上述代码在浏览器中不会报错，但是控制台的输出结果为“a = undefined”，因为a使用var，出现声明提前，a被声明了，但是并没有赋值。就相当于如下的代码：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> = a;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"a = "</span> + a);</span><br><span class="line">a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数的声明提前</p>
<p>  使用函数形式声明创建的函数function函数(){}，它会在所有的代码执行之前就被创建（优先级高）。所以我们可以在函数声明之前来调用函数，因为调用函数的的时候函数已经被声明了，不会出现任何问题。</p>
<p>  但是使用函数表达式创建的函数不会被声明提前，所以不能在声明前调用。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* 函数声明会被提前 */</span></span><br><span class="line">fun()；</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是一个fun函数"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 函数表达式不会被声明提前 */</span></span><br><span class="line"><span class="keyword">var</span> fun2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是fun2函数"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun2();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="隐含参数：this"><a href="#隐含参数：this" class="headerlink" title="隐含参数：this"></a>隐含参数：this</h3><p>解析器在调用函数每次都会向函数内部传递进一个隐含参数，这个隐含参数就是this，指向的是一个对象，这个对象我们成为函数执行的上下文对象。很久函数的调用方式不同，this会指向不同的对象。</p>
<p>以函数的形式调用时，this永远都是window；以方法的形式调用时，this就是调用方法的那个对象。</p>
<hr>
<h3 id="toString方法"><a href="#toString方法" class="headerlink" title="toString方法"></a>toString方法</h3><p>toString()方法是Object对象中的方法，如果需要重写某个类的toString()方法，需要在类的原型中重写toString()方法。</p>
<hr>
<h3 id="垃圾回收-GC"><a href="#垃圾回收-GC" class="headerlink" title="垃圾回收(GC)"></a>垃圾回收(GC)</h3><p>程序运行过程中会产生垃圾，这些垃圾积攒过多后，会导致程序运行速度过慢，因此需要一个垃圾回收的机制，来处理程序运行中产生的垃圾。</p>
<p>当一个对象没有任何的变量或属性对它进行引用，此时我们将永远无法操作该对象，这种对象就是一个垃圾，这种对象过多会占用大量的内存空间，导致程序运行变慢，这种垃圾必须进行清理。</p>
<p>在JS中拥有自动的垃圾回收机制，会自动将这些垃圾对象从内存中销毁，我们不需要也不能进行垃圾回收的操作，不同浏览器清理方式不同。只需要将对象置null，浏览器就会自动清理，否则，浏览器无法判断。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象进行各种操作......</span></span><br><span class="line"></span><br><span class="line">obj = <span class="literal">null</span>;     <span class="comment">// 对象置空，将无法使用，产生垃圾。浏览器自动清理垃圾。</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="数组（Array）"><a href="#数组（Array）" class="headerlink" title="数组（Array）"></a>数组（Array）</h3><p>数组中的元素可以是任意类型的数据。</p>
<p><a href="http://www.w3school.com.cn/js/js_obj_array.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/js/js_obj_array.asp</a></p>
<p><a href="http://www.w3school.com.cn/jsref/jsref_obj_array.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jsref/jsref_obj_array.asp</a></p>
<hr>
<h4 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h4><p>创建数组并赋值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 方法一：创建数组对象，并赋值 */</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 方法二：使用字面量来创建数组，并赋值 */</span></span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<p>创建指定长度的数组，在JS中不常用，因为arr长度可以变化：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 如果使用Array对象来创建数组，当参数为单个值时，就表示创建该长度的数组 */</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="数组存取"><a href="#数组存取" class="headerlink" title="数组存取"></a>数组存取</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 向数组中添加元素</span></span><br><span class="line"><span class="comment"> * 语法：数组[索引] = 值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">33</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr);       <span class="comment">// "10,33"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 读取数组中的元素</span></span><br><span class="line"><span class="comment"> * 语法：数组[索引]</span></span><br><span class="line"><span class="comment"> * 数组越界，不会报错，返回undefined</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">0</span>]);        <span class="comment">// "10"</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="数组长度"><a href="#数组长度" class="headerlink" title="数组长度"></a>数组长度</h4><p>使用length属性可以进行数组长度操作。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 使用length属性获取数组的长度</span></span><br><span class="line"><span class="comment"> * 对于连续的数组，获取数组的长度，此时就是元素的个数</span></span><br><span class="line"><span class="comment"> * 对于非连续的数组，获取数组的最大索引+1，不一定等于元素的个数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">len = arr.length;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 使用length修改数组的长度</span></span><br><span class="line"><span class="comment"> * 如果修改的length大于数组的长度，则多出部分会空出来</span></span><br><span class="line"><span class="comment"> * 如果修改的length小鱼数组的长度，则多处的部分会被删除</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">arr.length = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr);       <span class="comment">// "10,33,,,"</span></span><br></pre></td></tr></table></figure></p>
<p>可以用length属性向数组末尾添加元素。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">i = <span class="number">0</span>;</span><br><span class="line">arr[arr.length] = i++;</span><br><span class="line">arr[arr.length] = i++;</span><br><span class="line">arr[arr.length] = i++;</span><br><span class="line">arr[arr.length] = i++;</span><br><span class="line"><span class="built_in">console</span>.log(arr);       <span class="comment">// "0,1,2,3"</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="数组遍历"><a href="#数组遍历" class="headerlink" title="数组遍历"></a>数组遍历</h4><p>方法一：普通for循环结合length属性即可。</p>
<p>方法二：for与in运算符。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>方法三：还有forEach方法遍历数组。这个方法只支持IE8以上的浏览器。可以在移动端浏览器运行。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * forEach()方法需要一个函数作为参数</span></span><br><span class="line"><span class="comment"> * 函数有我们创建但是不由我们调用，称为回调函数</span></span><br><span class="line"><span class="comment"> * 数组中有几个元素就会执行几次，每次执行时，浏览器会将遍历到的元素以实参的形式传递进来，我们可以来定义参数，来读取这些内容</span></span><br><span class="line"><span class="comment"> * 浏览器会在回调函数中传递三个参数：当前元素值、当前索引、正在遍历的数组全部值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, object</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="数组排序-sort"><a href="#数组排序-sort" class="headerlink" title="数组排序(sort)"></a>数组排序(sort)</h3><p>sort()方法用于排序，可以传入参数，自定义排序方法。不传参数，默认升序。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.sort());        <span class="comment">// 1,2,3,4,5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 自定义排序函数，从大到小 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortNumber</span>(<span class="params">a,b</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b-a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.sort(sortNumber));</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="隐含参数：arguments"><a href="#隐含参数：arguments" class="headerlink" title="隐含参数：arguments"></a>隐含参数：arguments</h3><p>在调用函数时，浏览器每次都会传递隐含的参数，除了this，还有arguments，是一个<font color="red">类数组</font>对象，arguments有数组效果但是不是数组。</p>
<p>在调用函数时，我们传递的实参都会在arguments中保存。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length);      <span class="comment">// 获取arguments的长度</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun(<span class="string">"hello"</span>, <span class="literal">false</span>);        <span class="comment">// 控制台输出 2</span></span><br></pre></td></tr></table></figure>
<p>如上，函数并没有定义形参，仍然可以使用arguments来获取传入的实参。</p>
<p>arguments还有一个属性叫callee，对应当前正在指向的函数对象。</p>
<hr>
<h3 id="Math工具类"><a href="#Math工具类" class="headerlink" title="Math工具类"></a>Math工具类</h3><p>Math和其他的对象不同，它不是一个构造函数，它属于一个工具类，不用创建对象，它里边封装了数学运算相关的属性和方法。</p>
<p><a href="http://www.w3school.com.cn/jsref/jsref_obj_math.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jsref/jsref_obj_math.asp</a></p>
<h4 id="ceil-向上取整方法"><a href="#ceil-向上取整方法" class="headerlink" title="ceil()向上取整方法"></a>ceil()向上取整方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.ceil(<span class="number">1.1</span>));        <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<h4 id="floor-向下取整方法"><a href="#floor-向下取整方法" class="headerlink" title="floor()向下取整方法"></a>floor()向下取整方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.floor(<span class="number">1.1</span>));        <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h4 id="round-四舍五入方法"><a href="#round-四舍五入方法" class="headerlink" title="round()四舍五入方法"></a>round()四舍五入方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.ceil(<span class="number">1.1</span>));        <span class="comment">//  1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.ceil(<span class="number">1.6</span>));        <span class="comment">//  2</span></span><br></pre></td></tr></table></figure>
<h4 id="random-生成0到1随机数方法"><a href="#random-生成0到1随机数方法" class="headerlink" title="random()生成0到1随机数方法"></a>random()生成0到1随机数方法</h4><p>这个数在0到1之间，但是不包括0和1，可以通过其他的Math方法来实现包括0和1，然后乘一个倍数和加减法操作实现任意范围内的随机数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.random());        <span class="comment">//  0.7679936159463725</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成x-y之间的随机数方法：</span></span><br><span class="line"><span class="comment">// Math.round(Math.random()*(y-x)+x);</span></span><br></pre></td></tr></table></figure></p>
<h4 id="max-和min-最大最小方法"><a href="#max-和min-最大最小方法" class="headerlink" title="max()和min()最大最小方法"></a>max()和min()最大最小方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max(<span class="number">10</span>, <span class="number">45</span>, <span class="number">30</span>, <span class="number">100</span>);        <span class="comment">// 100</span></span><br><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min(<span class="number">10</span>, <span class="number">45</span>, <span class="number">30</span>, <span class="number">100</span>);        <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h3><p>在JS中有三个包装类，这三个包装类可以将基本数据类型的数据转换为对象。</p>
<p>三个包装类：</p>
<ul>
<li><p>String()：可以将基本数据类型的字符串转换为String对象</p>
</li>
<li><p>Number()：可以将基本数据类型的数字转换为Number对象</p>
</li>
<li><p>Boolean()：可以加个基本数据类型的布尔值转换为Boolean对象</p>
</li>
</ul>
<font color="red">但是注意，我们再实际应用中不会使用基本数据类型的对象，如果使用基本客户数据类型的对象，在做一些比较时可能会带来一些不可预期的结果。</font>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num);       <span class="comment">// Number &#123; 2 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num);        <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"hello"</span>);      </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str);       <span class="comment">// String &#123; "hello" &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str);        <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">num.hello = <span class="string">"abc"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num.hello);     <span class="comment">// abc</span></span><br><span class="line"></span><br><span class="line">-------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num2 = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num == num2);         <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>当我们对一些基本数据类型的值去调用属性和方法时，浏览器会临时使用包装类将其转换成对象，然后嗲用对象的属性和方法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 方法和属性智能添加对象，不能添加给基本数据类型 */</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">s = s.toString();       <span class="comment">// 临时将s转换成Number对象，然后调用Number对象的toString()方法，用完后销毁</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(s);             <span class="comment">// "123"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s);      <span class="comment">// string</span></span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">s.hello = <span class="string">"nihao"</span>;          <span class="comment">// 现在s是string基本数据类型，先转换成String对象添加属性，之后销毁，又变成了string基本数据类型</span></span><br><span class="line"><span class="built_in">console</span>.log(s.hello);       <span class="comment">// "undefined"，因为此处仍然需要先转换为String对象，但是这个String对象不是之前那个有hello属性的对象，因为之前那个已经被销毁了。</span></span><br></pre></td></tr></table></figure></p>
<h4 id="String对象方法"><a href="#String对象方法" class="headerlink" title="String对象方法"></a>String对象方法</h4><p>字符串在底层是以字符数组的形式保存的。</p>
<p>字符串对象方法大都对本身没有影响，会返回一个新的值。</p>
<h5 id="charAt"><a href="#charAt" class="headerlink" title="charAt()"></a>charAt()</h5><p>可以返回字符串中指定位置的字符，和数组下标效果相同。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">0</span>));     <span class="comment">// h</span></span><br><span class="line"><span class="built_in">console</span>.log(str[<span class="number">0</span>]);            <span class="comment">// h</span></span><br></pre></td></tr></table></figure>
<h5 id="charCodeAt"><a href="#charCodeAt" class="headerlink" title="charCodeAt()"></a>charCodeAt()</h5><p>返回在指定的位置的字符的 Unicode 编码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">0</span>));     <span class="comment">// 104</span></span><br></pre></td></tr></table></figure>
<h5 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h5><p>检索字符串是否包含指定内容（正序），找到返回指定内容的位置，否则返回-1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"el"</span>));     <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.indexof(<span class="string">"l"</span>, <span class="number">3</span>));     <span class="comment">// 3，从位置3开始查找指定内容</span></span><br></pre></td></tr></table></figure>
<h5 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf()"></a>lastIndexOf()</h5><p>检索字符串是否包含指定内容（反序），找到返回指定内容的位置，否则返回-1。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/18/前端-JavaScript基础/" data-id="cjs1ci119002i6sutw1p43w9q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-前端-Html_Css常见问题解决" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/14/前端-Html_Css常见问题解决/" class="article-date">
  <time datetime="2018-12-14T11:24:18.000Z" itemprop="datePublished">2018-12-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/14/前端-Html_Css常见问题解决/">Html_Css常见问题解决</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目录：</p>
<ul>
<li>高度塌陷问题<ul>
<li>父容器的高度塌陷问题</li>
<li>元素浮动造成的高度塌陷问题</li>
</ul>
</li>
<li>父子元素外边距重叠</li>
<li>背景闪烁问题</li>
</ul>
<hr>
<h2 id="高度塌陷问题"><a href="#高度塌陷问题" class="headerlink" title="高度塌陷问题"></a>高度塌陷问题</h2><h3 id="父容器的高度塌陷问题"><a href="#父容器的高度塌陷问题" class="headerlink" title="父容器的高度塌陷问题"></a>父容器的高度塌陷问题</h3><h5 id="代码、截图如下："><a href="#代码、截图如下：" class="headerlink" title="代码、截图如下："></a>代码、截图如下：</h5><p>高度塌陷问题的代码如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box1&#123;</span></span><br><span class="line"><span class="undefined">                border: 10px red solid;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box2&#123;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: blue;</span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box3&#123;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: yellow;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>高度塌陷的示意图：<br><img src="/2018/12/14/前端-Html_Css常见问题解决/高度塌陷问题.jpg" alt="高度塌陷问题.jpg"></p>
<p>正常的示意图：<br><img src="/2018/12/14/前端-Html_Css常见问题解决/解决高度缺陷.jpg" alt="解决高度缺陷.jpg"></p>
<h5 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h5><p>在文档流中，父元素的高度默认是被子元素撑开的，也就是子元素多高，父元素就多高。但是当子元素设置浮动以后，子元素就完全脱离文档流，此时将会导致子元素无法撑起父元素的高度，导致父元素的高度塌陷，父元素下的所有元素都会向上移动，这样讲导致页面布局混乱。如案例中的子元素div（box2）设置浮动之后，父元素div（box1）高度塌陷，div（box3）向上移动。</p>
<h5 id="原理及解决方法："><a href="#原理及解决方法：" class="headerlink" title="原理及解决方法："></a>原理及解决方法：</h5><p><font color="red">方法一：</font>根据W3C的标准，在页面中元素都隐含的一个元素叫做Block Formatting Context，简称BFC，该属性可以设置打开或者关闭，默认是关闭的。</p>
<p>当开启元素的BFC以后，元素将会具有如下的特性：</p>
<ol>
<li>父元素的垂直边距不会和子元素重叠</li>
<li>开启BFC的元素不会被浮动元素所覆盖</li>
<li>开启BFC的元素可以包含浮动的子元素</li>
</ol>
<p>开启元素的BFC，各有缺陷：</p>
<ol>
<li><p>设置元素浮动。不推荐。</p>
<p> 使用这种方式开启，虽然可以撑开父元素，但是会导致父元素的宽度丢失，也会导致下边元素上移，不能解决问题。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.box1&#123;</span><br><span class="line">    border: 10px red solid;</span><br><span class="line">    float: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <img src="/2018/12/14/前端-Html_Css常见问题解决/设置父容器浮动.jpg" alt="设置父容器浮动.jpg"></p>
</li>
<li><p>设置元素绝对定位。不推荐。</p>
<p> 同上。</p>
</li>
<li><p>设置元素display属性为inline-block，将元素转化为内联块元素。不推荐。</p>
<p> 可以解决问题，但是会导致宽度丢失，不推荐使用。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.box1&#123;</span><br><span class="line">    border: 10px red solid;</span><br><span class="line">    display: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <img src="/2018/12/14/前端-Html_Css常见问题解决/元素转化为内联元素.jpg" alt="元素转化为内联元素.jpg"></p>
</li>
<li><p>大部分浏览器将元素的overflow设置为非visible的值，推荐hidden。推荐。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.box1&#123;</span><br><span class="line">    border: 10px red solid;</span><br><span class="line"></span><br><span class="line">    zoom: 1;        /* 解决IE6及以下浏览器高度塌陷问题*/</span><br><span class="line">    overflow: hidden;      /* 解决大部分浏览器高度塌陷问题 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <img src="/2018/12/14/前端-Html_Css常见问题解决/解决高度缺陷.jpg" alt="解决高度缺陷.jpg"></p>
</li>
</ol>
<p>IE6及以下浏览器中并不支持BFC，IE6中有另一个隐含的属性叫hasLayout，作用和BFC类似，所以在IE6及以下浏览器可以开启hasLayout来解决高度塌陷问题。</p>
<p>开启hasLayout副作用最小的方法是将元素的zoom设置为1即可。zoom表示将元素放大几倍。<br>开启hasLayout的方法：</p>
<ol>
<li><p>IE6及以下浏览器设置zoom: 1，推荐。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.box1&#123;</span><br><span class="line">    border: 10px red solid;</span><br><span class="line"></span><br><span class="line">    zoom: 1;        /* 解决IE6及以下浏览器高度塌陷问题*/</span><br><span class="line">    overflow: hidden;      /* 解决大部分浏览器高度塌陷问题 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置width和height，推荐。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.box1&#123;</span><br><span class="line">    border: 10px red solid;</span><br><span class="line"></span><br><span class="line">    height: xxx;</span><br><span class="line">    width: xxx;        /* 解决IE6及以下浏览器高度塌陷问题*/</span><br><span class="line">    overflow: hidden;      /* 解决大部分浏览器高度塌陷问题 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><font color="red">方法二：</font>尽管上述方法用起来副作用比较小，但是还有一种W3C推荐的方法，使用额外的div和clear的方法来无副作用地清除高度塌陷。</p>
<p>代码如下，在div（box2）中添加一个新的div专门用来清除浮动，这样就能完美解决高度塌陷问题。但是有一点不好的地方就是，会在代码中加入多余的div结构，但是这样影响并不大。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box1&#123;</span></span><br><span class="line"><span class="undefined">                border: 10px red solid;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box2&#123;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: blue;</span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box3&#123;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: yellow;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">            .clear&#123;</span></span><br><span class="line"><span class="undefined">                clear: both;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clear"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><font color="red">最优，方法三：</font>在方法二的基础上进行完善。即不添加多余的div结构，又要解决高度塌陷问题。使用CSS的方法，通过after伪类，向元素后添加一个空白的块元素，然后清除浮动，实现html方法添加div并设置clear的效果。</p>
<p>关键代码如下，只需要在出现高度塌陷的元素中使用这个类就能实现高度缺陷问题。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.clearfix:after&#123;</span><br><span class="line">    /* 添加一个空的内容 */</span><br><span class="line">    content: "";</span><br><span class="line">    /* 转换为一个块元素，block、table都行 */</span><br><span class="line">    display: block;</span><br><span class="line">    /* 清除浮动 */</span><br><span class="line">    clear: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 兼容IE6 */</span><br><span class="line">.clearfix&#123;</span><br><span class="line">    zoom: 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="元素浮动造成的高度塌陷问题"><a href="#元素浮动造成的高度塌陷问题" class="headerlink" title="元素浮动造成的高度塌陷问题"></a>元素浮动造成的高度塌陷问题</h3><h5 id="代码、截图如下：-1"><a href="#代码、截图如下：-1" class="headerlink" title="代码、截图如下："></a>代码、截图如下：</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>ttt<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box1&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: yellow;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                float: left;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box2&#123;</span></span><br><span class="line"><span class="undefined">                width: 200px;</span></span><br><span class="line"><span class="undefined">                height: 200px;</span></span><br><span class="line"><span class="undefined">                background-color: yellowgreen;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                float: right;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box3&#123;</span></span><br><span class="line"><span class="undefined">                width: 300px;</span></span><br><span class="line"><span class="undefined">                height: 300px;</span></span><br><span class="line"><span class="undefined">                background-color: skyblue;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>元素浮动造成的高度塌陷示意图如下：</p>
<p><img src="/2018/12/14/前端-Html_Css常见问题解决/浮动造成的高度塌陷.jpg" alt="浮动造成的高度塌陷.jpg"></p>
<p>正确的示意图如下：<br><img src="/2018/12/14/前端-Html_Css常见问题解决/clearright.jpg" alt="clearright.jpg"></p>
<h5 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h5><p>设置div（box1）向左浮动，div（box2）向右浮动，div（box3）受到其他元素影响，向上偏移。</p>
<h5 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h5><p>使用clear属性清除其他元素浮动对当前元素的影响。</p>
<p>可选值：</p>
<ul>
<li>none：不清除</li>
<li><p>left：清除左侧元素浮动对当前元素的影响。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.box3&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line"></span><br><span class="line">    clear: left;</span><br><span class="line">&#125;</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<p>  <img src="/2018/12/14/前端-Html_Css常见问题解决/clearleft.jpg" alt="clearleft.jpg"></p>
</li>
<li><p>right：清除右侧元素浮动对当前元素的影响。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.box3&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line"></span><br><span class="line">    clear: right;</span><br><span class="line">&#125;</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<p>  <img src="/2018/12/14/前端-Html_Css常见问题解决/clearright.jpg" alt="clearright.jpg"></p>
</li>
<li><p>both：清除左侧和右侧元素浮动对当前元素的影响。就是清除最大影响。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.box3&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line"></span><br><span class="line">    clear: both;</span><br><span class="line">&#125;</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<p>  <img src="/2018/12/14/前端-Html_Css常见问题解决/clearright.jpg" alt="clearright.jpg"></p>
</li>
</ul>
<hr>
<h2 id="父子元素外边距重叠"><a href="#父子元素外边距重叠" class="headerlink" title="父子元素外边距重叠"></a>父子元素外边距重叠</h2><h5 id="代码、截图如下：-2"><a href="#代码、截图如下：-2" class="headerlink" title="代码、截图如下："></a>代码、截图如下：</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box1&#123;</span></span><br><span class="line"><span class="undefined">                height: 200px;</span></span><br><span class="line"><span class="undefined">                width: 200px;</span></span><br><span class="line"><span class="undefined">                background-color: greenyellow;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            .box2&#123;</span></span><br><span class="line"><span class="undefined">                margin-top: 100px;</span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                width: 100px;</span></span><br><span class="line"><span class="undefined">                background-color: yellow;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>外边距重叠示意图：<br><img src="/2018/12/14/前端-Html_Css常见问题解决/外边距重叠.jpg" alt="外边距重叠.jpg"></p>
<p>正常示意图：</p>
<h5 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h5><p>当div（box2）设置上外边距的时候，与父容器div（box1）的外边距重叠了。</p>
<h5 id="原理及解决方法"><a href="#原理及解决方法" class="headerlink" title="原理及解决方法"></a>原理及解决方法</h5><p>父子容器相邻的垂直外边距会发生重叠，子元素的外边距会传递给父元素。</p>
<p>和上一个高度塌陷问题一样，可以同样使用一个额外的结构或者CSS方式来解决父子容器边距重合问题。</p>
<p>最简单的就是使用CSS的方法，通过before伪类，向元素前添加一个空白的块元素将父子元素之间隔开，这样子元素就不能将外边距传递给父元素了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.clearfix:before&#123;</span><br><span class="line">    /* 添加一个空的内容 */</span><br><span class="line">    content: "";</span><br><span class="line">    /* 转换为一个块元素 */</span><br><span class="line">    display: table;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将类给父元素就行了。</p>
<hr>
<h3 id="背景闪烁问题"><a href="#背景闪烁问题" class="headerlink" title="背景闪烁问题"></a>背景闪烁问题</h3><p>关键：图片整合技术 CSS-Sprite，也称雪碧图。</p>
<p>网页资源在加载外部资源的时候并不是同时加载的，浏览器会在资源被使用时才去加载资源，由于加载图片需要一定的时间，所以在加载和显示的过程中会有一段时间背景图片无法显示，导致闪烁问题。</p>
<p>比如，使用超链接来设置按钮时，如果将link、hover、active的背景图片加载不同的外部资源时，由于新的外部资源要重新加载，会导致闪烁问题。</p>
<p>为了解决该问题，可以将三个图片整合为一张图片，这样可以同时将三张图片一起加载（因为合成之后已经是一张图片了，只用加载一次），就不会出现闪烁问题，然后通过background-position设置背景图片的偏移量来切换要显示的图片的位置，这种技术叫图片整合技术（CSS-Sprite）。</p>
<p>优点：</p>
<ol>
<li>将多个图片整合为一张图片，浏览器只需要发送一次请求就可以加载多个图片，提高访问效率，提高用户体验。</li>
<li>将多个图片整合为一张图片，减小图片的总大小，提高请求的速度，提高用户体验。</li>
</ol>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/14/前端-Html_Css常见问题解决/" data-id="cjs1ci111002b6sutu4cpzp45" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Html-Css/">Html/Css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-《第一行代码-Android》第12章_最佳的UI体验" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/" class="article-date">
  <time datetime="2018-12-11T02:59:15.000Z" itemprop="datePublished">2018-12-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/">《第一行代码_Android》第12章_最佳的UI体验</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>此博客使用教材为《第一行代码 Android》第2版。</p>
<h1 id="第12章-最佳的UI体验——Material-Design实战"><a href="#第12章-最佳的UI体验——Material-Design实战" class="headerlink" title="第12章 最佳的UI体验——Material Design实战"></a>第12章 最佳的UI体验——Material Design实战</h1><p>目录：</p>
<ul>
<li>ActionBar的代替——Toolbar</li>
<li>滑动菜单——DrawerLayout控件</li>
<li>布局优化——NavigationView</li>
<li>悬浮按钮——FloatingActionButton控件</li>
<li>交互式提醒——Snackbar控件</li>
<li>加强版的FrameLayout——CoordinatorLayout</li>
</ul>
<hr>
<h3 id="ActionBar的代替——Toolbar"><a href="#ActionBar的代替——Toolbar" class="headerlink" title="ActionBar的代替——Toolbar"></a>ActionBar的代替——Toolbar</h3><p>ActionBar就是标题栏，使用Toolbar来代替ActionBar的话，就需要设置ActionBar为空。</p>
<p>styles.xml:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;resources&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Base application theme. --&gt;</span><br><span class="line">    &lt;style name=<span class="string">"AppTheme"</span> parent=<span class="string">"Theme.AppCompat.Light.NoActionBar"</span>&gt;</span><br><span class="line">        &lt;!-- Customize your theme here. --&gt;</span><br><span class="line">        &lt;item name="colorPrimary"&gt;@color/colorPrimary&lt;/item&gt;</span><br><span class="line">        &lt;item name="colorPrimaryDark"&gt;@color/colorPrimaryDark&lt;/item&gt;</span><br><span class="line">        &lt;item name="colorAccent"&gt;@color/colorAccent&lt;/item&gt;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure></p>
<p>activity_main.xml:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;FrameLayout</span><br><span class="line">    xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:app=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    tools:context=<span class="string">".MainActivity"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v7.widget.Toolbar</span><br><span class="line">        android:id=<span class="string">"@+id/toolbar"</span></span><br><span class="line">        android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">        android:layout_height=<span class="string">"?attr/actionBarSize"</span></span><br><span class="line">        android:background=<span class="string">"?attr/colorPrimary"</span></span><br><span class="line">        android:theme=<span class="string">"@style/ThemeOverlay.AppCompat.Dark.ActionBar"</span></span><br><span class="line">        app:popupTheme=<span class="string">"@style/ThemeOverlay.AppCompat.Light"</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/FrameLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>在res目录下新建“menu”菜单，然后在里面新建toolbar.xml资源文件，用来添加菜单选项。showAsAction属性always表示永远显示在Toolbar中，如果屏幕空间不够则不显示；ifRoom表示屏幕空间足够的情况下显示在Toolbar中，不够就显示在菜单中；never表示永远显示在菜单中。</p>
<p>然后，item中有一个icon属性和title属性，Toolbar中的只显示图标，菜单中只显示文字，最好两个都写上：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;menu xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:app=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:title=<span class="string">"Backup"</span></span><br><span class="line">        android:id=<span class="string">"@+id/backup"</span></span><br><span class="line">        android:icon=<span class="string">"@drawable/backup"</span></span><br><span class="line">        app:showAsAction=<span class="string">"always"</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:title=<span class="string">"Delete"</span></span><br><span class="line">        android:id=<span class="string">"@+id/delete"</span></span><br><span class="line">        android:icon=<span class="string">"@drawable/delete"</span></span><br><span class="line">        app:showAsAction=<span class="string">"ifRoom"</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:title=<span class="string">"Settings"</span></span><br><span class="line">        android:id=<span class="string">"@+id/settings"</span></span><br><span class="line">        android:icon=<span class="string">"@drawable/backup"</span></span><br><span class="line">        app:showAsAction=<span class="string">"never"</span>/&gt;</span><br><span class="line">&lt;/menu&gt;</span><br></pre></td></tr></table></figure>
<p>在MainActivity中加载Toolbar控件和菜单，并设置菜单的点击事件：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.me.drawerlayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.Toolbar;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);     <span class="comment">// 加载toolbar</span></span><br><span class="line">        setSupportActionBar(toolbar);       <span class="comment">// 将Toolbar实例传入</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreatePanelMenu</span><span class="params">(<span class="keyword">int</span> featureId, Menu menu)</span> </span>&#123;</span><br><span class="line">        getMenuInflater().inflate(R.menu.toolbar, menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.backup:</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"You Clicked Backup"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.delete:</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"You Clicked Delete"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.settings:</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"You Clicked Settings"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="滑动菜单-DrawerLayout"><a href="#滑动菜单-DrawerLayout" class="headerlink" title="滑动菜单 DrawerLayout"></a>滑动菜单 DrawerLayout</h3><p>滑动菜单，可以在屏幕侧边往中间滑动就能拉出滑动菜单，但是官方建议添加一个导航按钮（HomeAsUp按钮），来告知用户有导航按钮，并弹出。</p>
<p>此处结合Toolbar，一起来写，也可以不用。在滑动菜单的最外层布局一定要加android:layout_gravity，用来控制滑动菜单在屏幕的左面还是右面，left表示左面，right表示右面，start根据系统语言判断在左面还是右面：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark.ActionBar"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:popupTheme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Light"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 左边弹出布局区，可以将布局全部写里面，也可以include一个布局 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"start"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"This is menu"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"30sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"#FFF"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>MainActivity.java:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.me.drawerlayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.v4.view.GravityCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.widget.DrawerLayout;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.ActionBar;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.Toolbar;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DrawerLayout mDrawerLayout;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</span><br><span class="line">        setSupportActionBar(toolbar);</span><br><span class="line">        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取actionBar对象，就是自定义的toolbar</span></span><br><span class="line">        ActionBar actionBar = getSupportActionBar();</span><br><span class="line">        <span class="comment">// 如果actionBar对象不为空，在toolbar最左侧加入一个导航（HomeAsUp按钮），并设置图标，HomeAsUp按钮的id永远都是android.R.id.home。</span></span><br><span class="line">        <span class="keyword">if</span> (actionBar != <span class="keyword">null</span>)&#123;</span><br><span class="line">            actionBar.setDisplayHomeAsUpEnabled(<span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// 图表默认是返回箭头</span></span><br><span class="line">            actionBar.setHomeAsUpIndicator(R.drawable.menu);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreatePanelMenu</span><span class="params">(<span class="keyword">int</span> featureId, Menu menu)</span> </span>&#123;</span><br><span class="line">        getMenuInflater().inflate(R.menu.toolbar, menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> android.R.id.home:</span><br><span class="line">                mDrawerLayout.openDrawer(GravityCompat.START);</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * 关闭滑动界面</span></span><br><span class="line"><span class="comment">                 * mDrawerLayout.closeDrawers();</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.backup:</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"You Clicked Backup"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.delete:</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"You Clicked Delete"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.settings:</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"You Clicked Settings"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/drawerLayout.JPG" alt=""></p>
<hr>
<h3 id="NavigationView"><a href="#NavigationView" class="headerlink" title="NavigationView"></a>NavigationView</h3><p>当前的滑动菜单界面还是比较丑的，Google提供的NavigationView控件可以美化滑动菜单页面。</p>
<p>添加第三方框架<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation 'com.android.support:design:28.0.0'</span><br><span class="line">// 实现图片圆形化的第三方框架</span><br><span class="line">implementation 'de.hdodenhof:circleimageview:2.2.0'</span><br></pre></td></tr></table></figure></p>
<p>添加菜单nav_menu.xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">android:checkableBehavior</span>=<span class="string">"single"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/nav_profile"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">"@drawable/head"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"Profile"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/nav_location"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">"@drawable/location"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"Location"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/nav_settings"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">"@drawable/settings"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"Settings"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>添加头部文件nav_header.xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"180dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:padding</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">de.hdodenhof.circleimageview.CircleImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/icon_image"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"70dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"70dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@drawable/mine"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/mail"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"1172949809@qq.com"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"14sp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"#fff"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/username"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_above</span>=<span class="string">"@id/mail"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Ai Junhao"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"14sp"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在activity_main.xml文件中添加navigationView控件，控件有连个app属性，一个是menu，添加菜单文件，一个是headerLayout，添加头部文件：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 左边弹出布局区，可以将布局全部写里面，也可以include一个布局 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.NavigationView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/nav_view"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"start"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:menu</span>=<span class="string">"@menu/nav_menu"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:headerLayout</span>=<span class="string">"@layout/nav_header"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在MainActivity.java中加载控件并添加点击事件，头布局和memu布局的点击事件设置方式不同：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DrawerLayout mDrawerLayout;</span><br><span class="line">    <span class="keyword">private</span> Toolbar toolbar;</span><br><span class="line">    <span class="keyword">private</span> NavigationView navView;</span><br><span class="line">    <span class="keyword">private</span> View headerView;</span><br><span class="line">    <span class="keyword">private</span> TextView userName;</span><br><span class="line">    <span class="keyword">private</span> TextView email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line">        navView = (NavigationView) findViewById(R.id.nav_view);</span><br><span class="line">        <span class="comment">// 获取头布局</span></span><br><span class="line">        headerView = navView.getHeaderView(<span class="number">0</span>);</span><br><span class="line">        iconImage = (ImageView) headerView.findViewById(R.id.icon_image);</span><br><span class="line">        userName = (TextView) headerView.findViewById(R.id.username);</span><br><span class="line">        email = (TextView) headerView.findViewById(R.id.mail);</span><br><span class="line"></span><br><span class="line">        iconImage.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"点击了头像"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        userName.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"点击了用户名"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        email.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"点击了邮箱"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置navView的默认选中项，可以不设置</span></span><br><span class="line">        navView.setCheckedItem(R.id.nav_profile);</span><br><span class="line">        navView.setNavigationItemSelectedListener(<span class="keyword">new</span> NavigationView.OnNavigationItemSelectedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onNavigationItemSelected</span><span class="params">(@NonNull MenuItem menuItem)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">switch</span> (menuItem.getItemId())&#123;</span><br><span class="line">                    <span class="keyword">case</span> R.id.nav_profile:</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"点击了profile"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.nav_location:</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"点击了location"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.nav_settings:</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"点击了settings"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                mDrawerLayout.closeDrawers();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/navigationView.JPG" alt=""></p>
<hr>
<h3 id="悬浮按钮-FloatingActionButton控件"><a href="#悬浮按钮-FloatingActionButton控件" class="headerlink" title="悬浮按钮 FloatingActionButton控件"></a>悬浮按钮 FloatingActionButton控件</h3><p>activity_main.xml中添加FloatingActionButton控件，app:backgroundTint设置背景色，app:rippleColor点击时的背景色，app:elevation悬浮高度，决定阴影的大小:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/fab"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">"bottom|end"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">"16dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">"@drawable/done"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:backgroundTint</span>=<span class="string">"@null"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:rippleColor</span>=<span class="string">"#00ff00"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:elevation</span>=<span class="string">"8dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在MainActivity.java文件中添加入点击事件即可。</p>
<p><img src="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/FloatingActionButton.JPG" alt=""></p>
<hr>
<h3 id="交互式提醒-Snackbar控件"><a href="#交互式提醒-Snackbar控件" class="headerlink" title="交互式提醒 Snackbar控件"></a>交互式提醒 Snackbar控件</h3><p>Snackbar是比Toast更先进的提示工具。但是Snackbar并不是Toast的替代品，两者之间有不同的使用场景。Toast告知用户现在发生了什么，Snackbar在告知的同时在提示中加入一个可交互的按钮，当用户点击按钮的时候可以执行一些额外的操作。</p>
<p>MainActivity.java:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fab.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        Snackbar.make(v, <span class="string">"Data deleted"</span>, Snackbar.LENGTH_LONG).setAction(<span class="string">"Undo"</span>, <span class="keyword">new</span> View.OnClickListener()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"Data restored"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><img src="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/snackbar.JPG" alt=""></p>
<hr>
<h3 id="加强版的FrameLayout——CoordinatorLayout"><a href="#加强版的FrameLayout——CoordinatorLayout" class="headerlink" title="加强版的FrameLayout——CoordinatorLayout"></a>加强版的FrameLayout——CoordinatorLayout</h3><p>在普通情况下，CoordinatorLayout的作用与FrameLayout基本一致，不同的是，CoordinatorLayout可以监听器所有子控件的各种事件，然后自动帮助我们做出最为合理的响应。如，当Snackbar提示将悬浮按钮FloatingActionButton遮挡住了，而如果我们能让CoordinatorLayout监听到Snackbar的弹出事件，那么它会自动将内部的FloatingActionButton向上偏移，从而确保不会被Snackbar遮挡到。</p>
<p>activity_main.xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">......</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">......</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如此即可。</p>
<hr>
<h3 id="卡片式布局"><a href="#卡片式布局" class="headerlink" title="卡片式布局"></a>卡片式布局</h3><p>添加库文件：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">implementation 'com.android.support:recyclerview-v7:28.0.0'</span><br><span class="line">implementation 'com.android.support:cardview-v7:28.0.0'</span><br><span class="line">// 图片加载库</span><br><span class="line">implementation 'com.github.bumptech.glide:glide:4.8.0'</span><br></pre></td></tr></table></figure></p>
<p>添加滚动组件，activity_main.xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/recycler_view"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>实体类Fruit:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> imageId;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fruit</span><span class="params">(String name, <span class="keyword">int</span> imageId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getImageId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageId</span><span class="params">(<span class="keyword">int</span> imageId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>RecyclerView的自定义布局fruit_item:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.CardView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_margin</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:cardCornerRadius</span>=<span class="string">"4dp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/fruit_image"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/fruit_name"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">"5dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">"16sp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v7.widget.CardView</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>适配器FruitAdapter:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">FruitAdapter</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context mComtext;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Fruit&gt; mFruitList;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FruitAdapter</span><span class="params">(List&lt;Fruit&gt; fruitList)</span></span>&#123;</span><br><span class="line">        mFruitList = fruitList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup viewGroup, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mComtext == <span class="keyword">null</span>)&#123;</span><br><span class="line">            mComtext = viewGroup.getContext();</span><br><span class="line">        &#125;</span><br><span class="line">        View view = LayoutInflater.from(mComtext).inflate(R.layout.fruit_item, viewGroup, <span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ViewHolder(view);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(ViewHolder viewHolder, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        Fruit fruit = mFruitList.get(i);</span><br><span class="line">        viewHolder.fruitName.setText(fruit.getName());</span><br><span class="line">        Glide.with(mComtext).load(fruit.getImageId()).into(viewHolder.fruitImage);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mFruitList.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span></span>&#123;</span><br><span class="line">        CardView cardView;</span><br><span class="line">        ImageView fruitImage;</span><br><span class="line">        TextView fruitName;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(itemView);</span><br><span class="line">            cardView = (CardView) itemView;</span><br><span class="line">            fruitImage = (ImageView) itemView.findViewById(R.id.fruit_image);</span><br><span class="line">            fruitName = (TextView) itemView.findViewById(R.id.fruit_name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>MainActivity.java:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Fruit[] fruits = &#123;<span class="keyword">new</span> Fruit(<span class="string">"Apple"</span>, R.drawable.apple),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Orange"</span>, R.drawable.orange),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Pear"</span>, R.drawable.pear),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Pineapple"</span>, R.drawable.pineapple),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Cheery"</span>, R.drawable.cheery)&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Fruit&gt; fruitList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> FruitAdapter adapter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        initFruits();</span><br><span class="line">        RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycler_view);</span><br><span class="line">        GridLayoutManager layoutManager = <span class="keyword">new</span> GridLayoutManager(<span class="keyword">this</span>, <span class="number">2</span>);</span><br><span class="line">        recyclerView.setLayoutManager(layoutManager);</span><br><span class="line">        adapter = <span class="keyword">new</span> FruitAdapter(fruitList);</span><br><span class="line">        recyclerView.setAdapter(adapter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initFruits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        fruitList.clear();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">50</span>; i++)&#123;</span><br><span class="line">            Random random = <span class="keyword">new</span> Random();</span><br><span class="line">            <span class="keyword">int</span> index = random.nextInt(fruits.length);</span><br><span class="line">            fruitList.add(fruits[index]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如此，滚动组件和卡片式布局已经实现了，但是还是有一些小的不足，toolbar部分被遮盖了：</p>
<p><img src="/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/cardview.JPG" alt=""></p>
<hr>
<h3 id="AppBarLayout解决混动事件中的控件遮挡"><a href="#AppBarLayout解决混动事件中的控件遮挡" class="headerlink" title="AppBarLayout解决混动事件中的控件遮挡"></a>AppBarLayout解决混动事件中的控件遮挡</h3><p>AppBarLayout实际上是一个垂直方向上的LinearLayout，它在内部做了很多滚动事件的封装。</p>
<p>在Toolbar放置在AppBarLayout里面，然后在RecyclerView中使用app:layout_behavior属性指定了一个布局行为。AppBarLayout内部的子控件其实就可以指定如何去影响这些事件的，通过app:layout_scrollFlags属性就能实现。scoll表示当RecyclerVView向上混动的时候，Toolbar会跟着一起向上滚动实现隐蔽；enterAlways表示当RecyclerView向下滚动的时候，Toolbar一起向下滚动并重新显示；snap表示当Toolbar还没有完全隐蔽或者显示的时候，会根据当前滚动的距离自动是隐藏还是显示。activity_main.xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark.ActionBar"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:popupTheme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Light"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|enterAlways|snap"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/recycler_view"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_behavior</span>=<span class="string">"@string/appbar_scrolling_view_behavior"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v4.widget.SwipeRefreshLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/swip_refresh"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_behavior</span>=<span class="string">"@string/appbar_scrolling_view_behavior"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/recycler_view"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.v4.widget.SwipeRefreshLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line">    <span class="keyword">private</span> SwipeRefreshLayout swipeRefreshLayout;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Fruit[] fruits = &#123;<span class="keyword">new</span> Fruit(<span class="string">"Apple"</span>, R.drawable.apple),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Orange"</span>, R.drawable.orange),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Pear"</span>, R.drawable.pear),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Pineapple"</span>, R.drawable.pineapple),</span><br><span class="line">            <span class="keyword">new</span> Fruit(<span class="string">"Cheery"</span>, R.drawable.cheery)&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Fruit&gt; fruitList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> FruitAdapter adapter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line">        swipeRefreshLayout = (SwipeRefreshLayout) findViewById(R.id.swip_refresh);</span><br><span class="line">        swipeRefreshLayout.setColorSchemeResources(R.color.colorPrimary);</span><br><span class="line">        swipeRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> SwipeRefreshLayout.OnRefreshListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRefresh</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                refreshFruits();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        initFruits();</span><br><span class="line">        RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycler_view);</span><br><span class="line">        GridLayoutManager layoutManager = <span class="keyword">new</span> GridLayoutManager(<span class="keyword">this</span>, <span class="number">2</span>);</span><br><span class="line">        recyclerView.setLayoutManager(layoutManager);</span><br><span class="line">        adapter = <span class="keyword">new</span> FruitAdapter(fruitList);</span><br><span class="line">        recyclerView.setAdapter(adapter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">refreshFruits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                        initFruits();</span><br><span class="line">                        adapter.notifyDataSetChanged();</span><br><span class="line">                        swipeRefreshLayout.setRefreshing(<span class="keyword">false</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initFruits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        fruitList.clear();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">50</span>; i++)&#123;</span><br><span class="line">            Random random = <span class="keyword">new</span> Random();</span><br><span class="line">            <span class="keyword">int</span> index = random.nextInt(fruits.length);</span><br><span class="line">            fruitList.add(fruits[index]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/11/《第一行代码-Android》第12章_最佳的UI体验/" data-id="cjs1ci105001q6sutapiw7a6b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动端/">移动端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-《Android开发艺术探索》第1章_Activity的生命周期和启动模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/04/《Android开发艺术探索》第1章_Activity的生命周期和启动模式/" class="article-date">
  <time datetime="2018-12-04T10:45:15.000Z" itemprop="datePublished">2018-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/04/《Android开发艺术探索》第1章_Activity的生命周期和启动模式/">《Android开发艺术探索》第1章_Activity的生命周期和启动模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/04/《Android开发艺术探索》第1章_Activity的生命周期和启动模式/" data-id="cjs1ci101001m6sut9724i6nc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android技术——LBS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/12/Android技术——LBS/" class="article-date">
  <time datetime="2018-11-12T10:30:28.000Z" itemprop="datePublished">2018-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/12/Android技术——LBS/">Android特色开发—LBS(基于位置的服务)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目录</p>
<ul>
<li><p>基于位置的服务简介</p>
</li>
<li><p>申请百度开发者账号及获取API Key和SDK</p>
</li>
<li><p>Android Studio中配置SDK</p>
</li>
<li><p>获取位置信息</p>
<ol>
<li>获取经纬度</li>
<li>获取地址</li>
<li>获取位置描述</li>
<li>获取周边的POI</li>
<li>获取室内定位</li>
</ol>
</li>
<li><p>地图</p>
<ol>
<li>显示基础地图</li>
</ol>
</li>
</ul>
<hr>
<h3 id="基于位置的服务简介"><a href="#基于位置的服务简介" class="headerlink" title="基于位置的服务简介"></a>基于位置的服务简介</h3><p>基于位置的服务围绕的核心就是要先确定用户所在的位置。</p>
<p>通常有两种技术方式：</p>
<ol>
<li><p>一种是通过GPS定位：GPS定位的工作原理是基于手机内置的GPS硬件直接和卫星交互来获取当前的经纬度信息。</p>
<ul>
<li>优点：定位精确度非常高。</li>
<li>缺点：只能在室外使用，室内基本无法收到卫星信号。</li>
</ul>
</li>
<li><p>一种是通过网络定位：网络定位的工作原理是根据手机当前网络附近的三个基站进行测速，以此确定出一个大概的位置。</p>
<ul>
<li>优点：在室内室外都能使用。</li>
<li>缺点：定位精确度不高。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="申请百度开发者账号及获取API-Key和SDK"><a href="#申请百度开发者账号及获取API-Key和SDK" class="headerlink" title="申请百度开发者账号及获取API Key和SDK"></a>申请百度开发者账号及获取API Key和SDK</h3><p>此节我们使用的是第三方公司的SDK，国内在此领域做得比较好的一个是百度，一个是高德。</p>
<p>这里我们采用百度的LBS。</p>
<ol>
<li><p>首先申请百度账号。不解释。</p>
</li>
<li><p>申请成为一名百度开发者。</p>
<p> 打开网址：<a href="http://developer.baidu.com/user/info" target="_blank" rel="noopener">http://developer.baidu.com/user/info</a><br> 如下图填写个人信息，填写带‘*’号的即可：<br> <img src="/2018/11/12/Android技术——LBS/百度开发者.png" alt=""></p>
</li>
<li><p>进入百度地图开放平台  </p>
<p> 网址：<a href="http://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="noopener">http://lbsyun.baidu.com/apiconsole/key</a><br> 刚注册的账号的应用列表是空的，这里我已经使用过这个平台，应有列表有我的项目信息。<br> <img src="/2018/11/12/Android技术——LBS/百度地图开放平台.png" alt=""></p>
</li>
<li><p>点击创建应用</p>
<p> 如下图所示，应用名称自定义，应用类型自定义(这里我们使用Android SDK，给Android设备使用的)，启用服务默认即可。<br> <img src="/2018/11/12/Android技术——LBS/创建应用.png" alt=""></p>
<p> 开发版SHA1：是在Android Studio项目中的，打开Android Studio，点击右侧的“Gradle”，点击“:app/Tasks/android/signingReport”，在下面会弹出一些信息，找到里面的SHA1复制即可。<br> <img src="/2018/11/12/Android技术——LBS/SHA1.png" alt=""></p>
<p> 包名：就是Android Studio中SHA1对应项目的包名。</p>
</li>
<li><p>点击“提交”按钮</p>
<p> 此时，在应用列表中就有我们创建出来的项目了，其中“访问位置（AK）”就是API Key。</p>
</li>
<li><p>获取SDK</p>
<p> 网址：<a href="http://lbsyun.baidu.com/index.php?title=sdk/download&amp;action#selected=mapsdk_basicmap,mapsdk_searchfunction,mapsdk_lbscloudsearch,mapsdk_calculationtool,mapsdk_radar" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=sdk/download&amp;action#selected=mapsdk_basicmap,mapsdk_searchfunction,mapsdk_lbscloudsearch,mapsdk_calculationtool,mapsdk_radar</a></p>
<p> 百度地图开放平台首页中也可以进入下载SDK页面：<a href="http://lbsyun.baidu.com/index.php?title=首页" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=首页</a></p>
<p> 根据需求选择，然后下载sdk。<br> <img src="/2018/11/12/Android技术——LBS/SDK.PNG" alt=""></p>
<p> 那个“BaiduLBS_AndroidSDK_Lib.zip”就是我们需要的LBS的SDK。</p>
</li>
</ol>
<h3 id="Android-Studio中配置SDK"><a href="#Android-Studio中配置SDK" class="headerlink" title="Android Studio中配置SDK"></a>Android Studio中配置SDK</h3><p>官方推荐的配置方法：<a href="http://lbsyun.baidu.com/index.php?title=androidsdk/guide/create-project/androidstudio" target="_blank" rel="noopener">http://lbsyun.baidu.com/index.php?title=androidsdk/guide/create-project/androidstudio</a></p>
<p>这里进行更详细的介绍：</p>
<ol>
<li><p>解压</p>
<p> 将我们下载好的SDK文件“BaiduLBS_AndroidSDK_Lib.zip”解压。</p>
<p> <img src="/2018/11/12/Android技术——LBS/解压.PNG" alt=""></p>
<p> <img src="/2018/11/12/Android技术——LBS/解压2.PNG" alt=""></p>
<p> 在libs目录下有一个BaiduLBS_Android.jar包，这是给java层使用的，功能包内容如下：基础地图、室内地图、个性化地图、检索、云检索、计算工具、路线规划、定位等。 libs目录下其他的文件夹下有一些os文件，那是Native层使用的。</p>
</li>
<li><p>Android Studio中配置文件</p>
<p> 将BaiduLBS_Android.jar等jar包复制到项目额libs目录下，右键“Add As Library…”添加类库。 在src/main目录下新建一个jniLibs文件夹，将其他文件复制到里面。</p>
<p> <img src="/2018/11/12/Android技术——LBS/libs.PNG" alt=""></p>
</li>
<li><p>配置秘钥和服务</p>
</li>
</ol>
<p>AndroidManifest.xml中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.baidu.lbsapi.API_KEY"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:value</span>=<span class="string">"密匙"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">service</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.baidu.location.f"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:enabled</span>=<span class="string">"true"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:process</span>=<span class="string">":remote"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="获取位置信息"><a href="#获取位置信息" class="headerlink" title="获取位置信息"></a>获取位置信息</h3><p><img src="/2018/11/12/Android技术——LBS/LBS.jpg" alt=""></p>
<h4 id="官方权限说明"><a href="#官方权限说明" class="headerlink" title="官方权限说明"></a>官方权限说明</h4><p>部分危险权限需要运行时权限。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这个权限用于进行网络定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这个权限用于访问GPS定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用于访问wifi网络信息，wifi信息会用于进行网络定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 获取运营商信息，用于支持提供运营商信息相关的接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这个权限用于获取wifi的获取权限，wifi信息会用来进行网络定位--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_WIFI_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用于读取手机当前的状态--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 写入扩展存储，向扩展卡写入数据，用于写入离线定位数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 访问网络，网络定位需要上网--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SD卡读取权限，用户写入离线定位数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MOUNT_UNMOUNT_FILESYSTEMS"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><p>页面布局xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".LBSTest.MapActivity"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/tv_position"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"位置"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="获取经纬度"><a href="#获取经纬度" class="headerlink" title="获取经纬度"></a>获取经纬度</h4><p>配置定位SDK参数有如下一些可选参数：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption();</span><br><span class="line"></span><br><span class="line">option.setLocationMode(LocationMode.Hight_Accuracy);</span><br><span class="line"><span class="comment">//可选，设置定位模式，默认高精度</span></span><br><span class="line"><span class="comment">//LocationMode.Hight_Accuracy：高精度，优先使用GPS，其次网络；</span></span><br><span class="line"><span class="comment">//LocationMode. Battery_Saving：低功耗，仅使用网络；</span></span><br><span class="line"><span class="comment">//LocationMode. Device_Sensors：仅使用设备，GPS；</span></span><br><span class="line">	</span><br><span class="line">option.setCoorType(<span class="string">"bd09ll"</span>);</span><br><span class="line"><span class="comment">//可选，设置返回经纬度坐标类型，默认GCJ02</span></span><br><span class="line"><span class="comment">//GCJ02：国测局坐标；</span></span><br><span class="line"><span class="comment">//BD09ll：百度经纬度坐标；</span></span><br><span class="line"><span class="comment">//BD09：百度墨卡托坐标；</span></span><br><span class="line"><span class="comment">//海外地区定位，无需设置坐标类型，统一返回WGS84类型坐标</span></span><br><span class="line"> 	</span><br><span class="line">option.setScanSpan(<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//可选，设置发起定位请求的间隔，int类型，单位ms</span></span><br><span class="line"><span class="comment">//如果设置为0，则代表单次定位，即仅定位一次，默认为0</span></span><br><span class="line"><span class="comment">//如果设置非0，需设置1000ms以上才有效</span></span><br><span class="line">	</span><br><span class="line">option.setOpenGps(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，设置是否使用gps，默认false</span></span><br><span class="line"><span class="comment">//使用高精度和仅用设备两种定位模式的，参数必须设置为true</span></span><br><span class="line">	</span><br><span class="line">option.setLocationNotify(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，设置是否当GPS有效时按照1S/1次频率输出GPS结果，默认false</span></span><br><span class="line">	</span><br><span class="line">option.setIgnoreKillProcess(<span class="keyword">false</span>);</span><br><span class="line"><span class="comment">//可选，定位SDK内部是一个service，并放到了独立进程。</span></span><br><span class="line"><span class="comment">//设置是否在stop的时候杀死这个进程，默认（建议）不杀死，即setIgnoreKillProcess(true)</span></span><br><span class="line">	</span><br><span class="line">option.SetIgnoreCacheException(<span class="keyword">false</span>);</span><br><span class="line"><span class="comment">//可选，设置是否收集Crash信息，默认收集，即参数为false</span></span><br><span class="line"></span><br><span class="line">option.setWifiCacheTimeOut(<span class="number">5</span>*<span class="number">60</span>*<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//可选，V7.2版本新增能力</span></span><br><span class="line"><span class="comment">//如果设置了该接口，首次启动定位时，会先判断当前Wi-Fi是否超出有效期，若超出有效期，会先重新扫描Wi-Fi，然后定位</span></span><br><span class="line">	</span><br><span class="line">option.setEnableSimulateGps(<span class="keyword">false</span>);</span><br><span class="line"><span class="comment">//可选，设置是否需要过滤GPS仿真结果，默认需要，即参数为false</span></span><br><span class="line">	</span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure></p>
<p>注意，此处需要一些危险权限，需要动态申请。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.example.aijunhao.myproject.LBSTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.Manifest;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.ActivityCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.content.ContextCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.location.BDAbstractLocationListener;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.BDLocation;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.BDLocationListener;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.LocationClient;</span><br><span class="line"><span class="keyword">import</span> com.baidu.location.LocationClientOption;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.BaiduMap;</span><br><span class="line"><span class="keyword">import</span> com.example.aijunhao.myproject.MainActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.aijunhao.myproject.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> butterknife.BindView;</span><br><span class="line"><span class="keyword">import</span> butterknife.ButterKnife;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BindView</span>(R.id.tv_position)</span><br><span class="line">    TextView tvPosition;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LocationClient mLocationClient;</span><br><span class="line">    <span class="keyword">private</span> LocationClientOption  option;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有权限数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String[] permissions = <span class="keyword">new</span> String[]&#123;</span><br><span class="line">            Manifest.permission.ACCESS_FINE_LOCATION,</span><br><span class="line">            Manifest.permission.READ_PHONE_STATE,</span><br><span class="line">            Manifest.permission.WRITE_EXTERNAL_STORAGE</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需要申请权限的列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;String&gt; permissionList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        setContentView(R.layout.activity_map);</span><br><span class="line">        ButterKnife.bind(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;permissions.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(MapActivity.<span class="keyword">this</span>, permissions[i]) != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">                permissionList.add(permissions[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!permissionList.isEmpty())&#123;</span><br><span class="line">            String [] array = permissionList.toArray(<span class="keyword">new</span> String[permissionList.size()]);</span><br><span class="line">            ActivityCompat.requestPermissions(MapActivity.<span class="keyword">this</span>, array, <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            requestLocation();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">requestLocation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mLocationClient = <span class="keyword">new</span> LocationClient(getApplicationContext());</span><br><span class="line">        mLocationClient.registerLocationListener(<span class="keyword">new</span> MyLocationClickListener());</span><br><span class="line">        initLocationOption();</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 将配置好的LocationClientOption对象传递给LocationClient对象</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        mLocationClient.setLocOption(locationOption);</span><br><span class="line">        mLocationClient.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initLocationOption</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 配置定位SDK参数</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        option = <span class="keyword">new</span> LocationClientOption();</span><br><span class="line">        option.setLocationMode(LocationClientOption.LocationMode.Hight_Accuracy);</span><br><span class="line">        option.setScanSpan(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, @NonNull String[] permissions, @NonNull <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (requestCode)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> result : grantResults)&#123;</span><br><span class="line">                        <span class="keyword">if</span> (result != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">                            Toast.makeText(<span class="keyword">this</span>, <span class="string">"必须同意所有权限才是使用本程序"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                            finish();</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    requestLocation();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Toast.makeText(<span class="keyword">this</span>, <span class="string">"发生未知错误"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    finish();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">            StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 获取经纬度</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">double</span> latitude = location.getLatitude();</span><br><span class="line">            <span class="keyword">double</span> longitude = location.getLongitude();</span><br><span class="line"></span><br><span class="line">            currentPosition.append(<span class="string">"维度："</span>).append(latitude).append(<span class="string">"\n"</span>);</span><br><span class="line">            currentPosition.append(<span class="string">"经度："</span>).append(longitude).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 获取定位方式</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            String mode = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (location.getLocType() == BDLocation.TypeGpsLocation)&#123;</span><br><span class="line">                mode = <span class="string">"GPS"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (location.getLocType() == BDLocation.TypeNetWorkLocation)&#123;</span><br><span class="line">                mode = <span class="string">"网络"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            currentPosition.append(<span class="string">"定位方式："</span>).append(mode).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">            tvPosition.setText(currentPosition);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="获取地址"><a href="#获取地址" class="headerlink" title="获取地址"></a>获取地址</h4><p>配置定位SDK参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption()；</span><br><span class="line"></span><br><span class="line">option.setIsNeedAddress(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，是否需要地址信息，默认为不需要，即参数为false</span></span><br><span class="line"><span class="comment">//如果开发者需要获得当前点的地址信息，此处必须为true</span></span><br><span class="line"></span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure>
<p>获取地址只需要在BDLocationListener中获取即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">        StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取地址</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String address = location.getAddrStr();     <span class="comment">// 包括了以下全部</span></span><br><span class="line">        String country = location.getCountry();</span><br><span class="line">        String province = location.getProvince();</span><br><span class="line">        String city = location.getCity();</span><br><span class="line">        String district = location.getDistrict();</span><br><span class="line">        String street = location.getStreet();</span><br><span class="line">        currentPosition.append(<span class="string">"详细地址："</span>).append(address).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"国家："</span>).append(country).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"省份："</span>).append(province).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"城市："</span>).append(city).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"区县："</span>).append(district).append(<span class="string">"\n"</span>);</span><br><span class="line">        currentPosition.append(<span class="string">"街道："</span>).append(street).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        tvPosition.setText(currentPosition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取位置描述"><a href="#获取位置描述" class="headerlink" title="获取位置描述"></a>获取位置描述</h4><p>配置定位SDK参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption()；</span><br><span class="line"></span><br><span class="line">option.setIsNeedLocationDescribe(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，是否需要位置描述信息，默认为不需要，即参数为false</span></span><br><span class="line"><span class="comment">//如果开发者需要获得当前点的位置信息，此处必须为true</span></span><br><span class="line"></span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure>
<p>获取位置描述只需要在BDLocationListener中获取即可。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">        StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 位置描述</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String locationDescribe = location.getLocationDescribe();</span><br><span class="line">        currentPosition.append(<span class="string">"位置描述："</span>).append(locationDescribe).append(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        tvPosition.setText(currentPosition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="获取周边的POI（兴趣点坐标）"><a href="#获取周边的POI（兴趣点坐标）" class="headerlink" title="获取周边的POI（兴趣点坐标）"></a>获取周边的POI（兴趣点坐标）</h4><p>配置定位SDK参数：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LocationClientOption option = <span class="keyword">new</span> LocationClientOption()；</span><br><span class="line"></span><br><span class="line">option.setIsNeedLocationPoiList(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//可选，是否需要周边POI信息，默认为不需要，即参数为false</span></span><br><span class="line"><span class="comment">//如果开发者需要获得周边POI信息，此处必须为true</span></span><br><span class="line"></span><br><span class="line">mLocationClient.setLocOption(option);</span><br><span class="line"><span class="comment">//mLocationClient为第二步初始化过的LocationClient对象</span></span><br><span class="line"><span class="comment">//需将配置好的LocationClientOption对象，通过setLocOption方法传递给LocationClient对象使用</span></span><br><span class="line"><span class="comment">//更多LocationClientOption的配置，请参照类参考中LocationClientOption类的详细说明</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">获取周边POI只需要在BDLocationListener中获取即可。</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">    private class MyLocationClickListener implements BDLocationListener &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onReceiveLocation(BDLocation location) &#123;</span><br><span class="line">            StringBuilder currentPosition = new StringBuilder();</span><br><span class="line"></span><br><span class="line">            /**</span><br><span class="line">             * 周边POI信息</span><br><span class="line">             */</span><br><span class="line">            List&lt;Poi&gt; poiList = location.getPoiList();</span><br><span class="line">            for (int i=0; i&lt;poiList.size(); i++)&#123;</span><br><span class="line">                currentPosition.append(&quot;周边POI[&quot; + i + &quot;]:&quot; + &quot;\n&quot;);</span><br><span class="line">                currentPosition.append(&quot;ID:&quot; + poiList.get(i).getId());</span><br><span class="line">                currentPosition.append(&quot;name:&quot; + poiList.get(i).getName());</span><br><span class="line">                currentPosition.append(&quot;rank:&quot; + poiList.get(i).getRank() + &quot;\n&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            tvPosition.setText(currentPosition);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取室内定位"><a href="#获取室内定位" class="headerlink" title="获取室内定位"></a>获取室内定位</h4><p>获取室内定位只需要在BDLocationListener中获取即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocationClickListener</span> <span class="keyword">implements</span> <span class="title">BDLocationListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveLocation</span><span class="params">(BDLocation location)</span> </span>&#123;</span><br><span class="line">        StringBuilder currentPosition = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 室内定位</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (location.getFloor() != <span class="keyword">null</span>)&#123;</span><br><span class="line">            String buildingID = location.getBuildingID();</span><br><span class="line">            String buildingName = location.getBuildingName();       <span class="comment">// 百度内部建筑物ID</span></span><br><span class="line">            String floor = location.getFloor();     <span class="comment">// 室内定位楼层信息</span></span><br><span class="line">            mLocationClient.startIndoorMode();</span><br><span class="line">            currentPosition.append(<span class="string">"室内定位："</span> + <span class="string">"\n"</span>);</span><br><span class="line">            currentPosition.append(<span class="string">"buildingID: "</span> + buildingID);</span><br><span class="line">            currentPosition.append(<span class="string">"buildingName: "</span> + buildingName);</span><br><span class="line">            currentPosition.append(<span class="string">"floor: "</span> + floor + <span class="string">"\n"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            currentPosition.append(<span class="string">"当前位置不支持室内定位"</span> + <span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        tvPosition.setText(currentPosition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="停止定位"><a href="#停止定位" class="headerlink" title="停止定位"></a>停止定位</h4><p>活动销毁时一定要停止定位，否则程序会一直在后台进行定位，消耗手机电量。</p>
<p>重写onDestroy()方法，调用LocationClient的stop()方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    mLocationClient.stopIndoorMode();       <span class="comment">// 关闭室内定位</span></span><br><span class="line">    mLocationClient.stop();     <span class="comment">// 关闭定位</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h3><h4 id="官方权限说明-1"><a href="#官方权限说明-1" class="headerlink" title="官方权限说明"></a>官方权限说明</h4><p>部分危险权限需要运行时权限。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 获取设备网络状态，禁用后无法获取网络状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 网络权限，当禁用后，无法进行检索等相关业务 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 读取设备硬件信息，统计数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 读取系统信息，包含系统版本等信息，用作统计 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"com.android.launcher.permission.READ_SETTINGS"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 获取设备的网络状态，鉴权所需网络代理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 允许sd卡写权限，需写入地图数据，禁用后无法显示地图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 获取统计数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_SETTINGS"</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 使用步行AR导航，配置Camera权限 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CAMERA"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="布局-1"><a href="#布局-1" class="headerlink" title="布局"></a>布局</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".LBSTest.MyMapActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ……</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.baidu.mapapi.map.MapView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/mapview"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:clickable</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="显示地图"><a href="#显示地图" class="headerlink" title="显示地图"></a>显示地图</h4><p>目前百度地图SDK所提供的地图等级为3-21级，所包含的信息有建筑物、道路、河流、学校、公园等内容。 </p>
<p>在21级时，不支持显示卫星图、热力图、交通路况图层。</p>
<p>当地图从20级放大到21级后，卫星图、热力图、交通路况图层将不再显示；缩小到20级后，卫星图、热力图、交通路况图层，会再正常显示。</p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>MAP_TYPE_NORMAL</td>
<td>普通地图（包含3D地图）</td>
</tr>
<tr>
<td>MAP_TYPE_SATELLITE</td>
<td>卫星图</td>
</tr>
<tr>
<td>MAP_TYPE_NONE</td>
<td>空白地图</td>
</tr>
</tbody>
</table>
<ul>
<li><p>普通地图</p>
<p>  基础的道路地图。 显示道路、建筑物、绿地以及河流等重要的自然特征。 </p>
</li>
<li><p>卫星地图</p>
<p>  显示卫星照片数据。 </p>
</li>
<li><p>空白地图</p>
<p>  无地图瓦片,地图将渲染为空白地图。不加载任何图块，将不会使用流量下载基础地图瓦片图层。支持叠加任何覆盖物。</p>
</li>
</ul>
<pre><code>适用场景：与瓦片图层（tileOverlay）一起使用，节省流量，提升自定义瓦片图下载速度。 
</code></pre><ul>
<li><p>实时路况图，嵌入地图中使用</p>
<p>  全国范围内已支持绝大部分城市实时路况查询。普通地图和卫星地图，均支持叠加实时路况图。 </p>
</li>
<li><p>百度城市热力图，嵌入地图中使用</p>
<p>  百度城市热力图是用不同颜色的区块叠加在地图上描述人群分布、密度和变化趋势的一个产品。地图层级介于11-20级时，可显示城市热力图。</p>
<p>  百度城市热力图的性质及使用与实时路况图类似，只需要简单的接口调用，即可在地图上展现样式丰富的百度城市热力图。 </p>
</li>
</ul>
<p>在java中，需要重写activity的生命周期的几个方法来管理地图的生命周期，初始化SDK的方法一定要在设置布局之前进行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.aijunhao.myproject.LBSTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.SDKInitializer;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.BaiduMap;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.MapView;</span><br><span class="line"><span class="keyword">import</span> com.example.aijunhao.myproject.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> butterknife.BindView;</span><br><span class="line"><span class="keyword">import</span> butterknife.ButterKnife;</span><br><span class="line"><span class="keyword">import</span> butterknife.OnClick;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BindView</span>(R.id.mapview)</span><br><span class="line">    MapView mapview;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_normal)</span><br><span class="line">    TextView btnNormal;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_satellite)</span><br><span class="line">    TextView btnSatellite;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_none)</span><br><span class="line">    TextView btnNone;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_traffic_map)</span><br><span class="line">    TextView btnTrafficMap;</span><br><span class="line">    <span class="meta">@BindView</span>(R.id.btn_heat_map)</span><br><span class="line">    TextView btnHeatMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> BaiduMap baiduMap;      <span class="comment">// 百度地图对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> trafficEnabled = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> heatMapEnabled = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        SDKInitializer.initialize(getApplicationContext());     <span class="comment">// 初始化地图SDK，需要在setContentView()方法之前使用</span></span><br><span class="line"></span><br><span class="line">        setContentView(R.layout.activity_my_map);</span><br><span class="line">        ButterKnife.bind(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        baiduMap = mapview.getMap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnClick</span>(&#123;R.id.btn_normal, R.id.btn_satellite, R.id.btn_none, R.id.btn_traffic_map, R.id.btn_heat_map&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewClicked</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (view.getId()) &#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_normal:</span><br><span class="line">                <span class="comment">// 普通地图</span></span><br><span class="line">                baiduMap.setMapType(BaiduMap.MAP_TYPE_NORMAL);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_satellite:</span><br><span class="line">                <span class="comment">// 卫星地图</span></span><br><span class="line">                baiduMap.setMapType(BaiduMap.MAP_TYPE_SATELLITE);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_none:</span><br><span class="line">                <span class="comment">// 空白图，一般与瓦片图层一起使用</span></span><br><span class="line">                baiduMap.setMapType(BaiduMap.MAP_TYPE_NONE);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_traffic_map:</span><br><span class="line">                <span class="comment">// 路况图</span></span><br><span class="line">                baiduMap.setTrafficEnabled(trafficEnabled);</span><br><span class="line">                <span class="keyword">if</span> (trafficEnabled == <span class="keyword">true</span>)&#123;</span><br><span class="line">                    btnTrafficMap.setText(<span class="string">"路况图：开启状态"</span>);</span><br><span class="line">                    trafficEnabled = <span class="keyword">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    btnTrafficMap.setText(<span class="string">"路况图：关闭状态"</span>);</span><br><span class="line">                    trafficEnabled = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_heat_map:</span><br><span class="line">                <span class="comment">// 热力图</span></span><br><span class="line">                baiduMap.setBaiduHeatMapEnabled(heatMapEnabled);</span><br><span class="line">                <span class="keyword">if</span> (heatMapEnabled == <span class="keyword">true</span>)&#123;</span><br><span class="line">                    btnHeatMap.setText(<span class="string">"热力图：开启状态"</span>);</span><br><span class="line">                    heatMapEnabled = <span class="keyword">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    btnHeatMap.setText(<span class="string">"热力图：关闭状态"</span>);</span><br><span class="line">                    heatMapEnabled = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        mapview.onResume();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        mapview.onPause();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        mapview.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在地图中显示定位"><a href="#在地图中显示定位" class="headerlink" title="在地图中显示定位"></a>在地图中显示定位</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/12/Android技术——LBS/" data-id="cjs1ci0y200086sutzb24dsgr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动端/">移动端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android技术——JSON" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/10/Android技术——JSON/" class="article-date">
  <time datetime="2018-11-10T06:34:36.000Z" itemprop="datePublished">2018-11-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/10/Android技术——JSON/">Android技术——JSON</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>此节主要讲Android中的JSON及JSON的各种解析方法。</p>
<ul>
<li><p>JSON简介</p>
</li>
<li><p>工具：</p>
<ol>
<li>GsonFormat插件工具</li>
<li>HiJson格式化工具</li>
</ol>
</li>
<li><p>解析方法：</p>
<ol>
<li>Android原生解析</li>
<li>第三方框架Gson解析</li>
<li>第三方框架FastJson解析</li>
</ol>
</li>
</ul>
<hr>
<h2 id="JSON简介"><a href="#JSON简介" class="headerlink" title="JSON简介"></a>JSON简介</h2><p>JSON 全称是JavaScript Object Notation，是一种轻量级的数据交换格式。</p>
<p>特点：</p>
<ol>
<li>本质就是具有特定格式的字符串。</li>
<li>JSON完全独立于编程语言</li>
<li>JSON比XML数据传输的有效性要高出很多。 </li>
</ol>
<p>JSON对象结构：{key1:value1, key2:value2, key3:value3}</p>
<p>JSON数组结构：[value1, value2, value3]</p>
<p>key的数据类型：字符串。value对的数据类型：数值、字符串、null、json数组[]，json对象{}</p>
<h3 id="JSON解析方向"><a href="#JSON解析方向" class="headerlink" title="JSON解析方向"></a>JSON解析方向</h3><ol>
<li>将java对象(包含集合)转化为json格式字符串。——在服务器端应用</li>
<li>将json格式字符串转换为java对象(包含集合)。——在客户端应用</li>
</ol>
<hr>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><h3 id="GsonFormat插件工具"><a href="#GsonFormat插件工具" class="headerlink" title="GsonFormat插件工具"></a>GsonFormat插件工具</h3><p>GsonFormat是Android Studio中的一个插件，主要用于使用Gson库将JSONObject格式的String 解析成实体，该插件可以加快开发进度，使用非常方便，效率高。</p>
<p>在File-&gt;Settings-&gt;Plugins中查找安装即可。</p>
<p>在创建JSON的实体类JavaBean时，右键generate-&gt;GsonFormat，将JSON数据张贴到对话框中，点击OK即可生成对应的JavaBean实体类。</p>
<p><img src="/2018/11/10/Android技术——JSON/GsonFormat.png" alt=""></p>
<h3 id="HiJson格式化工具"><a href="#HiJson格式化工具" class="headerlink" title="HiJson格式化工具"></a>HiJson格式化工具</h3><p>直接百度搜索下载即可，是JSON的格式化工具，帮助开发人员更轻易地分析JSON格式。</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src="/2018/11/10/Android技术——JSON/HiJson.png" alt=""></h2><h2 id="解析方法"><a href="#解析方法" class="headerlink" title="解析方法"></a>解析方法</h2><h3 id="Android原生的JSON解析技术"><a href="#Android原生的JSON解析技术" class="headerlink" title="Android原生的JSON解析技术"></a>Android原生的JSON解析技术</h3><p>原生技术编程相对麻烦，但是有些特殊的json数据只能用原生来解析。</p>
<p>原生技术只能将json数据转为java数据，官方并没有提供将java转化为json的API接口。</p>
<h4 id="将json格式的字符串-转换为Java对象"><a href="#将json格式的字符串-转换为Java对象" class="headerlink" title="将json格式的字符串{}转换为Java对象"></a>将json格式的字符串{}转换为Java对象</h4><p>API:</p>
<ul>
<li>JSONObject(String json): 将json字符串解析为json对象。</li>
<li>XXX getXXX(String name): 根据name，在json对象中得到对象的value，没有默认值，会出现空指针异常。</li>
<li>XXX optXXX(String name): 根据name，在json对象中得到对象的value，有默认值，不会出现空指针异常。</li>
</ul>
<font color="red">重要的事情说三遍！！！<br><br>写bean对象的时候，务必！务必！务必！重写toString()方法。<br><br>写bean对象的时候，务必！务必！务必！重写toString()方法。<br><br>写bean对象的时候，务必！务必！务必！重写toString()方法。<br></font>

<p>ShopInfo.java：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.aijunhao.myproject.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Aijunhao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Time</span> 2018-11-10 15:20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShopInfo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * id : 2</span></span><br><span class="line"><span class="comment">     * name : 大虾</span></span><br><span class="line"><span class="comment">     * price : 12.3</span></span><br><span class="line"><span class="comment">     * imagePath : http://120.79.254.54/name.jpg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">    <span class="keyword">private</span> String imagePath;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopInfo</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">double</span> price, String imagePath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">        <span class="keyword">this</span>.imagePath = imagePath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getImagePath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> imagePath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImagePath</span><span class="params">(String imagePath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.imagePath = imagePath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ShopInfo&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", price="</span> + price +</span><br><span class="line">                <span class="string">", imagePath='"</span> + imagePath + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将json格式的字符串&#123;&#125;转换为java数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jsonToJavaObjectByNative</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取或创建JSON数据</span></span><br><span class="line">        String json = <span class="string">"&#123;\n"</span> +</span><br><span class="line">                <span class="string">"\t\"id\": 2, \n"</span> +</span><br><span class="line">                <span class="string">"\t\"name\": \"大虾\",\n"</span> +</span><br><span class="line">                <span class="string">"\t\"price\": 12.3,\n"</span> +</span><br><span class="line">                <span class="string">"\t\"imagePath\": \"http://120.79.254.54/name.jpg\"\n"</span> +</span><br><span class="line">                <span class="string">"&#125;\n"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 解析json</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JSONObject object = <span class="keyword">new</span> JSONObject(json);</span><br><span class="line">            <span class="keyword">int</span> id = object.optInt(<span class="string">"id"</span>);</span><br><span class="line">            String name = object.optString(<span class="string">"name"</span>);</span><br><span class="line">            <span class="keyword">double</span> price = object.optDouble(<span class="string">"price"</span>);</span><br><span class="line">            String imagePath = object.optString(<span class="string">"imagePath"</span>);</span><br><span class="line"></span><br><span class="line">            shopInfo = <span class="keyword">new</span> ShopInfo(id, name, price, imagePath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 显示原始的json数据</span></span><br><span class="line">        tvNativeOrignal.setText(json);</span><br><span class="line">        <span class="comment">// 显示转化后的json数据</span></span><br><span class="line">        tvNativeLast.setText(shopInfo.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="将json格式的字符串-转换为Java对象的List"><a href="#将json格式的字符串-转换为Java对象的List" class="headerlink" title="将json格式的字符串[]转换为Java对象的List"></a>将json格式的字符串[]转换为Java对象的List</h4><font color="red"><br>为避免空指针异常，在遍历list并创建JSONObject对象的时候需要判断JSONObject是否为空。<br></font>

<p>API：</p>
<ul>
<li>JSONArray(String json): 将json字符串解析为json数组</li>
<li>int length()：得到json数组中元素的个数</li>
<li>XXX getXXX(int index): 根据下标得到json数组中对应的元素数据，无默认值，会出现空指针异常。</li>
<li>XXX optXXX(int index): 根据下标得到json数组中对应的元素数据，有默认值，不会出现空指针异常。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  将json格式的字符串[]转换为java集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jsonToJavaListByNative</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String json = <span class="string">"[\n"</span> +</span><br><span class="line">            <span class="string">"    &#123;\n"</span> +</span><br><span class="line">            <span class="string">"        \"id\": 1,\n"</span> +</span><br><span class="line">            <span class="string">"        \"imagePath\": \"http://120.79.254.54/name.jpg\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"name\": \"大虾1\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"price\": 12.3\n"</span> +</span><br><span class="line">            <span class="string">"    &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"    &#123;\n"</span> +</span><br><span class="line">            <span class="string">"        \"id\": 2,\n"</span> +</span><br><span class="line">            <span class="string">"        \"imagePath\": \"http://120.79.254.54/name2.jpg\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"name\": \"大虾2\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"price\": 12.5\n"</span> +</span><br><span class="line">            <span class="string">"    &#125;\n"</span> +</span><br><span class="line">            <span class="string">"]"</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;ShopInfo&gt; shopInfoList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        JSONArray jsonArray = <span class="keyword">new</span> JSONArray(json);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;jsonArray.length(); i++)&#123;</span><br><span class="line">            JSONObject jsonObject = jsonArray.getJSONObject(i);</span><br><span class="line">            <span class="keyword">if</span> (jsonObject != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> id = jsonObject.optInt(<span class="string">"id"</span>);</span><br><span class="line">                String name = jsonObject.optString(<span class="string">"name"</span>);</span><br><span class="line">                <span class="keyword">double</span> price = jsonObject.optDouble(<span class="string">"price"</span>);</span><br><span class="line">                String imagePath = jsonObject.optString(<span class="string">"imagePath"</span>);</span><br><span class="line"></span><br><span class="line">                shopInfo = <span class="keyword">new</span> ShopInfo(id, name, price, imagePath);</span><br><span class="line">                shopInfoList.add(shopInfo);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tvNativeOrignal.setText(json);</span><br><span class="line">    tvNativeLast.setText(shopInfoList.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="复杂的json数据解析"><a href="#复杂的json数据解析" class="headerlink" title="复杂的json数据解析"></a>复杂的json数据解析</h4><p>DataInfo.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.aijunhao.myproject.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Aijunhao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Time</span> 2018-11-10 15:56</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataInfo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * data : &#123;"count":5,"items":[&#123;"id":45,"title":"坚果"&#125;,&#123;"id":132,"title":"炒货"&#125;,&#123;"id":166,"title":"蜜饯"&#125;,&#123;"id":195,"title":"果楠"&#125;,&#123;"id":196,"title":"礼盒"&#125;]&#125;</span></span><br><span class="line"><span class="comment">     * rs_code : 1000</span></span><br><span class="line"><span class="comment">     * rs_msg : success</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DataBean data;</span><br><span class="line">    <span class="keyword">private</span> String rs_code;</span><br><span class="line">    <span class="keyword">private</span> String rs_msg;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"DataInfo&#123;"</span> +</span><br><span class="line">                <span class="string">"data="</span> + data +</span><br><span class="line">                <span class="string">", rs_code='"</span> + rs_code + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", rs_msg='"</span> + rs_msg + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataBean <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(DataBean data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRs_code</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rs_code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRs_code</span><span class="params">(String rs_code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.rs_code = rs_code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRs_msg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rs_msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRs_msg</span><span class="params">(String rs_msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.rs_msg = rs_msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DataBean</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * count : 5</span></span><br><span class="line"><span class="comment">         * items : [&#123;"id":45,"title":"坚果"&#125;,&#123;"id":132,"title":"炒货"&#125;,&#123;"id":166,"title":"蜜饯"&#125;,&#123;"id":195,"title":"果楠"&#125;,&#123;"id":196,"title":"礼盒"&#125;]</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">        <span class="keyword">private</span> List&lt;ItemsBean&gt; items;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"DataBean&#123;"</span> +</span><br><span class="line">                    <span class="string">"count="</span> + count +</span><br><span class="line">                    <span class="string">", items="</span> + items +</span><br><span class="line">                    <span class="string">'&#125;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCount</span><span class="params">(<span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.count = count;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> List&lt;ItemsBean&gt; <span class="title">getItems</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> items;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItems</span><span class="params">(List&lt;ItemsBean&gt; items)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.items = items;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemsBean</span> </span>&#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * id : 45</span></span><br><span class="line"><span class="comment">             * title : 坚果</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">            <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"ItemsBean&#123;"</span> +</span><br><span class="line">                        <span class="string">"id="</span> + id +</span><br><span class="line">                        <span class="string">", title='"</span> + title + <span class="string">'\''</span> +</span><br><span class="line">                        <span class="string">'&#125;'</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> id;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.id = id;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> title;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.title = title;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 复杂的json数据解析</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jsonToJavaOfComplex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String json = <span class="string">"&#123;\n"</span> +</span><br><span class="line">            <span class="string">"    \"data\": &#123;\n"</span> +</span><br><span class="line">            <span class="string">"        \"count\": 5,\n"</span> +</span><br><span class="line">            <span class="string">"        \"items\": [\n"</span> +</span><br><span class="line">            <span class="string">"            &#123;\n"</span> +</span><br><span class="line">            <span class="string">"                \"id\": 45,\n"</span> +</span><br><span class="line">            <span class="string">"                \"title\": \"坚果\"\n"</span> +</span><br><span class="line">            <span class="string">"            &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"            &#123;\n"</span> +</span><br><span class="line">            <span class="string">"                \"id\": 132,\n"</span> +</span><br><span class="line">            <span class="string">"                \"title\": \"炒货\"\n"</span> +</span><br><span class="line">            <span class="string">"            &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"            &#123;\n"</span> +</span><br><span class="line">            <span class="string">"                \"id\": 166,\n"</span> +</span><br><span class="line">            <span class="string">"                \"title\": \"蜜饯\"\n"</span> +</span><br><span class="line">            <span class="string">"            &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"            &#123;\n"</span> +</span><br><span class="line">            <span class="string">"                \"id\": 195,\n"</span> +</span><br><span class="line">            <span class="string">"                \"title\": \"果楠\"\n"</span> +</span><br><span class="line">            <span class="string">"            &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"            &#123;\n"</span> +</span><br><span class="line">            <span class="string">"                \"id\": 196,\n"</span> +</span><br><span class="line">            <span class="string">"                \"title\": \"礼盒\"\n"</span> +</span><br><span class="line">            <span class="string">"            &#125;\n"</span> +</span><br><span class="line">            <span class="string">"        ]\n"</span> +</span><br><span class="line">            <span class="string">"    &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"    \"rs_code\": \"1000\",\n"</span> +</span><br><span class="line">            <span class="string">"    \"rs_msg\": \"success\"\n"</span> +</span><br><span class="line">            <span class="string">"&#125;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 封装对象</span></span><br><span class="line">    DataInfo dataInfo = <span class="keyword">new</span> DataInfo();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        JSONObject object = <span class="keyword">new</span> JSONObject(json);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第一层解析</span></span><br><span class="line">        JSONObject data = object.optJSONObject(<span class="string">"data"</span>);</span><br><span class="line">        String rs_code = object.optString(<span class="string">"rs_code"</span>);</span><br><span class="line">        String rs_msg = object.optString(<span class="string">"rs_msg"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第一层封装</span></span><br><span class="line">        dataInfo.setRs_code(rs_code);</span><br><span class="line">        dataInfo.setRs_msg(rs_msg);</span><br><span class="line">        DataInfo.DataBean dataBean = <span class="keyword">new</span> DataInfo.DataBean();</span><br><span class="line">        dataInfo.setData(dataBean);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第二层解析</span></span><br><span class="line">        <span class="keyword">int</span> count = data.optInt(<span class="string">"count"</span>);</span><br><span class="line">        JSONArray items = data.getJSONArray(<span class="string">"items"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第二层封装</span></span><br><span class="line">        dataBean.setCount(count);</span><br><span class="line">        List&lt;DataInfo.DataBean.ItemsBean&gt; itemsBean = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        dataBean.setItems(itemsBean);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第三层解析</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;items.length(); i++) &#123;</span><br><span class="line">            JSONObject jsonObject = items.optJSONObject(i);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (jsonObject != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> id = jsonObject.optInt(<span class="string">"id"</span>);</span><br><span class="line">                String title = jsonObject.optString(<span class="string">"title"</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 第三层封装</span></span><br><span class="line">                DataInfo.DataBean.ItemsBean bean = <span class="keyword">new</span> DataInfo.DataBean.ItemsBean();</span><br><span class="line">                bean.setId(id);</span><br><span class="line">                bean.setTitle(title);</span><br><span class="line">                itemsBean.add(bean);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tvNativeOrignal.setText(json);</span><br><span class="line">    tvNativeLast.setText(dataInfo.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="特殊JSON数据解析"><a href="#特殊JSON数据解析" class="headerlink" title="特殊JSON数据解析"></a>特殊JSON数据解析</h4><p>按我们之前说的，json格式是键值对的方式，但是如下的json，它的list中的键很特殊，不是特定的字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;code&quot;:0, </span><br><span class="line">	&quot;list&quot;:&#123;</span><br><span class="line">		&quot;0&quot;:&#123;</span><br><span class="line">			&quot;aid&quot;:&quot;6008965,</span><br><span class="line">			&quot;author&quot;:&quot;不知道&quot;,</span><br><span class="line">			&quot;coins&quot; 170,</span><br><span class="line">			&quot;copyright&quot;: &quot;Copy&quot;,</span><br><span class="line">			&quot;create&quot;:&quot;2016-08-25 21:34&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;1&quot;:&#123;</span><br><span class="line">			&quot;aid&quot;:&quot;6008938&quot;,</span><br><span class="line">			&quot;author&quot;:&quot;不清楚&quot;,</span><br><span class="line">			&quot;coins&quot;:404,</span><br><span class="line">			&quot;copyright&quot;:&quot;Copy&quot;,</span><br><span class="line">			&quot;create&quot;:&quot;2016-08-25 21:33&quot;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>此时就要将list看成一个json对象，然后根据特殊的键”0”，”1”，来获对应的值。</p>
<hr>
<h2 id="第三方框架GSON解析"><a href="#第三方框架GSON解析" class="headerlink" title="第三方框架GSON解析"></a>第三方框架GSON解析</h2><p>编码简洁，是google官方推荐的。</p>
<p>支持的解析方向：</p>
<ol>
<li>将json格式的字符串{}转换为Java对象</li>
<li>将json格式的字符串[]转换为Java对象的List</li>
<li>将Java对象想转换为json字符串{}</li>
<li>将Java对象的List转换为json字符串[]</li>
</ol>
<h3 id="导入架包"><a href="#导入架包" class="headerlink" title="导入架包"></a>导入架包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// gson</span></span><br><span class="line">implementation <span class="string">'com.google.code.gson:gson:2.8.5'</span></span><br></pre></td></tr></table></figure>
<h3 id="将JSON格式的字符串-转换为JAVA对象"><a href="#将JSON格式的字符串-转换为JAVA对象" class="headerlink" title="将JSON格式的字符串{}转换为JAVA对象"></a>将JSON格式的字符串{}转换为JAVA对象</h3><p>API：</p>
<ul>
<li><t> T fromJson(String json, Class<t> classOfT);</t></t></li>
</ul>
<p>注意：要求JSON对象中的KEY的名称与java对象对应的类中的属性名要相同，否则不能转换。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jsonToJavaObjectByGson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String json = <span class="string">"&#123;\n"</span> +</span><br><span class="line">            <span class="string">"\t\"id\": 2, \n"</span> +</span><br><span class="line">            <span class="string">"\t\"name\": \"大虾\",\n"</span> +</span><br><span class="line">            <span class="string">"\t\"price\": 12.3,\n"</span> +</span><br><span class="line">            <span class="string">"\t\"imagePath\": \"http://120.79.254.54/name.jpg\"\n"</span> +</span><br><span class="line">            <span class="string">"&#125;\n"</span>;</span><br><span class="line"></span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">    ShopInfo shopInfo = gson.fromJson(json, ShopInfo.class);</span><br><span class="line"></span><br><span class="line">    tvGsonOrignal.setText(json);</span><br><span class="line">    tvGsonLast.setText(shopInfo.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="将JSON格式的字符串-转换为JAVA对象的List"><a href="#将JSON格式的字符串-转换为JAVA对象的List" class="headerlink" title="将JSON格式的字符串[]转换为JAVA对象的List"></a>将JSON格式的字符串[]转换为JAVA对象的List</h3><p>API:</p>
<ul>
<li>fromJson(String json, Type typeOfT);</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jsonToJavaListByGson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String json = <span class="string">"[\n"</span> +</span><br><span class="line">            <span class="string">"    &#123;\n"</span> +</span><br><span class="line">            <span class="string">"        \"id\": 1,\n"</span> +</span><br><span class="line">            <span class="string">"        \"imagePath\": \"http://120.79.254.54/name.jpg\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"name\": \"大虾1\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"price\": 12.3\n"</span> +</span><br><span class="line">            <span class="string">"    &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"    &#123;\n"</span> +</span><br><span class="line">            <span class="string">"        \"id\": 2,\n"</span> +</span><br><span class="line">            <span class="string">"        \"imagePath\": \"http://120.79.254.54/name2.jpg\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"name\": \"大虾2\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"price\": 12.5\n"</span> +</span><br><span class="line">            <span class="string">"    &#125;\n"</span> +</span><br><span class="line">            <span class="string">"]"</span>;</span><br><span class="line"></span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">    List&lt;ShopInfo&gt; shopInfoList = gson.fromJson(json, <span class="keyword">new</span> TypeToken&lt;List&lt;ShopInfo&gt;&gt;() &#123;</span><br><span class="line">    &#125;.getType());</span><br><span class="line"></span><br><span class="line">    tvGsonOrignal.setText(json);</span><br><span class="line">    tvGsonLast.setText(shopInfoList.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="将JAVA对下岗转换为JSON字符串"><a href="#将JAVA对下岗转换为JSON字符串" class="headerlink" title="将JAVA对下岗转换为JSON字符串{}"></a>将JAVA对下岗转换为JSON字符串{}</h3><p>API:</p>
<ul>
<li>String toJson(Object src);</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">javaToJsonByGson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ShopInfo shopInfo = <span class="keyword">new</span> ShopInfo(<span class="number">1</span>, <span class="string">"鲍鱼"</span>, <span class="number">250.0</span>, <span class="string">"baoyu"</span>);</span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">    String json = gson.toJson(shopInfo);</span><br><span class="line">    tvGsonOrignal.setText(shopInfo.toString());</span><br><span class="line">    tvGsonLast.setText(json);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="将JAVA对象的List转换为json字符串"><a href="#将JAVA对象的List转换为json字符串" class="headerlink" title="将JAVA对象的List转换为json字符串[]"></a>将JAVA对象的List转换为json字符串[]</h3><p>API:</p>
<ul>
<li>String toJson(Object src);</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">javaToJsonArrayByGson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;ShopInfo&gt; shopInfoList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    ShopInfo baoyu = <span class="keyword">new</span> ShopInfo(<span class="number">1</span>, <span class="string">"鲍鱼"</span>, <span class="number">250.0</span>, <span class="string">"baoyu"</span>);</span><br><span class="line">    ShopInfo longxia = <span class="keyword">new</span> ShopInfo(<span class="number">2</span>, <span class="string">"龙虾"</span>, <span class="number">251.0</span>, <span class="string">"longxia"</span>);</span><br><span class="line">    shopInfoList.add(baoyu);</span><br><span class="line">    shopInfoList.add(longxia);</span><br><span class="line"></span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">    String json = gson.toJson(shopInfoList);</span><br><span class="line"></span><br><span class="line">    tvGsonOrignal.setText(shopInfoList.toString());</span><br><span class="line">    tvGsonLast.setText(json);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="第三方框架FastJson解析"><a href="#第三方框架FastJson解析" class="headerlink" title="第三方框架FastJson解析"></a>第三方框架FastJson解析</h2><p>FastJson是一个Java语言编写的高性能功能完善的JSON库，采用一种“假定有序快速匹配”的算法，把JSON Parse的性能提升到极致，是目前Java语言中最快的JSON库。</p>
<p>是阿里巴巴推出的开源库。</p>
<p><a href="https://github.com/alibaba/fastjson/wiki/Quick-Start-CN" target="_blank" rel="noopener">https://github.com/alibaba/fastjson/wiki/Quick-Start-CN</a></p>
<h3 id="新手指南"><a href="#新手指南" class="headerlink" title="新手指南"></a>新手指南</h3><h4 id="1-什么是fastjson"><a href="#1-什么是fastjson" class="headerlink" title="1. 什么是fastjson?"></a>1. 什么是fastjson?</h4><p>fastjson是阿里巴巴的开源JSON解析库，它可以解析JSON格式的字符串，支持将Java Bean序列化为JSON字符串，也可以从JSON字符串反序列化到JavaBean。</p>
<h4 id="2-fastjson的优点"><a href="#2-fastjson的优点" class="headerlink" title="2.fastjson的优点"></a>2.fastjson的优点</h4><h5 id="2-1-速度快"><a href="#2-1-速度快" class="headerlink" title="2.1 速度快"></a>2.1 速度快</h5><p>fastjson相对其他JSON库的特点是快，从2011年fastjson发布1.1.x版本之后，其性能从未被其他Java实现的JSON库超越。</p>
<h5 id="2-2-使用广泛"><a href="#2-2-使用广泛" class="headerlink" title="2.2 使用广泛"></a>2.2 使用广泛</h5><p>fastjson在阿里巴巴大规模使用，在数万台服务器上部署，fastjson在业界被广泛接受。在2012年被开源中国评选为最受欢迎的国产开源软件之一。</p>
<h5 id="2-3-测试完备"><a href="#2-3-测试完备" class="headerlink" title="2.3 测试完备"></a>2.3 测试完备</h5><p>fastjson有非常多的testcase，在1.2.11版本中，testcase超过3321个。每次发布都会进行回归测试，保证质量稳定。</p>
<h5 id="2-4-使用简单"><a href="#2-4-使用简单" class="headerlink" title="2.4 使用简单"></a>2.4 使用简单</h5><p>fastjson的API十分简洁。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String text = JSON.toJSONString(obj); <span class="comment">//序列化</span></span><br><span class="line">String text = JSON.toJSONString(obj); <span class="comment">//序列化</span></span><br><span class="line">VO vo = JSON.parseObject(<span class="string">"&#123;...&#125;"</span>, VO.class); <span class="comment">//反序列化</span></span><br><span class="line">List&lt;VO&gt; voList = JSON.parseArray(<span class="string">"&#123;...&#125;"</span>, VO.class); <span class="comment">//反序列化</span></span><br></pre></td></tr></table></figure>
<h5 id="2-5-功能完备"><a href="#2-5-功能完备" class="headerlink" title="2.5 功能完备"></a>2.5 功能完备</h5><p>支持泛型，支持流处理超大文本，支持枚举，支持序列化和反序列化扩展。</p>
<p>支持的解析方向：</p>
<ol>
<li>将json格式的字符串{}转换为Java对象</li>
<li>将json格式的字符串[]转换为Java对象的List</li>
<li>将Java对象想转换为json字符串{}</li>
<li>将Java对象的List转换为json字符串[]</li>
</ol>
<h3 id="导入架包-1"><a href="#导入架包-1" class="headerlink" title="导入架包"></a>导入架包</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// FastJson</span><br><span class="line">implementation 'com.alibaba:fastjson:1.2.10'</span><br></pre></td></tr></table></figure>
<h3 id="将json格式的字符串-转换为Java对象-1"><a href="#将json格式的字符串-转换为Java对象-1" class="headerlink" title="将json格式的字符串{}转换为Java对象"></a>将json格式的字符串{}转换为Java对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jsonToJavaObjectByFastJson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String json = <span class="string">"&#123;\n"</span> +</span><br><span class="line">            <span class="string">"\t\"id\": 2, \n"</span> +</span><br><span class="line">            <span class="string">"\t\"name\": \"大虾\",\n"</span> +</span><br><span class="line">            <span class="string">"\t\"price\": 12.3,\n"</span> +</span><br><span class="line">            <span class="string">"\t\"imagePath\": \"http://120.79.254.54/name.jpg\"\n"</span> +</span><br><span class="line">            <span class="string">"&#125;\n"</span>;</span><br><span class="line"></span><br><span class="line">    ShopInfo shopInfo = JSON.parseObject(json, ShopInfo.class);</span><br><span class="line"></span><br><span class="line">    tvFastJsonOrignal.setText(json);</span><br><span class="line">    tvFastJsonLast.setText(shopInfo.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="将json格式的字符串-转换为Java对象的List-1"><a href="#将json格式的字符串-转换为Java对象的List-1" class="headerlink" title="将json格式的字符串[]转换为Java对象的List"></a>将json格式的字符串[]转换为Java对象的List</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jsonToJavaListByFastJson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String json = <span class="string">"[\n"</span> +</span><br><span class="line">            <span class="string">"    &#123;\n"</span> +</span><br><span class="line">            <span class="string">"        \"id\": 1,\n"</span> +</span><br><span class="line">            <span class="string">"        \"imagePath\": \"http://120.79.254.54/name.jpg\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"name\": \"大虾1\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"price\": 12.3\n"</span> +</span><br><span class="line">            <span class="string">"    &#125;,\n"</span> +</span><br><span class="line">            <span class="string">"    &#123;\n"</span> +</span><br><span class="line">            <span class="string">"        \"id\": 2,\n"</span> +</span><br><span class="line">            <span class="string">"        \"imagePath\": \"http://120.79.254.54/name2.jpg\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"name\": \"大虾2\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"price\": 12.5\n"</span> +</span><br><span class="line">            <span class="string">"    &#125;\n"</span> +</span><br><span class="line">            <span class="string">"]"</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;ShopInfo&gt; shopInfoList = JSON.parseArray(json, ShopInfo.class);</span><br><span class="line"></span><br><span class="line">    tvFastJsonOrignal.setText(json);</span><br><span class="line">    tvFastJsonLast.setText(shopInfoList.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="将Java对象想转换为json字符串"><a href="#将Java对象想转换为json字符串" class="headerlink" title="将Java对象想转换为json字符串{}"></a>将Java对象想转换为json字符串{}</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">javaToJsonByFastJson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ShopInfo shopInfo = <span class="keyword">new</span> ShopInfo(<span class="number">1</span>, <span class="string">"鲍鱼"</span>, <span class="number">250.0</span>, <span class="string">"baoyu"</span>);</span><br><span class="line">    </span><br><span class="line">    String json = JSON.toJSONString(shopInfo);</span><br><span class="line">    </span><br><span class="line">    tvFastJsonOrignal.setText(shopInfo.toString());</span><br><span class="line">    tvFastJsonLast.setText(json);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="将Java对象的List转换为json字符串"><a href="#将Java对象的List转换为json字符串" class="headerlink" title="将Java对象的List转换为json字符串[]"></a>将Java对象的List转换为json字符串[]</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">javaToJsonArrayByFastJson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;ShopInfo&gt; shopInfoList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    ShopInfo baoyu = <span class="keyword">new</span> ShopInfo(<span class="number">1</span>, <span class="string">"鲍鱼"</span>, <span class="number">250.0</span>, <span class="string">"baoyu"</span>);</span><br><span class="line">    ShopInfo longxia = <span class="keyword">new</span> ShopInfo(<span class="number">2</span>, <span class="string">"龙虾"</span>, <span class="number">251.0</span>, <span class="string">"longxia"</span>);</span><br><span class="line">    shopInfoList.add(baoyu);</span><br><span class="line">    shopInfoList.add(longxia);</span><br><span class="line"></span><br><span class="line">    String json = JSON.toJSONString(shopInfoList);</span><br><span class="line"></span><br><span class="line">    tvFastJsonOrignal.setText(shopInfoList.toString());</span><br><span class="line">    tvFastJsonLast.setText(json);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/10/Android技术——JSON/" data-id="cjs1ci0xt00056sut5e43c5jl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动端/">移动端</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Html-Css/">Html/Css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端，BOM/">前端，BOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端，DOM/">前端，DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端，tool/">前端，tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/浏览器兼容/">浏览器兼容</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动端/">移动端</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Html-Css/" style="font-size: 12px;">Html/Css</a> <a href="/tags/JavaScript/" style="font-size: 14px;">JavaScript</a> <a href="/tags/Python/" style="font-size: 18px;">Python</a> <a href="/tags/blog/" style="font-size: 12px;">blog</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/前端/" style="font-size: 16px;">前端</a> <a href="/tags/前端，BOM/" style="font-size: 10px;">前端，BOM</a> <a href="/tags/前端，DOM/" style="font-size: 10px;">前端，DOM</a> <a href="/tags/前端，tool/" style="font-size: 10px;">前端，tool</a> <a href="/tags/小程序/" style="font-size: 10px;">小程序</a> <a href="/tags/浏览器兼容/" style="font-size: 10px;">浏览器兼容</a> <a href="/tags/移动端/" style="font-size: 20px;">移动端</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/02/12/前端-JavaScript基础-tool工具集合/">前端-JavaScript基础-tool工具集合</a>
          </li>
        
          <li>
            <a href="/2019/02/08/前端-JavaScript基础-BOM基础/">前端-JavaScript基础-BOM基础</a>
          </li>
        
          <li>
            <a href="/2019/02/01/前端-浏览器兼容/">前端-浏览器兼容</a>
          </li>
        
          <li>
            <a href="/2019/01/19/前端-JavaScript基础-DOM基础/">JavaScript基础_DOM基础</a>
          </li>
        
          <li>
            <a href="/2018/12/18/前端-JavaScript基础/">JavaScript基础</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Ai Junhao<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>